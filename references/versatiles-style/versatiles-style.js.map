{"version":3,"file":"versatiles-style.js","sources":["../../node_modules/color-name/index.js","../../node_modules/simple-swizzle/index.js","../../node_modules/simple-swizzle/node_modules/is-arrayish/index.js","../../node_modules/color-string/index.js","../../node_modules/color-convert/conversions.js","../../node_modules/color-convert/route.js","../../node_modules/color-convert/index.js","../../node_modules/color/index.js","../../src/shortbread/template.ts","../../node_modules/balanced-match/index.js","../../node_modules/brace-expansion/index.js","../../src/shortbread/properties.ts","../../src/lib/utils.ts","../../src/style_builder/decorator.ts","../../src/style_builder/recolor.ts","../../src/style_builder/style_builder.ts","../../src/shortbread/layers.ts","../../src/styles/colorful.ts","../../src/styles/index.ts","../../src/styles/eclipse.ts","../../src/styles/graybeard.ts","../../src/styles/neutrino.ts","../../src/types/vector_layer.ts","../../src/guess_style/random_color.ts","../../src/guess_style/guess_style.ts","../../src/types/tilejson.ts"],"sourcesContent":["'use strict'\r\n\r\nmodule.exports = {\r\n\t\"aliceblue\": [240, 248, 255],\r\n\t\"antiquewhite\": [250, 235, 215],\r\n\t\"aqua\": [0, 255, 255],\r\n\t\"aquamarine\": [127, 255, 212],\r\n\t\"azure\": [240, 255, 255],\r\n\t\"beige\": [245, 245, 220],\r\n\t\"bisque\": [255, 228, 196],\r\n\t\"black\": [0, 0, 0],\r\n\t\"blanchedalmond\": [255, 235, 205],\r\n\t\"blue\": [0, 0, 255],\r\n\t\"blueviolet\": [138, 43, 226],\r\n\t\"brown\": [165, 42, 42],\r\n\t\"burlywood\": [222, 184, 135],\r\n\t\"cadetblue\": [95, 158, 160],\r\n\t\"chartreuse\": [127, 255, 0],\r\n\t\"chocolate\": [210, 105, 30],\r\n\t\"coral\": [255, 127, 80],\r\n\t\"cornflowerblue\": [100, 149, 237],\r\n\t\"cornsilk\": [255, 248, 220],\r\n\t\"crimson\": [220, 20, 60],\r\n\t\"cyan\": [0, 255, 255],\r\n\t\"darkblue\": [0, 0, 139],\r\n\t\"darkcyan\": [0, 139, 139],\r\n\t\"darkgoldenrod\": [184, 134, 11],\r\n\t\"darkgray\": [169, 169, 169],\r\n\t\"darkgreen\": [0, 100, 0],\r\n\t\"darkgrey\": [169, 169, 169],\r\n\t\"darkkhaki\": [189, 183, 107],\r\n\t\"darkmagenta\": [139, 0, 139],\r\n\t\"darkolivegreen\": [85, 107, 47],\r\n\t\"darkorange\": [255, 140, 0],\r\n\t\"darkorchid\": [153, 50, 204],\r\n\t\"darkred\": [139, 0, 0],\r\n\t\"darksalmon\": [233, 150, 122],\r\n\t\"darkseagreen\": [143, 188, 143],\r\n\t\"darkslateblue\": [72, 61, 139],\r\n\t\"darkslategray\": [47, 79, 79],\r\n\t\"darkslategrey\": [47, 79, 79],\r\n\t\"darkturquoise\": [0, 206, 209],\r\n\t\"darkviolet\": [148, 0, 211],\r\n\t\"deeppink\": [255, 20, 147],\r\n\t\"deepskyblue\": [0, 191, 255],\r\n\t\"dimgray\": [105, 105, 105],\r\n\t\"dimgrey\": [105, 105, 105],\r\n\t\"dodgerblue\": [30, 144, 255],\r\n\t\"firebrick\": [178, 34, 34],\r\n\t\"floralwhite\": [255, 250, 240],\r\n\t\"forestgreen\": [34, 139, 34],\r\n\t\"fuchsia\": [255, 0, 255],\r\n\t\"gainsboro\": [220, 220, 220],\r\n\t\"ghostwhite\": [248, 248, 255],\r\n\t\"gold\": [255, 215, 0],\r\n\t\"goldenrod\": [218, 165, 32],\r\n\t\"gray\": [128, 128, 128],\r\n\t\"green\": [0, 128, 0],\r\n\t\"greenyellow\": [173, 255, 47],\r\n\t\"grey\": [128, 128, 128],\r\n\t\"honeydew\": [240, 255, 240],\r\n\t\"hotpink\": [255, 105, 180],\r\n\t\"indianred\": [205, 92, 92],\r\n\t\"indigo\": [75, 0, 130],\r\n\t\"ivory\": [255, 255, 240],\r\n\t\"khaki\": [240, 230, 140],\r\n\t\"lavender\": [230, 230, 250],\r\n\t\"lavenderblush\": [255, 240, 245],\r\n\t\"lawngreen\": [124, 252, 0],\r\n\t\"lemonchiffon\": [255, 250, 205],\r\n\t\"lightblue\": [173, 216, 230],\r\n\t\"lightcoral\": [240, 128, 128],\r\n\t\"lightcyan\": [224, 255, 255],\r\n\t\"lightgoldenrodyellow\": [250, 250, 210],\r\n\t\"lightgray\": [211, 211, 211],\r\n\t\"lightgreen\": [144, 238, 144],\r\n\t\"lightgrey\": [211, 211, 211],\r\n\t\"lightpink\": [255, 182, 193],\r\n\t\"lightsalmon\": [255, 160, 122],\r\n\t\"lightseagreen\": [32, 178, 170],\r\n\t\"lightskyblue\": [135, 206, 250],\r\n\t\"lightslategray\": [119, 136, 153],\r\n\t\"lightslategrey\": [119, 136, 153],\r\n\t\"lightsteelblue\": [176, 196, 222],\r\n\t\"lightyellow\": [255, 255, 224],\r\n\t\"lime\": [0, 255, 0],\r\n\t\"limegreen\": [50, 205, 50],\r\n\t\"linen\": [250, 240, 230],\r\n\t\"magenta\": [255, 0, 255],\r\n\t\"maroon\": [128, 0, 0],\r\n\t\"mediumaquamarine\": [102, 205, 170],\r\n\t\"mediumblue\": [0, 0, 205],\r\n\t\"mediumorchid\": [186, 85, 211],\r\n\t\"mediumpurple\": [147, 112, 219],\r\n\t\"mediumseagreen\": [60, 179, 113],\r\n\t\"mediumslateblue\": [123, 104, 238],\r\n\t\"mediumspringgreen\": [0, 250, 154],\r\n\t\"mediumturquoise\": [72, 209, 204],\r\n\t\"mediumvioletred\": [199, 21, 133],\r\n\t\"midnightblue\": [25, 25, 112],\r\n\t\"mintcream\": [245, 255, 250],\r\n\t\"mistyrose\": [255, 228, 225],\r\n\t\"moccasin\": [255, 228, 181],\r\n\t\"navajowhite\": [255, 222, 173],\r\n\t\"navy\": [0, 0, 128],\r\n\t\"oldlace\": [253, 245, 230],\r\n\t\"olive\": [128, 128, 0],\r\n\t\"olivedrab\": [107, 142, 35],\r\n\t\"orange\": [255, 165, 0],\r\n\t\"orangered\": [255, 69, 0],\r\n\t\"orchid\": [218, 112, 214],\r\n\t\"palegoldenrod\": [238, 232, 170],\r\n\t\"palegreen\": [152, 251, 152],\r\n\t\"paleturquoise\": [175, 238, 238],\r\n\t\"palevioletred\": [219, 112, 147],\r\n\t\"papayawhip\": [255, 239, 213],\r\n\t\"peachpuff\": [255, 218, 185],\r\n\t\"peru\": [205, 133, 63],\r\n\t\"pink\": [255, 192, 203],\r\n\t\"plum\": [221, 160, 221],\r\n\t\"powderblue\": [176, 224, 230],\r\n\t\"purple\": [128, 0, 128],\r\n\t\"rebeccapurple\": [102, 51, 153],\r\n\t\"red\": [255, 0, 0],\r\n\t\"rosybrown\": [188, 143, 143],\r\n\t\"royalblue\": [65, 105, 225],\r\n\t\"saddlebrown\": [139, 69, 19],\r\n\t\"salmon\": [250, 128, 114],\r\n\t\"sandybrown\": [244, 164, 96],\r\n\t\"seagreen\": [46, 139, 87],\r\n\t\"seashell\": [255, 245, 238],\r\n\t\"sienna\": [160, 82, 45],\r\n\t\"silver\": [192, 192, 192],\r\n\t\"skyblue\": [135, 206, 235],\r\n\t\"slateblue\": [106, 90, 205],\r\n\t\"slategray\": [112, 128, 144],\r\n\t\"slategrey\": [112, 128, 144],\r\n\t\"snow\": [255, 250, 250],\r\n\t\"springgreen\": [0, 255, 127],\r\n\t\"steelblue\": [70, 130, 180],\r\n\t\"tan\": [210, 180, 140],\r\n\t\"teal\": [0, 128, 128],\r\n\t\"thistle\": [216, 191, 216],\r\n\t\"tomato\": [255, 99, 71],\r\n\t\"turquoise\": [64, 224, 208],\r\n\t\"violet\": [238, 130, 238],\r\n\t\"wheat\": [245, 222, 179],\r\n\t\"white\": [255, 255, 255],\r\n\t\"whitesmoke\": [245, 245, 245],\r\n\t\"yellow\": [255, 255, 0],\r\n\t\"yellowgreen\": [154, 205, 50]\r\n};\r\n","'use strict';\n\nvar isArrayish = require('is-arrayish');\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\nvar swizzle = module.exports = function swizzle(args) {\n\tvar results = [];\n\n\tfor (var i = 0, len = args.length; i < len; i++) {\n\t\tvar arg = args[i];\n\n\t\tif (isArrayish(arg)) {\n\t\t\t// http://jsperf.com/javascript-array-concat-vs-push/98\n\t\t\tresults = concat.call(results, slice.call(arg));\n\t\t} else {\n\t\t\tresults.push(arg);\n\t\t}\n\t}\n\n\treturn results;\n};\n\nswizzle.wrap = function (fn) {\n\treturn function () {\n\t\treturn fn(swizzle(arguments));\n\t};\n};\n","module.exports = function isArrayish(obj) {\n\tif (!obj || typeof obj === 'string') {\n\t\treturn false;\n\t}\n\n\treturn obj instanceof Array || Array.isArray(obj) ||\n\t\t(obj.length >= 0 && (obj.splice instanceof Function ||\n\t\t\t(Object.getOwnPropertyDescriptor(obj, (obj.length - 1)) && obj.constructor.name !== 'String')));\n};\n","/* MIT license */\nvar colorNames = require('color-name');\nvar swizzle = require('simple-swizzle');\nvar hasOwnProperty = Object.hasOwnProperty;\n\nvar reverseNames = Object.create(null);\n\n// create a list of reverse color names\nfor (var name in colorNames) {\n\tif (hasOwnProperty.call(colorNames, name)) {\n\t\treverseNames[colorNames[name]] = name;\n\t}\n}\n\nvar cs = module.exports = {\n\tto: {},\n\tget: {}\n};\n\ncs.get = function (string) {\n\tvar prefix = string.substring(0, 3).toLowerCase();\n\tvar val;\n\tvar model;\n\tswitch (prefix) {\n\t\tcase 'hsl':\n\t\t\tval = cs.get.hsl(string);\n\t\t\tmodel = 'hsl';\n\t\t\tbreak;\n\t\tcase 'hwb':\n\t\t\tval = cs.get.hwb(string);\n\t\t\tmodel = 'hwb';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tval = cs.get.rgb(string);\n\t\t\tmodel = 'rgb';\n\t\t\tbreak;\n\t}\n\n\tif (!val) {\n\t\treturn null;\n\t}\n\n\treturn {model: model, value: val};\n};\n\ncs.get.rgb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar abbr = /^#([a-f0-9]{3,4})$/i;\n\tvar hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n\tvar rgba = /^rgba?\\(\\s*([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)(?=[\\s,])\\s*(?:,\\s*)?([+-]?\\d+)\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/;\n\tvar per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*,?\\s*([+-]?[\\d\\.]+)\\%\\s*(?:[,|\\/]\\s*([+-]?[\\d\\.]+)(%?)\\s*)?\\)$/;\n\tvar keyword = /^(\\w+)$/;\n\n\tvar rgb = [0, 0, 0, 1];\n\tvar match;\n\tvar i;\n\tvar hexAlpha;\n\n\tif (match = string.match(hex)) {\n\t\thexAlpha = match[2];\n\t\tmatch = match[1];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\t// https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n\t\t\tvar i2 = i * 2;\n\t\t\trgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(abbr)) {\n\t\tmatch = match[1];\n\t\thexAlpha = match[3];\n\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i] + match[i], 16);\n\t\t}\n\n\t\tif (hexAlpha) {\n\t\t\trgb[3] = parseInt(hexAlpha + hexAlpha, 16) / 255;\n\t\t}\n\t} else if (match = string.match(rgba)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = parseInt(match[i + 1], 0);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\tif (match[5]) {\n\t\t\t\trgb[3] = parseFloat(match[4]) * 0.01;\n\t\t\t} else {\n\t\t\t\trgb[3] = parseFloat(match[4]);\n\t\t\t}\n\t\t}\n\t} else if (match = string.match(per)) {\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\trgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n\t\t}\n\n\t\tif (match[4]) {\n\t\t\tif (match[5]) {\n\t\t\t\trgb[3] = parseFloat(match[4]) * 0.01;\n\t\t\t} else {\n\t\t\t\trgb[3] = parseFloat(match[4]);\n\t\t\t}\n\t\t}\n\t} else if (match = string.match(keyword)) {\n\t\tif (match[1] === 'transparent') {\n\t\t\treturn [0, 0, 0, 0];\n\t\t}\n\n\t\tif (!hasOwnProperty.call(colorNames, match[1])) {\n\t\t\treturn null;\n\t\t}\n\n\t\trgb = colorNames[match[1]];\n\t\trgb[3] = 1;\n\n\t\treturn rgb;\n\t} else {\n\t\treturn null;\n\t}\n\n\tfor (i = 0; i < 3; i++) {\n\t\trgb[i] = clamp(rgb[i], 0, 255);\n\t}\n\trgb[3] = clamp(rgb[3], 0, 1);\n\n\treturn rgb;\n};\n\ncs.get.hsl = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hsl = /^hsla?\\(\\s*([+-]?(?:\\d{0,3}\\.)?\\d+)(?:deg)?\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*,?\\s*([+-]?[\\d\\.]+)%\\s*(?:[,|\\/]\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/;\n\tvar match = string.match(hsl);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar s = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar l = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\n\t\treturn [h, s, l, a];\n\t}\n\n\treturn null;\n};\n\ncs.get.hwb = function (string) {\n\tif (!string) {\n\t\treturn null;\n\t}\n\n\tvar hwb = /^hwb\\(\\s*([+-]?\\d{0,3}(?:\\.\\d+)?)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?(?=\\.\\d|\\d)(?:0|[1-9]\\d*)?(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)\\s*)?\\)$/;\n\tvar match = string.match(hwb);\n\n\tif (match) {\n\t\tvar alpha = parseFloat(match[4]);\n\t\tvar h = ((parseFloat(match[1]) % 360) + 360) % 360;\n\t\tvar w = clamp(parseFloat(match[2]), 0, 100);\n\t\tvar b = clamp(parseFloat(match[3]), 0, 100);\n\t\tvar a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n\t\treturn [h, w, b, a];\n\t}\n\n\treturn null;\n};\n\ncs.to.hex = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn (\n\t\t'#' +\n\t\thexDouble(rgba[0]) +\n\t\thexDouble(rgba[1]) +\n\t\thexDouble(rgba[2]) +\n\t\t(rgba[3] < 1\n\t\t\t? (hexDouble(Math.round(rgba[3] * 255)))\n\t\t\t: '')\n\t);\n};\n\ncs.to.rgb = function () {\n\tvar rgba = swizzle(arguments);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')'\n\t\t: 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';\n};\n\ncs.to.rgb.percent = function () {\n\tvar rgba = swizzle(arguments);\n\n\tvar r = Math.round(rgba[0] / 255 * 100);\n\tvar g = Math.round(rgba[1] / 255 * 100);\n\tvar b = Math.round(rgba[2] / 255 * 100);\n\n\treturn rgba.length < 4 || rgba[3] === 1\n\t\t? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)'\n\t\t: 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';\n};\n\ncs.to.hsl = function () {\n\tvar hsla = swizzle(arguments);\n\treturn hsla.length < 4 || hsla[3] === 1\n\t\t? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)'\n\t\t: 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';\n};\n\n// hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\ncs.to.hwb = function () {\n\tvar hwba = swizzle(arguments);\n\n\tvar a = '';\n\tif (hwba.length >= 4 && hwba[3] !== 1) {\n\t\ta = ', ' + hwba[3];\n\t}\n\n\treturn 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';\n};\n\ncs.to.keyword = function (rgb) {\n\treturn reverseNames[rgb.slice(0, 3)];\n};\n\n// helpers\nfunction clamp(num, min, max) {\n\treturn Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n\tvar str = Math.round(num).toString(16).toUpperCase();\n\treturn (str.length < 2) ? '0' + str : str;\n}\n","/* MIT license */\n/* eslint-disable no-mixed-operators */\nconst cssKeywords = require('color-name');\n\n// NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\nconst reverseKeywords = {};\nfor (const key of Object.keys(cssKeywords)) {\n\treverseKeywords[cssKeywords[key]] = key;\n}\n\nconst convert = {\n\trgb: {channels: 3, labels: 'rgb'},\n\thsl: {channels: 3, labels: 'hsl'},\n\thsv: {channels: 3, labels: 'hsv'},\n\thwb: {channels: 3, labels: 'hwb'},\n\tcmyk: {channels: 4, labels: 'cmyk'},\n\txyz: {channels: 3, labels: 'xyz'},\n\tlab: {channels: 3, labels: 'lab'},\n\tlch: {channels: 3, labels: 'lch'},\n\thex: {channels: 1, labels: ['hex']},\n\tkeyword: {channels: 1, labels: ['keyword']},\n\tansi16: {channels: 1, labels: ['ansi16']},\n\tansi256: {channels: 1, labels: ['ansi256']},\n\thcg: {channels: 3, labels: ['h', 'c', 'g']},\n\tapple: {channels: 3, labels: ['r16', 'g16', 'b16']},\n\tgray: {channels: 1, labels: ['gray']}\n};\n\nmodule.exports = convert;\n\n// Hide .channels and .labels properties\nfor (const model of Object.keys(convert)) {\n\tif (!('channels' in convert[model])) {\n\t\tthrow new Error('missing channels property: ' + model);\n\t}\n\n\tif (!('labels' in convert[model])) {\n\t\tthrow new Error('missing channel labels property: ' + model);\n\t}\n\n\tif (convert[model].labels.length !== convert[model].channels) {\n\t\tthrow new Error('channel and label counts mismatch: ' + model);\n\t}\n\n\tconst {channels, labels} = convert[model];\n\tdelete convert[model].channels;\n\tdelete convert[model].labels;\n\tObject.defineProperty(convert[model], 'channels', {value: channels});\n\tObject.defineProperty(convert[model], 'labels', {value: labels});\n}\n\nconvert.rgb.hsl = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst min = Math.min(r, g, b);\n\tconst max = Math.max(r, g, b);\n\tconst delta = max - min;\n\tlet h;\n\tlet s;\n\n\tif (max === min) {\n\t\th = 0;\n\t} else if (r === max) {\n\t\th = (g - b) / delta;\n\t} else if (g === max) {\n\t\th = 2 + (b - r) / delta;\n\t} else if (b === max) {\n\t\th = 4 + (r - g) / delta;\n\t}\n\n\th = Math.min(h * 60, 360);\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tconst l = (min + max) / 2;\n\n\tif (max === min) {\n\t\ts = 0;\n\t} else if (l <= 0.5) {\n\t\ts = delta / (max + min);\n\t} else {\n\t\ts = delta / (2 - max - min);\n\t}\n\n\treturn [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n\tlet rdif;\n\tlet gdif;\n\tlet bdif;\n\tlet h;\n\tlet s;\n\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst v = Math.max(r, g, b);\n\tconst diff = v - Math.min(r, g, b);\n\tconst diffc = function (c) {\n\t\treturn (v - c) / 6 / diff + 1 / 2;\n\t};\n\n\tif (diff === 0) {\n\t\th = 0;\n\t\ts = 0;\n\t} else {\n\t\ts = diff / v;\n\t\trdif = diffc(r);\n\t\tgdif = diffc(g);\n\t\tbdif = diffc(b);\n\n\t\tif (r === v) {\n\t\t\th = bdif - gdif;\n\t\t} else if (g === v) {\n\t\t\th = (1 / 3) + rdif - bdif;\n\t\t} else if (b === v) {\n\t\t\th = (2 / 3) + gdif - rdif;\n\t\t}\n\n\t\tif (h < 0) {\n\t\t\th += 1;\n\t\t} else if (h > 1) {\n\t\t\th -= 1;\n\t\t}\n\t}\n\n\treturn [\n\t\th * 360,\n\t\ts * 100,\n\t\tv * 100\n\t];\n};\n\nconvert.rgb.hwb = function (rgb) {\n\tconst r = rgb[0];\n\tconst g = rgb[1];\n\tlet b = rgb[2];\n\tconst h = convert.rgb.hsl(rgb)[0];\n\tconst w = 1 / 255 * Math.min(r, Math.min(g, b));\n\n\tb = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n\n\treturn [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\n\tconst k = Math.min(1 - r, 1 - g, 1 - b);\n\tconst c = (1 - r - k) / (1 - k) || 0;\n\tconst m = (1 - g - k) / (1 - k) || 0;\n\tconst y = (1 - b - k) / (1 - k) || 0;\n\n\treturn [c * 100, m * 100, y * 100, k * 100];\n};\n\nfunction comparativeDistance(x, y) {\n\t/*\n\t\tSee https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n\t*/\n\treturn (\n\t\t((x[0] - y[0]) ** 2) +\n\t\t((x[1] - y[1]) ** 2) +\n\t\t((x[2] - y[2]) ** 2)\n\t);\n}\n\nconvert.rgb.keyword = function (rgb) {\n\tconst reversed = reverseKeywords[rgb];\n\tif (reversed) {\n\t\treturn reversed;\n\t}\n\n\tlet currentClosestDistance = Infinity;\n\tlet currentClosestKeyword;\n\n\tfor (const keyword of Object.keys(cssKeywords)) {\n\t\tconst value = cssKeywords[keyword];\n\n\t\t// Compute comparative distance\n\t\tconst distance = comparativeDistance(rgb, value);\n\n\t\t// Check if its less, if so set as closest\n\t\tif (distance < currentClosestDistance) {\n\t\t\tcurrentClosestDistance = distance;\n\t\t\tcurrentClosestKeyword = keyword;\n\t\t}\n\t}\n\n\treturn currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n\treturn cssKeywords[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n\tlet r = rgb[0] / 255;\n\tlet g = rgb[1] / 255;\n\tlet b = rgb[2] / 255;\n\n\t// Assume sRGB\n\tr = r > 0.04045 ? (((r + 0.055) / 1.055) ** 2.4) : (r / 12.92);\n\tg = g > 0.04045 ? (((g + 0.055) / 1.055) ** 2.4) : (g / 12.92);\n\tb = b > 0.04045 ? (((b + 0.055) / 1.055) ** 2.4) : (b / 12.92);\n\n\tconst x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);\n\tconst y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);\n\tconst z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);\n\n\treturn [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n\tconst xyz = convert.rgb.xyz(rgb);\n\tlet x = xyz[0];\n\tlet y = xyz[1];\n\tlet z = xyz[2];\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? (x ** (1 / 3)) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? (y ** (1 / 3)) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? (z ** (1 / 3)) : (7.787 * z) + (16 / 116);\n\n\tconst l = (116 * y) - 16;\n\tconst a = 500 * (x - y);\n\tconst b = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n\tconst h = hsl[0] / 360;\n\tconst s = hsl[1] / 100;\n\tconst l = hsl[2] / 100;\n\tlet t2;\n\tlet t3;\n\tlet val;\n\n\tif (s === 0) {\n\t\tval = l * 255;\n\t\treturn [val, val, val];\n\t}\n\n\tif (l < 0.5) {\n\t\tt2 = l * (1 + s);\n\t} else {\n\t\tt2 = l + s - l * s;\n\t}\n\n\tconst t1 = 2 * l - t2;\n\n\tconst rgb = [0, 0, 0];\n\tfor (let i = 0; i < 3; i++) {\n\t\tt3 = h + 1 / 3 * -(i - 1);\n\t\tif (t3 < 0) {\n\t\t\tt3++;\n\t\t}\n\n\t\tif (t3 > 1) {\n\t\t\tt3--;\n\t\t}\n\n\t\tif (6 * t3 < 1) {\n\t\t\tval = t1 + (t2 - t1) * 6 * t3;\n\t\t} else if (2 * t3 < 1) {\n\t\t\tval = t2;\n\t\t} else if (3 * t3 < 2) {\n\t\t\tval = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n\t\t} else {\n\t\t\tval = t1;\n\t\t}\n\n\t\trgb[i] = val * 255;\n\t}\n\n\treturn rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n\tconst h = hsl[0];\n\tlet s = hsl[1] / 100;\n\tlet l = hsl[2] / 100;\n\tlet smin = s;\n\tconst lmin = Math.max(l, 0.01);\n\n\tl *= 2;\n\ts *= (l <= 1) ? l : 2 - l;\n\tsmin *= lmin <= 1 ? lmin : 2 - lmin;\n\tconst v = (l + s) / 2;\n\tconst sv = l === 0 ? (2 * smin) / (lmin + smin) : (2 * s) / (l + s);\n\n\treturn [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n\tconst h = hsv[0] / 60;\n\tconst s = hsv[1] / 100;\n\tlet v = hsv[2] / 100;\n\tconst hi = Math.floor(h) % 6;\n\n\tconst f = h - Math.floor(h);\n\tconst p = 255 * v * (1 - s);\n\tconst q = 255 * v * (1 - (s * f));\n\tconst t = 255 * v * (1 - (s * (1 - f)));\n\tv *= 255;\n\n\tswitch (hi) {\n\t\tcase 0:\n\t\t\treturn [v, t, p];\n\t\tcase 1:\n\t\t\treturn [q, v, p];\n\t\tcase 2:\n\t\t\treturn [p, v, t];\n\t\tcase 3:\n\t\t\treturn [p, q, v];\n\t\tcase 4:\n\t\t\treturn [t, p, v];\n\t\tcase 5:\n\t\t\treturn [v, p, q];\n\t}\n};\n\nconvert.hsv.hsl = function (hsv) {\n\tconst h = hsv[0];\n\tconst s = hsv[1] / 100;\n\tconst v = hsv[2] / 100;\n\tconst vmin = Math.max(v, 0.01);\n\tlet sl;\n\tlet l;\n\n\tl = (2 - s) * v;\n\tconst lmin = (2 - s) * vmin;\n\tsl = s * vmin;\n\tsl /= (lmin <= 1) ? lmin : 2 - lmin;\n\tsl = sl || 0;\n\tl /= 2;\n\n\treturn [h, sl * 100, l * 100];\n};\n\n// http://dev.w3.org/csswg/css-color/#hwb-to-rgb\nconvert.hwb.rgb = function (hwb) {\n\tconst h = hwb[0] / 360;\n\tlet wh = hwb[1] / 100;\n\tlet bl = hwb[2] / 100;\n\tconst ratio = wh + bl;\n\tlet f;\n\n\t// Wh + bl cant be > 1\n\tif (ratio > 1) {\n\t\twh /= ratio;\n\t\tbl /= ratio;\n\t}\n\n\tconst i = Math.floor(6 * h);\n\tconst v = 1 - bl;\n\tf = 6 * h - i;\n\n\tif ((i & 0x01) !== 0) {\n\t\tf = 1 - f;\n\t}\n\n\tconst n = wh + f * (v - wh); // Linear interpolation\n\n\tlet r;\n\tlet g;\n\tlet b;\n\t/* eslint-disable max-statements-per-line,no-multi-spaces */\n\tswitch (i) {\n\t\tdefault:\n\t\tcase 6:\n\t\tcase 0: r = v;  g = n;  b = wh; break;\n\t\tcase 1: r = n;  g = v;  b = wh; break;\n\t\tcase 2: r = wh; g = v;  b = n; break;\n\t\tcase 3: r = wh; g = n;  b = v; break;\n\t\tcase 4: r = n;  g = wh; b = v; break;\n\t\tcase 5: r = v;  g = wh; b = n; break;\n\t}\n\t/* eslint-enable max-statements-per-line,no-multi-spaces */\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n\tconst c = cmyk[0] / 100;\n\tconst m = cmyk[1] / 100;\n\tconst y = cmyk[2] / 100;\n\tconst k = cmyk[3] / 100;\n\n\tconst r = 1 - Math.min(1, c * (1 - k) + k);\n\tconst g = 1 - Math.min(1, m * (1 - k) + k);\n\tconst b = 1 - Math.min(1, y * (1 - k) + k);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n\tconst x = xyz[0] / 100;\n\tconst y = xyz[1] / 100;\n\tconst z = xyz[2] / 100;\n\tlet r;\n\tlet g;\n\tlet b;\n\n\tr = (x * 3.2406) + (y * -1.5372) + (z * -0.4986);\n\tg = (x * -0.9689) + (y * 1.8758) + (z * 0.0415);\n\tb = (x * 0.0557) + (y * -0.2040) + (z * 1.0570);\n\n\t// Assume sRGB\n\tr = r > 0.0031308\n\t\t? ((1.055 * (r ** (1.0 / 2.4))) - 0.055)\n\t\t: r * 12.92;\n\n\tg = g > 0.0031308\n\t\t? ((1.055 * (g ** (1.0 / 2.4))) - 0.055)\n\t\t: g * 12.92;\n\n\tb = b > 0.0031308\n\t\t? ((1.055 * (b ** (1.0 / 2.4))) - 0.055)\n\t\t: b * 12.92;\n\n\tr = Math.min(Math.max(0, r), 1);\n\tg = Math.min(Math.max(0, g), 1);\n\tb = Math.min(Math.max(0, b), 1);\n\n\treturn [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n\tlet x = xyz[0];\n\tlet y = xyz[1];\n\tlet z = xyz[2];\n\n\tx /= 95.047;\n\ty /= 100;\n\tz /= 108.883;\n\n\tx = x > 0.008856 ? (x ** (1 / 3)) : (7.787 * x) + (16 / 116);\n\ty = y > 0.008856 ? (y ** (1 / 3)) : (7.787 * y) + (16 / 116);\n\tz = z > 0.008856 ? (z ** (1 / 3)) : (7.787 * z) + (16 / 116);\n\n\tconst l = (116 * y) - 16;\n\tconst a = 500 * (x - y);\n\tconst b = 200 * (y - z);\n\n\treturn [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n\tconst l = lab[0];\n\tconst a = lab[1];\n\tconst b = lab[2];\n\tlet x;\n\tlet y;\n\tlet z;\n\n\ty = (l + 16) / 116;\n\tx = a / 500 + y;\n\tz = y - b / 200;\n\n\tconst y2 = y ** 3;\n\tconst x2 = x ** 3;\n\tconst z2 = z ** 3;\n\ty = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n\tx = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n\tz = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n\n\tx *= 95.047;\n\ty *= 100;\n\tz *= 108.883;\n\n\treturn [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n\tconst l = lab[0];\n\tconst a = lab[1];\n\tconst b = lab[2];\n\tlet h;\n\n\tconst hr = Math.atan2(b, a);\n\th = hr * 360 / 2 / Math.PI;\n\n\tif (h < 0) {\n\t\th += 360;\n\t}\n\n\tconst c = Math.sqrt(a * a + b * b);\n\n\treturn [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n\tconst l = lch[0];\n\tconst c = lch[1];\n\tconst h = lch[2];\n\n\tconst hr = h / 360 * 2 * Math.PI;\n\tconst a = c * Math.cos(hr);\n\tconst b = c * Math.sin(hr);\n\n\treturn [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args, saturation = null) {\n\tconst [r, g, b] = args;\n\tlet value = saturation === null ? convert.rgb.hsv(args)[2] : saturation; // Hsv -> ansi16 optimization\n\n\tvalue = Math.round(value / 50);\n\n\tif (value === 0) {\n\t\treturn 30;\n\t}\n\n\tlet ansi = 30\n\t\t+ ((Math.round(b / 255) << 2)\n\t\t| (Math.round(g / 255) << 1)\n\t\t| Math.round(r / 255));\n\n\tif (value === 2) {\n\t\tansi += 60;\n\t}\n\n\treturn ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n\t// Optimization here; we already know the value and don't need to get\n\t// it converted for us.\n\treturn convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n\tconst r = args[0];\n\tconst g = args[1];\n\tconst b = args[2];\n\n\t// We use the extended greyscale palette here, with the exception of\n\t// black and white. normal palette only has 4 greyscale shades.\n\tif (r === g && g === b) {\n\t\tif (r < 8) {\n\t\t\treturn 16;\n\t\t}\n\n\t\tif (r > 248) {\n\t\t\treturn 231;\n\t\t}\n\n\t\treturn Math.round(((r - 8) / 247) * 24) + 232;\n\t}\n\n\tconst ansi = 16\n\t\t+ (36 * Math.round(r / 255 * 5))\n\t\t+ (6 * Math.round(g / 255 * 5))\n\t\t+ Math.round(b / 255 * 5);\n\n\treturn ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n\tlet color = args % 10;\n\n\t// Handle greyscale\n\tif (color === 0 || color === 7) {\n\t\tif (args > 50) {\n\t\t\tcolor += 3.5;\n\t\t}\n\n\t\tcolor = color / 10.5 * 255;\n\n\t\treturn [color, color, color];\n\t}\n\n\tconst mult = (~~(args > 50) + 1) * 0.5;\n\tconst r = ((color & 1) * mult) * 255;\n\tconst g = (((color >> 1) & 1) * mult) * 255;\n\tconst b = (((color >> 2) & 1) * mult) * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n\t// Handle greyscale\n\tif (args >= 232) {\n\t\tconst c = (args - 232) * 10 + 8;\n\t\treturn [c, c, c];\n\t}\n\n\targs -= 16;\n\n\tlet rem;\n\tconst r = Math.floor(args / 36) / 5 * 255;\n\tconst g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n\tconst b = (rem % 6) / 5 * 255;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n\tconst integer = ((Math.round(args[0]) & 0xFF) << 16)\n\t\t+ ((Math.round(args[1]) & 0xFF) << 8)\n\t\t+ (Math.round(args[2]) & 0xFF);\n\n\tconst string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n\tconst match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\tif (!match) {\n\t\treturn [0, 0, 0];\n\t}\n\n\tlet colorString = match[0];\n\n\tif (match[0].length === 3) {\n\t\tcolorString = colorString.split('').map(char => {\n\t\t\treturn char + char;\n\t\t}).join('');\n\t}\n\n\tconst integer = parseInt(colorString, 16);\n\tconst r = (integer >> 16) & 0xFF;\n\tconst g = (integer >> 8) & 0xFF;\n\tconst b = integer & 0xFF;\n\n\treturn [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n\tconst r = rgb[0] / 255;\n\tconst g = rgb[1] / 255;\n\tconst b = rgb[2] / 255;\n\tconst max = Math.max(Math.max(r, g), b);\n\tconst min = Math.min(Math.min(r, g), b);\n\tconst chroma = (max - min);\n\tlet grayscale;\n\tlet hue;\n\n\tif (chroma < 1) {\n\t\tgrayscale = min / (1 - chroma);\n\t} else {\n\t\tgrayscale = 0;\n\t}\n\n\tif (chroma <= 0) {\n\t\thue = 0;\n\t} else\n\tif (max === r) {\n\t\thue = ((g - b) / chroma) % 6;\n\t} else\n\tif (max === g) {\n\t\thue = 2 + (b - r) / chroma;\n\t} else {\n\t\thue = 4 + (r - g) / chroma;\n\t}\n\n\thue /= 6;\n\thue %= 1;\n\n\treturn [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n\tconst s = hsl[1] / 100;\n\tconst l = hsl[2] / 100;\n\n\tconst c = l < 0.5 ? (2.0 * s * l) : (2.0 * s * (1.0 - l));\n\n\tlet f = 0;\n\tif (c < 1.0) {\n\t\tf = (l - 0.5 * c) / (1.0 - c);\n\t}\n\n\treturn [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n\tconst s = hsv[1] / 100;\n\tconst v = hsv[2] / 100;\n\n\tconst c = s * v;\n\tlet f = 0;\n\n\tif (c < 1.0) {\n\t\tf = (v - c) / (1 - c);\n\t}\n\n\treturn [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n\tconst h = hcg[0] / 360;\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tif (c === 0.0) {\n\t\treturn [g * 255, g * 255, g * 255];\n\t}\n\n\tconst pure = [0, 0, 0];\n\tconst hi = (h % 1) * 6;\n\tconst v = hi % 1;\n\tconst w = 1 - v;\n\tlet mg = 0;\n\n\t/* eslint-disable max-statements-per-line */\n\tswitch (Math.floor(hi)) {\n\t\tcase 0:\n\t\t\tpure[0] = 1; pure[1] = v; pure[2] = 0; break;\n\t\tcase 1:\n\t\t\tpure[0] = w; pure[1] = 1; pure[2] = 0; break;\n\t\tcase 2:\n\t\t\tpure[0] = 0; pure[1] = 1; pure[2] = v; break;\n\t\tcase 3:\n\t\t\tpure[0] = 0; pure[1] = w; pure[2] = 1; break;\n\t\tcase 4:\n\t\t\tpure[0] = v; pure[1] = 0; pure[2] = 1; break;\n\t\tdefault:\n\t\t\tpure[0] = 1; pure[1] = 0; pure[2] = w;\n\t}\n\t/* eslint-enable max-statements-per-line */\n\n\tmg = (1.0 - c) * g;\n\n\treturn [\n\t\t(c * pure[0] + mg) * 255,\n\t\t(c * pure[1] + mg) * 255,\n\t\t(c * pure[2] + mg) * 255\n\t];\n};\n\nconvert.hcg.hsv = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tconst v = c + g * (1.0 - c);\n\tlet f = 0;\n\n\tif (v > 0.0) {\n\t\tf = c / v;\n\t}\n\n\treturn [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\n\tconst l = g * (1.0 - c) + 0.5 * c;\n\tlet s = 0;\n\n\tif (l > 0.0 && l < 0.5) {\n\t\ts = c / (2 * l);\n\t} else\n\tif (l >= 0.5 && l < 1.0) {\n\t\ts = c / (2 * (1 - l));\n\t}\n\n\treturn [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n\tconst c = hcg[1] / 100;\n\tconst g = hcg[2] / 100;\n\tconst v = c + g * (1.0 - c);\n\treturn [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n\tconst w = hwb[1] / 100;\n\tconst b = hwb[2] / 100;\n\tconst v = 1 - b;\n\tconst c = v - w;\n\tlet g = 0;\n\n\tif (c < 1) {\n\t\tg = (v - c) / (1 - c);\n\t}\n\n\treturn [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n\treturn [(apple[0] / 65535) * 255, (apple[1] / 65535) * 255, (apple[2] / 65535) * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n\treturn [(rgb[0] / 255) * 65535, (rgb[1] / 255) * 65535, (rgb[2] / 255) * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n\treturn [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = function (args) {\n\treturn [0, 0, args[0]];\n};\n\nconvert.gray.hsv = convert.gray.hsl;\n\nconvert.gray.hwb = function (gray) {\n\treturn [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n\treturn [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n\treturn [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n\tconst val = Math.round(gray[0] / 100 * 255) & 0xFF;\n\tconst integer = (val << 16) + (val << 8) + val;\n\n\tconst string = integer.toString(16).toUpperCase();\n\treturn '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n\tconst val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n\treturn [val / 255 * 100];\n};\n","const conversions = require('./conversions');\n\n/*\n\tThis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\nfunction buildGraph() {\n\tconst graph = {};\n\t// https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\tconst models = Object.keys(conversions);\n\n\tfor (let len = models.length, i = 0; i < len; i++) {\n\t\tgraph[models[i]] = {\n\t\t\t// http://jsperf.com/1-vs-infinity\n\t\t\t// micro-opt, but this is simple.\n\t\t\tdistance: -1,\n\t\t\tparent: null\n\t\t};\n\t}\n\n\treturn graph;\n}\n\n// https://en.wikipedia.org/wiki/Breadth-first_search\nfunction deriveBFS(fromModel) {\n\tconst graph = buildGraph();\n\tconst queue = [fromModel]; // Unshift -> queue -> pop\n\n\tgraph[fromModel].distance = 0;\n\n\twhile (queue.length) {\n\t\tconst current = queue.pop();\n\t\tconst adjacents = Object.keys(conversions[current]);\n\n\t\tfor (let len = adjacents.length, i = 0; i < len; i++) {\n\t\t\tconst adjacent = adjacents[i];\n\t\t\tconst node = graph[adjacent];\n\n\t\t\tif (node.distance === -1) {\n\t\t\t\tnode.distance = graph[current].distance + 1;\n\t\t\t\tnode.parent = current;\n\t\t\t\tqueue.unshift(adjacent);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn graph;\n}\n\nfunction link(from, to) {\n\treturn function (args) {\n\t\treturn to(from(args));\n\t};\n}\n\nfunction wrapConversion(toModel, graph) {\n\tconst path = [graph[toModel].parent, toModel];\n\tlet fn = conversions[graph[toModel].parent][toModel];\n\n\tlet cur = graph[toModel].parent;\n\twhile (graph[cur].parent) {\n\t\tpath.unshift(graph[cur].parent);\n\t\tfn = link(conversions[graph[cur].parent][cur], fn);\n\t\tcur = graph[cur].parent;\n\t}\n\n\tfn.conversion = path;\n\treturn fn;\n}\n\nmodule.exports = function (fromModel) {\n\tconst graph = deriveBFS(fromModel);\n\tconst conversion = {};\n\n\tconst models = Object.keys(graph);\n\tfor (let len = models.length, i = 0; i < len; i++) {\n\t\tconst toModel = models[i];\n\t\tconst node = graph[toModel];\n\n\t\tif (node.parent === null) {\n\t\t\t// No possible conversion, or this node is the source model.\n\t\t\tcontinue;\n\t\t}\n\n\t\tconversion[toModel] = wrapConversion(toModel, graph);\n\t}\n\n\treturn conversion;\n};\n\n","const conversions = require('./conversions');\nconst route = require('./route');\n\nconst convert = {};\n\nconst models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n\tconst wrappedFn = function (...args) {\n\t\tconst arg0 = args[0];\n\t\tif (arg0 === undefined || arg0 === null) {\n\t\t\treturn arg0;\n\t\t}\n\n\t\tif (arg0.length > 1) {\n\t\t\targs = arg0;\n\t\t}\n\n\t\treturn fn(args);\n\t};\n\n\t// Preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n\tconst wrappedFn = function (...args) {\n\t\tconst arg0 = args[0];\n\n\t\tif (arg0 === undefined || arg0 === null) {\n\t\t\treturn arg0;\n\t\t}\n\n\t\tif (arg0.length > 1) {\n\t\t\targs = arg0;\n\t\t}\n\n\t\tconst result = fn(args);\n\n\t\t// We're assuming the result is an array here.\n\t\t// see notice in conversions.js; don't use box types\n\t\t// in conversion functions.\n\t\tif (typeof result === 'object') {\n\t\t\tfor (let len = result.length, i = 0; i < len; i++) {\n\t\t\t\tresult[i] = Math.round(result[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t// Preserve .conversion property if there is one\n\tif ('conversion' in fn) {\n\t\twrappedFn.conversion = fn.conversion;\n\t}\n\n\treturn wrappedFn;\n}\n\nmodels.forEach(fromModel => {\n\tconvert[fromModel] = {};\n\n\tObject.defineProperty(convert[fromModel], 'channels', {value: conversions[fromModel].channels});\n\tObject.defineProperty(convert[fromModel], 'labels', {value: conversions[fromModel].labels});\n\n\tconst routes = route(fromModel);\n\tconst routeModels = Object.keys(routes);\n\n\trouteModels.forEach(toModel => {\n\t\tconst fn = routes[toModel];\n\n\t\tconvert[fromModel][toModel] = wrapRounded(fn);\n\t\tconvert[fromModel][toModel].raw = wrapRaw(fn);\n\t});\n});\n\nmodule.exports = convert;\n","const colorString = require('color-string');\nconst convert = require('color-convert');\n\nconst skippedModels = [\n\t// To be honest, I don't really feel like keyword belongs in color convert, but eh.\n\t'keyword',\n\n\t// Gray conflicts with some method names, and has its own method defined.\n\t'gray',\n\n\t// Shouldn't really be in color-convert either...\n\t'hex',\n];\n\nconst hashedModelKeys = {};\nfor (const model of Object.keys(convert)) {\n\thashedModelKeys[[...convert[model].labels].sort().join('')] = model;\n}\n\nconst limiters = {};\n\nfunction Color(object, model) {\n\tif (!(this instanceof Color)) {\n\t\treturn new Color(object, model);\n\t}\n\n\tif (model && model in skippedModels) {\n\t\tmodel = null;\n\t}\n\n\tif (model && !(model in convert)) {\n\t\tthrow new Error('Unknown model: ' + model);\n\t}\n\n\tlet i;\n\tlet channels;\n\n\tif (object == null) { // eslint-disable-line no-eq-null,eqeqeq\n\t\tthis.model = 'rgb';\n\t\tthis.color = [0, 0, 0];\n\t\tthis.valpha = 1;\n\t} else if (object instanceof Color) {\n\t\tthis.model = object.model;\n\t\tthis.color = [...object.color];\n\t\tthis.valpha = object.valpha;\n\t} else if (typeof object === 'string') {\n\t\tconst result = colorString.get(object);\n\t\tif (result === null) {\n\t\t\tthrow new Error('Unable to parse color from string: ' + object);\n\t\t}\n\n\t\tthis.model = result.model;\n\t\tchannels = convert[this.model].channels;\n\t\tthis.color = result.value.slice(0, channels);\n\t\tthis.valpha = typeof result.value[channels] === 'number' ? result.value[channels] : 1;\n\t} else if (object.length > 0) {\n\t\tthis.model = model || 'rgb';\n\t\tchannels = convert[this.model].channels;\n\t\tconst newArray = Array.prototype.slice.call(object, 0, channels);\n\t\tthis.color = zeroArray(newArray, channels);\n\t\tthis.valpha = typeof object[channels] === 'number' ? object[channels] : 1;\n\t} else if (typeof object === 'number') {\n\t\t// This is always RGB - can be converted later on.\n\t\tthis.model = 'rgb';\n\t\tthis.color = [\n\t\t\t(object >> 16) & 0xFF,\n\t\t\t(object >> 8) & 0xFF,\n\t\t\tobject & 0xFF,\n\t\t];\n\t\tthis.valpha = 1;\n\t} else {\n\t\tthis.valpha = 1;\n\n\t\tconst keys = Object.keys(object);\n\t\tif ('alpha' in object) {\n\t\t\tkeys.splice(keys.indexOf('alpha'), 1);\n\t\t\tthis.valpha = typeof object.alpha === 'number' ? object.alpha : 0;\n\t\t}\n\n\t\tconst hashedKeys = keys.sort().join('');\n\t\tif (!(hashedKeys in hashedModelKeys)) {\n\t\t\tthrow new Error('Unable to parse color from object: ' + JSON.stringify(object));\n\t\t}\n\n\t\tthis.model = hashedModelKeys[hashedKeys];\n\n\t\tconst {labels} = convert[this.model];\n\t\tconst color = [];\n\t\tfor (i = 0; i < labels.length; i++) {\n\t\t\tcolor.push(object[labels[i]]);\n\t\t}\n\n\t\tthis.color = zeroArray(color);\n\t}\n\n\t// Perform limitations (clamping, etc.)\n\tif (limiters[this.model]) {\n\t\tchannels = convert[this.model].channels;\n\t\tfor (i = 0; i < channels; i++) {\n\t\t\tconst limit = limiters[this.model][i];\n\t\t\tif (limit) {\n\t\t\t\tthis.color[i] = limit(this.color[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.valpha = Math.max(0, Math.min(1, this.valpha));\n\n\tif (Object.freeze) {\n\t\tObject.freeze(this);\n\t}\n}\n\nColor.prototype = {\n\ttoString() {\n\t\treturn this.string();\n\t},\n\n\ttoJSON() {\n\t\treturn this[this.model]();\n\t},\n\n\tstring(places) {\n\t\tlet self = this.model in colorString.to ? this : this.rgb();\n\t\tself = self.round(typeof places === 'number' ? places : 1);\n\t\tconst args = self.valpha === 1 ? self.color : [...self.color, this.valpha];\n\t\treturn colorString.to[self.model](args);\n\t},\n\n\tpercentString(places) {\n\t\tconst self = this.rgb().round(typeof places === 'number' ? places : 1);\n\t\tconst args = self.valpha === 1 ? self.color : [...self.color, this.valpha];\n\t\treturn colorString.to.rgb.percent(args);\n\t},\n\n\tarray() {\n\t\treturn this.valpha === 1 ? [...this.color] : [...this.color, this.valpha];\n\t},\n\n\tobject() {\n\t\tconst result = {};\n\t\tconst {channels} = convert[this.model];\n\t\tconst {labels} = convert[this.model];\n\n\t\tfor (let i = 0; i < channels; i++) {\n\t\t\tresult[labels[i]] = this.color[i];\n\t\t}\n\n\t\tif (this.valpha !== 1) {\n\t\t\tresult.alpha = this.valpha;\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tunitArray() {\n\t\tconst rgb = this.rgb().color;\n\t\trgb[0] /= 255;\n\t\trgb[1] /= 255;\n\t\trgb[2] /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.push(this.valpha);\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tunitObject() {\n\t\tconst rgb = this.rgb().object();\n\t\trgb.r /= 255;\n\t\trgb.g /= 255;\n\t\trgb.b /= 255;\n\n\t\tif (this.valpha !== 1) {\n\t\t\trgb.alpha = this.valpha;\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tround(places) {\n\t\tplaces = Math.max(places || 0, 0);\n\t\treturn new Color([...this.color.map(roundToPlace(places)), this.valpha], this.model);\n\t},\n\n\talpha(value) {\n\t\tif (value !== undefined) {\n\t\t\treturn new Color([...this.color, Math.max(0, Math.min(1, value))], this.model);\n\t\t}\n\n\t\treturn this.valpha;\n\t},\n\n\t// Rgb\n\tred: getset('rgb', 0, maxfn(255)),\n\tgreen: getset('rgb', 1, maxfn(255)),\n\tblue: getset('rgb', 2, maxfn(255)),\n\n\thue: getset(['hsl', 'hsv', 'hsl', 'hwb', 'hcg'], 0, value => ((value % 360) + 360) % 360),\n\n\tsaturationl: getset('hsl', 1, maxfn(100)),\n\tlightness: getset('hsl', 2, maxfn(100)),\n\n\tsaturationv: getset('hsv', 1, maxfn(100)),\n\tvalue: getset('hsv', 2, maxfn(100)),\n\n\tchroma: getset('hcg', 1, maxfn(100)),\n\tgray: getset('hcg', 2, maxfn(100)),\n\n\twhite: getset('hwb', 1, maxfn(100)),\n\twblack: getset('hwb', 2, maxfn(100)),\n\n\tcyan: getset('cmyk', 0, maxfn(100)),\n\tmagenta: getset('cmyk', 1, maxfn(100)),\n\tyellow: getset('cmyk', 2, maxfn(100)),\n\tblack: getset('cmyk', 3, maxfn(100)),\n\n\tx: getset('xyz', 0, maxfn(95.047)),\n\ty: getset('xyz', 1, maxfn(100)),\n\tz: getset('xyz', 2, maxfn(108.833)),\n\n\tl: getset('lab', 0, maxfn(100)),\n\ta: getset('lab', 1),\n\tb: getset('lab', 2),\n\n\tkeyword(value) {\n\t\tif (value !== undefined) {\n\t\t\treturn new Color(value);\n\t\t}\n\n\t\treturn convert[this.model].keyword(this.color);\n\t},\n\n\thex(value) {\n\t\tif (value !== undefined) {\n\t\t\treturn new Color(value);\n\t\t}\n\n\t\treturn colorString.to.hex(this.rgb().round().color);\n\t},\n\n\thexa(value) {\n\t\tif (value !== undefined) {\n\t\t\treturn new Color(value);\n\t\t}\n\n\t\tconst rgbArray = this.rgb().round().color;\n\n\t\tlet alphaHex = Math.round(this.valpha * 255).toString(16).toUpperCase();\n\t\tif (alphaHex.length === 1) {\n\t\t\talphaHex = '0' + alphaHex;\n\t\t}\n\n\t\treturn colorString.to.hex(rgbArray) + alphaHex;\n\t},\n\n\trgbNumber() {\n\t\tconst rgb = this.rgb().color;\n\t\treturn ((rgb[0] & 0xFF) << 16) | ((rgb[1] & 0xFF) << 8) | (rgb[2] & 0xFF);\n\t},\n\n\tluminosity() {\n\t\t// http://www.w3.org/TR/WCAG20/#relativeluminancedef\n\t\tconst rgb = this.rgb().color;\n\n\t\tconst lum = [];\n\t\tfor (const [i, element] of rgb.entries()) {\n\t\t\tconst chan = element / 255;\n\t\t\tlum[i] = (chan <= 0.04045) ? chan / 12.92 : ((chan + 0.055) / 1.055) ** 2.4;\n\t\t}\n\n\t\treturn 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\n\t},\n\n\tcontrast(color2) {\n\t\t// http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n\t\tconst lum1 = this.luminosity();\n\t\tconst lum2 = color2.luminosity();\n\n\t\tif (lum1 > lum2) {\n\t\t\treturn (lum1 + 0.05) / (lum2 + 0.05);\n\t\t}\n\n\t\treturn (lum2 + 0.05) / (lum1 + 0.05);\n\t},\n\n\tlevel(color2) {\n\t\t// https://www.w3.org/TR/WCAG/#contrast-enhanced\n\t\tconst contrastRatio = this.contrast(color2);\n\t\tif (contrastRatio >= 7) {\n\t\t\treturn 'AAA';\n\t\t}\n\n\t\treturn (contrastRatio >= 4.5) ? 'AA' : '';\n\t},\n\n\tisDark() {\n\t\t// YIQ equation from http://24ways.org/2010/calculating-color-contrast\n\t\tconst rgb = this.rgb().color;\n\t\tconst yiq = (rgb[0] * 2126 + rgb[1] * 7152 + rgb[2] * 722) / 10000;\n\t\treturn yiq < 128;\n\t},\n\n\tisLight() {\n\t\treturn !this.isDark();\n\t},\n\n\tnegate() {\n\t\tconst rgb = this.rgb();\n\t\tfor (let i = 0; i < 3; i++) {\n\t\t\trgb.color[i] = 255 - rgb.color[i];\n\t\t}\n\n\t\treturn rgb;\n\t},\n\n\tlighten(ratio) {\n\t\tconst hsl = this.hsl();\n\t\thsl.color[2] += hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdarken(ratio) {\n\t\tconst hsl = this.hsl();\n\t\thsl.color[2] -= hsl.color[2] * ratio;\n\t\treturn hsl;\n\t},\n\n\tsaturate(ratio) {\n\t\tconst hsl = this.hsl();\n\t\thsl.color[1] += hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\tdesaturate(ratio) {\n\t\tconst hsl = this.hsl();\n\t\thsl.color[1] -= hsl.color[1] * ratio;\n\t\treturn hsl;\n\t},\n\n\twhiten(ratio) {\n\t\tconst hwb = this.hwb();\n\t\thwb.color[1] += hwb.color[1] * ratio;\n\t\treturn hwb;\n\t},\n\n\tblacken(ratio) {\n\t\tconst hwb = this.hwb();\n\t\thwb.color[2] += hwb.color[2] * ratio;\n\t\treturn hwb;\n\t},\n\n\tgrayscale() {\n\t\t// http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale\n\t\tconst rgb = this.rgb().color;\n\t\tconst value = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n\t\treturn Color.rgb(value, value, value);\n\t},\n\n\tfade(ratio) {\n\t\treturn this.alpha(this.valpha - (this.valpha * ratio));\n\t},\n\n\topaquer(ratio) {\n\t\treturn this.alpha(this.valpha + (this.valpha * ratio));\n\t},\n\n\trotate(degrees) {\n\t\tconst hsl = this.hsl();\n\t\tlet hue = hsl.color[0];\n\t\thue = (hue + degrees) % 360;\n\t\thue = hue < 0 ? 360 + hue : hue;\n\t\thsl.color[0] = hue;\n\t\treturn hsl;\n\t},\n\n\tmix(mixinColor, weight) {\n\t\t// Ported from sass implementation in C\n\t\t// https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\n\t\tif (!mixinColor || !mixinColor.rgb) {\n\t\t\tthrow new Error('Argument to \"mix\" was not a Color instance, but rather an instance of ' + typeof mixinColor);\n\t\t}\n\n\t\tconst color1 = mixinColor.rgb();\n\t\tconst color2 = this.rgb();\n\t\tconst p = weight === undefined ? 0.5 : weight;\n\n\t\tconst w = 2 * p - 1;\n\t\tconst a = color1.alpha() - color2.alpha();\n\n\t\tconst w1 = (((w * a === -1) ? w : (w + a) / (1 + w * a)) + 1) / 2;\n\t\tconst w2 = 1 - w1;\n\n\t\treturn Color.rgb(\n\t\t\tw1 * color1.red() + w2 * color2.red(),\n\t\t\tw1 * color1.green() + w2 * color2.green(),\n\t\t\tw1 * color1.blue() + w2 * color2.blue(),\n\t\t\tcolor1.alpha() * p + color2.alpha() * (1 - p));\n\t},\n};\n\n// Model conversion methods and static constructors\nfor (const model of Object.keys(convert)) {\n\tif (skippedModels.includes(model)) {\n\t\tcontinue;\n\t}\n\n\tconst {channels} = convert[model];\n\n\t// Conversion methods\n\tColor.prototype[model] = function (...args) {\n\t\tif (this.model === model) {\n\t\t\treturn new Color(this);\n\t\t}\n\n\t\tif (args.length > 0) {\n\t\t\treturn new Color(args, model);\n\t\t}\n\n\t\treturn new Color([...assertArray(convert[this.model][model].raw(this.color)), this.valpha], model);\n\t};\n\n\t// 'static' construction methods\n\tColor[model] = function (...args) {\n\t\tlet color = args[0];\n\t\tif (typeof color === 'number') {\n\t\t\tcolor = zeroArray(args, channels);\n\t\t}\n\n\t\treturn new Color(color, model);\n\t};\n}\n\nfunction roundTo(number, places) {\n\treturn Number(number.toFixed(places));\n}\n\nfunction roundToPlace(places) {\n\treturn function (number) {\n\t\treturn roundTo(number, places);\n\t};\n}\n\nfunction getset(model, channel, modifier) {\n\tmodel = Array.isArray(model) ? model : [model];\n\n\tfor (const m of model) {\n\t\t(limiters[m] || (limiters[m] = []))[channel] = modifier;\n\t}\n\n\tmodel = model[0];\n\n\treturn function (value) {\n\t\tlet result;\n\n\t\tif (value !== undefined) {\n\t\t\tif (modifier) {\n\t\t\t\tvalue = modifier(value);\n\t\t\t}\n\n\t\t\tresult = this[model]();\n\t\t\tresult.color[channel] = value;\n\t\t\treturn result;\n\t\t}\n\n\t\tresult = this[model]().color[channel];\n\t\tif (modifier) {\n\t\t\tresult = modifier(result);\n\t\t}\n\n\t\treturn result;\n\t};\n}\n\nfunction maxfn(max) {\n\treturn function (v) {\n\t\treturn Math.max(0, Math.min(max, v));\n\t};\n}\n\nfunction assertArray(value) {\n\treturn Array.isArray(value) ? value : [value];\n}\n\nfunction zeroArray(array, length) {\n\tfor (let i = 0; i < length; i++) {\n\t\tif (typeof array[i] !== 'number') {\n\t\t\tarray[i] = 0;\n\t\t}\n\t}\n\n\treturn array;\n}\n\nmodule.exports = Color;\n","/* eslint-disable @typescript-eslint/naming-convention */\n\nimport type { MaplibreStyleVector } from '../types/index.js';\n\nconst maxzoom = 14;\n\nexport function getShortbreadTemplate(): MaplibreStyleVector {\n\treturn {\n\t\tversion: 8,\n\t\tname: 'versatiles',\n\t\tmetadata: {\n\t\t\t'maputnik:renderer': 'mbgljs',\n\t\t\tlicense: 'https://creativecommons.org/publicdomain/zero/1.0/',\n\t\t},\n\t\tglyphs: 'https://tiles.versatiles.org/fonts/{fontstack}/{range}.pbf',\n\t\tsprite: 'https://tiles.versatiles.org/sprites/sprites',\n\t\tsources: {\n\t\t\t'versatiles-shortbread': {\n\t\t\t\ttilejson: '3.0.0',\n\t\t\t\tattribution: 'Â© <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n\t\t\t\ttiles: [\n\t\t\t\t\t'https://tiles.versatiles.org/tiles/osm/{z}/{x}/{y}',\n\t\t\t\t],\n\t\t\t\ttype: 'vector',\n\t\t\t\tscheme: 'xyz',\n\t\t\t\tformat: 'pbf',\n\t\t\t\tbounds: [\n\t\t\t\t\t-180,\n\t\t\t\t\t-85.0511287798066,\n\t\t\t\t\t180,\n\t\t\t\t\t85.0511287798066,\n\t\t\t\t],\n\t\t\t\tminzoom: 0,\n\t\t\t\tmaxzoom,\n\t\t\t\tvector_layers: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'place_labels',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t\tname: 'String',\n\t\t\t\t\t\t\tname_de: 'String',\n\t\t\t\t\t\t\tname_en: 'String',\n\t\t\t\t\t\t\tpopulation: 'Number',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 3,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'boundaries',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tadmin_level: 'Number',\n\t\t\t\t\t\t\tcoastline: 'Boolean',\n\t\t\t\t\t\t\tdisputed: 'Boolean',\n\t\t\t\t\t\t\tmaritime: 'Boolean',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 0,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'boundary_labels',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tadmin_level: 'Number',\n\t\t\t\t\t\t\tland_area: 'Number',\n\t\t\t\t\t\t\tname: 'String',\n\t\t\t\t\t\t\tname_de: 'String',\n\t\t\t\t\t\t\tname_en: 'String',\n\t\t\t\t\t\t\tname_single: 'String',\n\t\t\t\t\t\t\tway_area: 'Number',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 2,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'addresses',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\thousename: 'String',\n\t\t\t\t\t\t\thousenumber: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 14,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'water_lines',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tbridge: 'Boolean',\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t\ttunnel: 'Boolean',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 4,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'water_lines_labels',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tbridge: 'Boolean',\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t\tname: 'String',\n\t\t\t\t\t\t\tname_de: 'String',\n\t\t\t\t\t\t\tname_en: 'String',\n\t\t\t\t\t\t\ttunnel: 'Boolean',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 4,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'dam_lines',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 12,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'dam_polygons',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 12,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'pier_lines',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 12,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'pier_polygons',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 12,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'bridges',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 12,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'street_polygons',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tbridge: 'Boolean',\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t\trail: 'Boolean',\n\t\t\t\t\t\t\tservice: 'String',\n\t\t\t\t\t\t\tsurface: 'String',\n\t\t\t\t\t\t\ttunnel: 'Boolean',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 11,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'streets_polygons_labels',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t\tname: 'String',\n\t\t\t\t\t\t\tname_de: 'String',\n\t\t\t\t\t\t\tname_en: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 14,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'ferries',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t\tname: 'String',\n\t\t\t\t\t\t\tname_de: 'String',\n\t\t\t\t\t\t\tname_en: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 8,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'streets',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tbicycle: 'String',\n\t\t\t\t\t\t\tbridge: 'Boolean',\n\t\t\t\t\t\t\thorse: 'String',\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t\tlink: 'Boolean',\n\t\t\t\t\t\t\toneway: 'Boolean',\n\t\t\t\t\t\t\toneway_reverse: 'Boolean',\n\t\t\t\t\t\t\trail: 'Boolean',\n\t\t\t\t\t\t\tservice: 'String',\n\t\t\t\t\t\t\tsurface: 'String',\n\t\t\t\t\t\t\ttracktype: 'String',\n\t\t\t\t\t\t\ttunnel: 'Boolean',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 5,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'street_labels',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t\tname: 'String',\n\t\t\t\t\t\t\tname_de: 'String',\n\t\t\t\t\t\t\tname_en: 'String',\n\t\t\t\t\t\t\tref: 'String',\n\t\t\t\t\t\t\tref_cols: 'Number',\n\t\t\t\t\t\t\tref_rows: 'Number',\n\t\t\t\t\t\t\ttunnel: 'Boolean',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 10,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'street_labels_points',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t\tname: 'String',\n\t\t\t\t\t\t\tname_de: 'String',\n\t\t\t\t\t\t\tname_en: 'String',\n\t\t\t\t\t\t\tref: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 12,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'aerialways',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 12,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'public_transport',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tiata: 'String',\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t\tname: 'String',\n\t\t\t\t\t\t\tname_de: 'String',\n\t\t\t\t\t\t\tname_en: 'String',\n\t\t\t\t\t\t\tstation: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 11,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'buildings',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tamenity: 'String',\n\t\t\t\t\t\t\tdummy: 'Number',\n\t\t\t\t\t\t\tname: 'String',\n\t\t\t\t\t\t\tname_de: 'String',\n\t\t\t\t\t\t\tname_en: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 14,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'water_polygons',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t\tway_area: 'Number',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 4,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'ocean',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tx: 'Number',\n\t\t\t\t\t\t\ty: 'Number',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 0,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'water_polygons_labels',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t\tname: 'String',\n\t\t\t\t\t\t\tname_de: 'String',\n\t\t\t\t\t\t\tname_en: 'String',\n\t\t\t\t\t\t\tway_area: 'Number',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 14,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'land',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 7,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'sites',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tamenity: 'String',\n\t\t\t\t\t\t\tkind: 'String',\n\t\t\t\t\t\t\tname: 'String',\n\t\t\t\t\t\t\tname_de: 'String',\n\t\t\t\t\t\t\tname_en: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 14,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'pois',\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tamenity: 'String',\n\t\t\t\t\t\t\tatm: 'Boolean',\n\t\t\t\t\t\t\tcuisine: 'String',\n\t\t\t\t\t\t\tdenomination: 'String',\n\t\t\t\t\t\t\temergency: 'String',\n\t\t\t\t\t\t\thighway: 'String',\n\t\t\t\t\t\t\thistoric: 'String',\n\t\t\t\t\t\t\tinformation: 'String',\n\t\t\t\t\t\t\tleisure: 'String',\n\t\t\t\t\t\t\tman_made: 'String',\n\t\t\t\t\t\t\tname: 'String',\n\t\t\t\t\t\t\tname_de: 'String',\n\t\t\t\t\t\t\tname_en: 'String',\n\t\t\t\t\t\t\t'recycling:clothes': 'Boolean',\n\t\t\t\t\t\t\t'recycling:glass_bottles': 'Boolean',\n\t\t\t\t\t\t\t'recycling:paper': 'Boolean',\n\t\t\t\t\t\t\t'recycling:scrap_metal': 'Boolean',\n\t\t\t\t\t\t\treligion: 'String',\n\t\t\t\t\t\t\tshop: 'String',\n\t\t\t\t\t\t\tsport: 'String',\n\t\t\t\t\t\t\ttourism: 'String',\n\t\t\t\t\t\t\t'tower:type': 'String',\n\t\t\t\t\t\t\tvending: 'String',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tminzoom: 14,\n\t\t\t\t\t\tmaxzoom,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t},\n\t\tlayers: [],\n\t};\n}","/**\n * @param {string | RegExp} a\n * @param {string | RegExp} b\n * @param {string} str\n */\nexport default function balanced (a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str)\n  if (b instanceof RegExp) b = maybeMatch(b, str)\n\n  const r = range(a, b, str)\n\n  return (\n    r && {\n      start: r[0],\n      end: r[1],\n      pre: str.slice(0, r[0]),\n      body: str.slice(r[0] + a.length, r[1]),\n      post: str.slice(r[1] + b.length)\n    }\n  )\n}\n\n/**\n * @param {RegExp} reg\n * @param {string} str\n */\nfunction maybeMatch (reg, str) {\n  const m = str.match(reg)\n  return m ? m[0] : null\n}\n\n/**\n * @param {string} a\n * @param {string} b\n * @param {string} str\n */\nexport function range (a, b, str) {\n  let begs, beg, left, right, result\n  let ai = str.indexOf(a)\n  let bi = str.indexOf(b, ai + 1)\n  let i = ai\n\n  if (ai >= 0 && bi > 0) {\n    if (a === b) {\n      return [ai, bi]\n    }\n    begs = []\n    left = str.length\n\n    while (i >= 0 && !result) {\n      if (i === ai) {\n        begs.push(i)\n        ai = str.indexOf(a, i + 1)\n      } else if (begs.length === 1) {\n        result = [begs.pop(), bi]\n      } else {\n        beg = begs.pop()\n        if (beg < left) {\n          left = beg\n          right = bi\n        }\n\n        bi = str.indexOf(b, i + 1)\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi\n    }\n\n    if (begs.length) {\n      result = [left, right]\n    }\n  }\n\n  return result\n}\n","import balanced from 'balanced-match'\n\nconst escSlash = '\\0SLASH' + Math.random() + '\\0'\nconst escOpen = '\\0OPEN' + Math.random() + '\\0'\nconst escClose = '\\0CLOSE' + Math.random() + '\\0'\nconst escComma = '\\0COMMA' + Math.random() + '\\0'\nconst escPeriod = '\\0PERIOD' + Math.random() + '\\0'\nconst escSlashPattern = new RegExp(escSlash, 'g')\nconst escOpenPattern = new RegExp(escOpen, 'g')\nconst escClosePattern = new RegExp(escClose, 'g')\nconst escCommaPattern = new RegExp(escComma, 'g')\nconst escPeriodPattern = new RegExp(escPeriod, 'g')\nconst slashPattern = /\\\\\\\\/g\nconst openPattern = /\\\\{/g\nconst closePattern = /\\\\}/g\nconst commaPattern = /\\\\,/g\nconst periodPattern = /\\\\./g\n\n/**\n * @return {number}\n */\nfunction numeric (str) {\n  return !isNaN(str)\n    ? parseInt(str, 10)\n    : str.charCodeAt(0)\n}\n\n/**\n * @param {string} str\n */\nfunction escapeBraces (str) {\n  return str.replace(slashPattern, escSlash)\n    .replace(openPattern, escOpen)\n    .replace(closePattern, escClose)\n    .replace(commaPattern, escComma)\n    .replace(periodPattern, escPeriod)\n}\n\n/**\n * @param {string} str\n */\nfunction unescapeBraces (str) {\n  return str.replace(escSlashPattern, '\\\\')\n    .replace(escOpenPattern, '{')\n    .replace(escClosePattern, '}')\n    .replace(escCommaPattern, ',')\n    .replace(escPeriodPattern, '.')\n}\n\n/**\n * Basically just str.split(\",\"), but handling cases\n * where we have nested braced sections, which should be\n * treated as individual members, like {a,{b,c},d}\n * @param {string} str\n */\nfunction parseCommaParts (str) {\n  if (!str) { return [''] }\n\n  const parts = []\n  const m = balanced('{', '}', str)\n\n  if (!m) { return str.split(',') }\n\n  const { pre, body, post } = m\n  const p = pre.split(',')\n\n  p[p.length - 1] += '{' + body + '}'\n  const postParts = parseCommaParts(post)\n  if (post.length) {\n    p[p.length - 1] += postParts.shift()\n    p.push.apply(p, postParts)\n  }\n\n  parts.push.apply(parts, p)\n\n  return parts\n}\n\n/**\n * @param {string} str\n */\nexport default function expandTop (str) {\n  if (!str) { return [] }\n\n  // I don't know why Bash 4.3 does this, but it does.\n  // Anything starting with {} will have the first two bytes preserved\n  // but *only* at the top level, so {},a}b will not expand to anything,\n  // but a{},b}c will be expanded to [a}c,abc].\n  // One could argue that this is a bug in Bash, but since the goal of\n  // this module is to match Bash's rules, we escape a leading {}\n  if (str.slice(0, 2) === '{}') {\n    str = '\\\\{\\\\}' + str.slice(2)\n  }\n\n  return expand(escapeBraces(str), true).map(unescapeBraces)\n}\n\n/**\n * @param {string} str\n */\nfunction embrace (str) {\n  return '{' + str + '}'\n}\n\n/**\n * @param {string} el\n */\nfunction isPadded (el) {\n  return /^-?0\\d/.test(el)\n}\n\n/**\n * @param {number} i\n * @param {number} y\n */\nfunction lte (i, y) {\n  return i <= y\n}\n\n/**\n * @param {number} i\n * @param {number} y\n */\nfunction gte (i, y) {\n  return i >= y\n}\n\n/**\n * @param {string} str\n * @param {boolean} [isTop]\n */\nfunction expand (str, isTop) {\n  /** @type {string[]} */\n  const expansions = []\n\n  const m = balanced('{', '}', str)\n  if (!m) return [str]\n\n  // no need to expand pre, since it is guaranteed to be free of brace-sets\n  const pre = m.pre\n  const post = m.post.length\n    ? expand(m.post, false)\n    : ['']\n\n  if (/\\$$/.test(m.pre)) {\n    for (let k = 0; k < post.length; k++) {\n      const expansion = pre + '{' + m.body + '}' + post[k]\n      expansions.push(expansion)\n    }\n  } else {\n    const isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body)\n    const isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body)\n    const isSequence = isNumericSequence || isAlphaSequence\n    const isOptions = m.body.indexOf(',') >= 0\n    if (!isSequence && !isOptions) {\n      // {a},b}\n      if (m.post.match(/,.*\\}/)) {\n        str = m.pre + '{' + m.body + escClose + m.post\n        return expand(str)\n      }\n      return [str]\n    }\n\n    let n\n    if (isSequence) {\n      n = m.body.split(/\\.\\./)\n    } else {\n      n = parseCommaParts(m.body)\n      if (n.length === 1) {\n        // x{{a,b}}y ==> x{a}y x{b}y\n        n = expand(n[0], false).map(embrace)\n        if (n.length === 1) {\n          return post.map(function (p) {\n            return m.pre + n[0] + p\n          })\n        }\n      }\n    }\n\n    // at this point, n is the parts, and we know it's not a comma set\n    // with a single entry.\n    let N\n\n    if (isSequence) {\n      const x = numeric(n[0])\n      const y = numeric(n[1])\n      const width = Math.max(n[0].length, n[1].length)\n      let incr = n.length === 3\n        ? Math.abs(numeric(n[2]))\n        : 1\n      let test = lte\n      const reverse = y < x\n      if (reverse) {\n        incr *= -1\n        test = gte\n      }\n      const pad = n.some(isPadded)\n\n      N = []\n\n      for (let i = x; test(i, y); i += incr) {\n        let c\n        if (isAlphaSequence) {\n          c = String.fromCharCode(i)\n          if (c === '\\\\') { c = '' }\n        } else {\n          c = String(i)\n          if (pad) {\n            const need = width - c.length\n            if (need > 0) {\n              const z = new Array(need + 1).join('0')\n              if (i < 0) { c = '-' + z + c.slice(1) } else { c = z + c }\n            }\n          }\n        }\n        N.push(c)\n      }\n    } else {\n      N = []\n\n      for (let j = 0; j < n.length; j++) {\n        N.push.apply(N, expand(n[j], false))\n      }\n    }\n\n    for (let j = 0; j < N.length; j++) {\n      for (let k = 0; k < post.length; k++) {\n        const expansion = pre + N[j] + post[k]\n        if (!isTop || isSequence || expansion) { expansions.push(expansion) }\n      }\n    }\n  }\n\n  return expansions\n}\n","\nexport interface ShortbreadProperty {\n\treadonly key: string;\n\treadonly parent: 'layer' | 'layout' | 'paint';\n\treadonly valueType: 'array' | 'boolean' | 'color' | 'enum' | 'filter' | 'fonts' | 'formatted' | 'number' | 'padding' | 'resolvedImage' | 'variableAnchorOffsetCollection';\n}\n\ntype ShortbreadPropertyDef = ShortbreadProperty & {\n\treadonly types: string;\n\treadonly short?: string;\n};\n\nconst propertyLookup = new Map<string, ShortbreadProperty[]>();\n\nconst propertyDefs: ShortbreadPropertyDef[] = [\n\t{ parent: 'layer', types: 'background,fill,line,symbol', key: 'filter', valueType: 'filter' },\n\t{ parent: 'layer', types: 'background,fill,line,symbol', key: 'maxzoom', valueType: 'number' },\n\t{ parent: 'layer', types: 'background,fill,line,symbol', key: 'minzoom', valueType: 'number' },\n\n\t{ parent: 'layout', types: 'background,fill,line,symbol', key: 'visibility', valueType: 'enum' },\n\t{ parent: 'layout', types: 'fill', key: 'fill-sort-key', valueType: 'number' },\n\t{ parent: 'layout', types: 'line', key: 'line-cap', valueType: 'enum' },\n\t{ parent: 'layout', types: 'line', key: 'line-join', valueType: 'enum' },\n\t{ parent: 'layout', types: 'line', key: 'line-miter-limit', valueType: 'number' },\n\t{ parent: 'layout', types: 'line', key: 'line-round-limit', valueType: 'number' },\n\t{ parent: 'layout', types: 'line', key: 'line-sort-key', valueType: 'number' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-allow-overlap', valueType: 'boolean' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-anchor', valueType: 'enum' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-ignore-placement', valueType: 'boolean' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-image', short: 'image', valueType: 'resolvedImage' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-keep-upright', valueType: 'boolean' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-offset', valueType: 'array' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-optional', valueType: 'boolean' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-overlap', valueType: 'enum' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-padding', valueType: 'padding' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-pitch-alignment', valueType: 'enum' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-rotate', valueType: 'number' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-rotation-alignment', valueType: 'enum' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-size', valueType: 'number' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-text-fit-padding', valueType: 'array' },\n\t{ parent: 'layout', types: 'symbol', key: 'icon-text-fit', valueType: 'enum' },\n\t{ parent: 'layout', types: 'symbol', key: 'symbol-avoid-edges', valueType: 'boolean' },\n\t{ parent: 'layout', types: 'symbol', key: 'symbol-placement', valueType: 'enum' },\n\t{ parent: 'layout', types: 'symbol', key: 'symbol-sort-key', valueType: 'number' },\n\t{ parent: 'layout', types: 'symbol', key: 'symbol-spacing', valueType: 'number' },\n\t{ parent: 'layout', types: 'symbol', key: 'symbol-z-order', valueType: 'enum' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-allow-overlap', valueType: 'boolean' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-anchor', valueType: 'enum' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-field', short: 'text', valueType: 'formatted' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-font', short: 'font', valueType: 'fonts' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-ignore-placement', valueType: 'boolean' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-justify', valueType: 'enum' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-keep-upright', valueType: 'boolean' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-letter-spacing', valueType: 'number' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-line-height', valueType: 'number' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-max-angle', valueType: 'number' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-max-width', valueType: 'number' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-offset', valueType: 'array' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-optional', valueType: 'boolean' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-overlap', valueType: 'enum' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-padding', valueType: 'number' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-pitch-alignment', valueType: 'enum' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-radial-offset', valueType: 'number' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-rotate', valueType: 'number' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-rotation-alignment', valueType: 'enum' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-size', short: 'size', valueType: 'number' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-transform', valueType: 'enum' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-variable-anchor-offset', valueType: 'variableAnchorOffsetCollection' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-variable-anchor', valueType: 'array' },\n\t{ parent: 'layout', types: 'symbol', key: 'text-writing-mode', valueType: 'array' },\n\n\t{ parent: 'paint', types: 'background', key: 'background-color', short: 'color', valueType: 'color' },\n\t{ parent: 'paint', types: 'background', key: 'background-opacity', short: 'opacity', valueType: 'number' },\n\t{ parent: 'paint', types: 'background', key: 'background-pattern', short: 'image', valueType: 'resolvedImage' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-antialias', valueType: 'boolean' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-color', short: 'color', valueType: 'color' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-extrusion-base', valueType: 'number' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-extrusion-color', valueType: 'color' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-extrusion-height', valueType: 'number' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-extrusion-opacity', valueType: 'number' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-extrusion-pattern', valueType: 'resolvedImage' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-extrusion-translate-anchor', valueType: 'enum' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-extrusion-translate', valueType: 'array' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-extrusion-vertical-gradient', valueType: 'boolean' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-opacity', short: 'opacity', valueType: 'number' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-outline-color', valueType: 'color' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-pattern', short: 'image', valueType: 'resolvedImage' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-translate-anchor', valueType: 'enum' },\n\t{ parent: 'paint', types: 'fill', key: 'fill-translate', valueType: 'array' },\n\t{ parent: 'paint', types: 'line', key: 'line-blur', valueType: 'number' },\n\t{ parent: 'paint', types: 'line', key: 'line-color', short: 'color', valueType: 'color' },\n\t{ parent: 'paint', types: 'line', key: 'line-dasharray', valueType: 'array' },\n\t{ parent: 'paint', types: 'line', key: 'line-gap-width', valueType: 'number' },\n\t{ parent: 'paint', types: 'line', key: 'line-gradient', valueType: 'color' },\n\t{ parent: 'paint', types: 'line', key: 'line-offset', valueType: 'number' },\n\t{ parent: 'paint', types: 'line', key: 'line-opacity', short: 'opacity', valueType: 'number' },\n\t{ parent: 'paint', types: 'line', key: 'line-pattern', short: 'image', valueType: 'resolvedImage' },\n\t{ parent: 'paint', types: 'line', key: 'line-translate-anchor', valueType: 'enum' },\n\t{ parent: 'paint', types: 'line', key: 'line-translate', valueType: 'array' },\n\t{ parent: 'paint', types: 'line', key: 'line-width', short: 'size', valueType: 'number' },\n\t{ parent: 'paint', types: 'symbol', key: 'icon-color', short: 'color', valueType: 'color' },\n\t{ parent: 'paint', types: 'symbol', key: 'icon-halo-blur', valueType: 'number' },\n\t{ parent: 'paint', types: 'symbol', key: 'icon-halo-color', valueType: 'color' },\n\t{ parent: 'paint', types: 'symbol', key: 'icon-halo-width', valueType: 'number' },\n\t{ parent: 'paint', types: 'symbol', key: 'icon-opacity', short: 'opacity', valueType: 'number' },\n\t{ parent: 'paint', types: 'symbol', key: 'icon-translate-anchor', valueType: 'enum' },\n\t{ parent: 'paint', types: 'symbol', key: 'icon-translate', valueType: 'array' },\n\t{ parent: 'paint', types: 'symbol', key: 'text-color', short: 'color', valueType: 'color' },\n\t{ parent: 'paint', types: 'symbol', key: 'text-halo-blur', valueType: 'number' },\n\t{ parent: 'paint', types: 'symbol', key: 'text-halo-color', valueType: 'color' },\n\t{ parent: 'paint', types: 'symbol', key: 'text-halo-width', valueType: 'number' },\n\t{ parent: 'paint', types: 'symbol', key: 'text-opacity', short: 'opacity', valueType: 'number' },\n\t{ parent: 'paint', types: 'symbol', key: 'text-translate-anchor', valueType: 'enum' },\n\t{ parent: 'paint', types: 'symbol', key: 'text-translate', valueType: 'array' },\n];\n\npropertyDefs.forEach((propertyDef: ShortbreadPropertyDef) => {\n\tconst types: string = propertyDef.types;\n\n\ttypes.split(',').forEach((type: string) => {\n\n\t\tfunction add(propertyKey: string): void {\n\t\t\tconst key = type + '/' + propertyKey;\n\t\t\tconst property: ShortbreadProperty = {\n\t\t\t\tkey: propertyDef.key,\n\t\t\t\tparent: propertyDef.parent,\n\t\t\t\tvalueType: propertyDef.valueType,\n\t\t\t};\n\t\t\tconst propertyList: ShortbreadProperty[] | undefined = propertyLookup.get(key);\n\t\t\tif (propertyList) {\n\t\t\t\tpropertyList.push(property);\n\t\t\t} else {\n\t\t\t\tpropertyLookup.set(key, [property]);\n\t\t\t}\n\t\t}\n\n\t\tadd(propertyDef.key);\n\t\tif (propertyDef.short != null) add(propertyDef.short);\n\t});\n});\n\nexport default propertyLookup;\n","import Color from 'color';\n\n// Utility function to deep clone an object\nexport function deepClone<T>(obj: T): T {\n\tconst type = typeof obj;\n\tif (type !== 'object') {\n\t\tswitch (type) {\n\t\t\tcase 'boolean':\n\t\t\tcase 'number':\n\t\t\tcase 'string':\n\t\t\tcase 'undefined':\n\t\t\t\treturn obj;\n\t\t\tdefault: throw new Error(`Not implemented yet: \"${type}\" case`);\n\t\t}\n\t}\n\n\tif (isSimpleObject(obj)) {\n\t\t// @ts-expect-error: Too complicated to handle\n\t\treturn Object.fromEntries(Object.entries(obj).map(([key, value]) => [key, deepClone(value)]));\n\t}\n\n\tif (obj instanceof Array) {\n\t\t// @ts-expect-error: Too complicated to handle\n\t\treturn obj.map((e: unknown) => deepClone(e));\n\t}\n\n\tif (obj instanceof Color) {\n\t\t// @ts-expect-error: Too complicated to handle\n\t\treturn Color(obj);\n\t}\n\n\tif (obj == null) return obj;\n\n\tconsole.log('obj', obj);\n\tconsole.log('obj.prototype', Object.getPrototypeOf(obj));\n\tthrow Error();\n}\n\nexport function isSimpleObject(item: unknown): boolean {\n\tif (item === null) return false;\n\tif (typeof item !== 'object') return false;\n\tif (Array.isArray(item)) return false;\n\tconst prototypeKeyCount: number = Object.keys(Object.getPrototypeOf(item) as object).length;\n\tif (prototypeKeyCount !== 0) return false;\n\tif (item.constructor.name !== 'Object') return false;\n\treturn true;\n}\n\nexport function isBasicType(item: unknown): boolean {\n\tswitch (typeof item) {\n\t\tcase 'boolean':\n\t\tcase 'number':\n\t\tcase 'string':\n\t\tcase 'undefined':\n\t\t\treturn true;\n\t\tcase 'object':\n\t\t\treturn false;\n\t\tdefault:\n\t\t\tthrow Error('unknown type: ' + typeof item);\n\t}\n}\n\nexport function deepMerge<T extends object>(source0: T, ...sources: T[]): T {\n\tconst target: T = deepClone(source0);\n\n\tfor (const source of sources) {\n\t\tif (typeof source !== 'object') continue;\n\t\tfor (const key in source) {\n\t\t\tif (!Object.hasOwn(source, key)) continue;\n\n\t\t\tconst sourceValue = source[key];\n\n\t\t\t// *********\n\t\t\t// overwrite\n\t\t\t// *********\n\t\t\tswitch (typeof sourceValue) {\n\t\t\t\tcase 'number':\n\t\t\t\tcase 'string':\n\t\t\t\tcase 'boolean':\n\t\t\t\t\ttarget[key] = sourceValue;\n\t\t\t\t\tcontinue;\n\t\t\t\tdefault:\n\t\t\t}\n\n\t\t\tif (isBasicType(target[key])) {\n\t\t\t\ttarget[key] = deepClone(sourceValue);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (sourceValue instanceof Color) {\n\t\t\t\t// @ts-expect-error: Too complicated to handle\n\t\t\t\ttarget[key] = Color(sourceValue);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (isSimpleObject(target[key]) && isSimpleObject(sourceValue)) {\n\t\t\t\t// @ts-expect-error: Too complicated to handle\n\t\t\t\ttarget[key] = deepMerge(target[key], sourceValue);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// *********\n\t\t\t// merge\n\t\t\t// *********\n\n\t\t\tif (isSimpleObject(target[key]) && isSimpleObject(sourceValue)) {\n\t\t\t\t// @ts-expect-error: Too complicated to handle\n\t\t\t\ttarget[key] = deepMerge(target[key], sourceValue);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconsole.log('target[key]:', target[key]);\n\t\t\tconsole.log('source[key]:', source[key]);\n\t\t\tthrow Error('unpredicted case');\n\t\t}\n\t}\n\treturn target;\n}\n\nexport function resolveUrl(base: string, url: string): string {\n\tif (!Boolean(base)) return url;\n\turl = new URL(url, base).href;\n\turl = url.replace(/%7B/gi, '{');\n\turl = url.replace(/%7D/gi, '}');\n\treturn url;\n}\n","\nimport Color from 'color';\nimport expandBraces from 'brace-expansion';\nimport maplibreProperties from '../shortbread/properties.js';\nimport { deepMerge } from '../lib/utils.js';\nimport type { MaplibreLayer } from '../types/index.js';\nimport type { StyleRule, StyleRuleValue, StyleRules } from './types.js';\nimport type { CachedRecolor } from './recolor.ts';\n\n\n\nexport function decorate(layers: MaplibreLayer[], rules: StyleRules, recolor: CachedRecolor): MaplibreLayer[] {\n\tconst layerIds = layers.map(l => l.id);\n\tconst layerIdSet = new Set(layerIds);\n\n\t// Initialize a new map to hold final styles for layers\n\tconst layerStyles = new Map<string, StyleRule>();\n\n\t// Iterate through the generated layer style rules\n\tObject.entries(rules).forEach(([idDef, layerStyle]) => {\n\t\tif (layerStyle == null) return;\n\n\t\t// Expand any braces in IDs and filter them through a RegExp if necessary\n\t\tconst ids = expandBraces(idDef).flatMap(id => {\n\t\t\tif (!id.includes('*')) return id;\n\t\t\tconst regExpString = id.replace(/[^a-z_:-]/g, c => {\n\t\t\t\tif (c === '*') return '[a-z_-]*';\n\t\t\t\tthrow new Error('unknown char to process. Do not know how to make a RegExp from: ' + JSON.stringify(c));\n\t\t\t});\n\t\t\tconst regExp = new RegExp(`^${regExpString}$`, 'i');\n\t\t\treturn layerIds.filter(layerId => regExp.test(layerId));\n\t\t});\n\n\t\tids.forEach(id => {\n\t\t\tif (!layerIdSet.has(id)) return;\n\t\t\tlayerStyles.set(id, deepMerge(layerStyles.get(id) ?? {}, layerStyle));\n\t\t});\n\t});\n\n\t// Deep clone the original layers and apply styles\n\treturn layers.flatMap(layer => {\n\t\t// Get the id and style of the layer\n\t\tconst layerStyle = layerStyles.get(layer.id);\n\n\t\t// Don't export layers that have no style\n\t\tif (!layerStyle) return [];\n\n\t\tprocessStyling(layer, layerStyle);\n\n\t\treturn [layer];\n\t});\n\n\t// Function to process each style attribute for the layer\n\tfunction processStyling(layer: MaplibreLayer, styleRule: StyleRule): void {\n\n\t\tfor (const [ruleKeyCamelCase, ruleValue] of Object.entries(styleRule)) {\n\t\t\tif (ruleValue == null) continue;\n\n\t\t\t// CamelCase to not-camel-case\n\t\t\tconst ruleKey = ruleKeyCamelCase.replace(/[A-Z]/g, c => '-' + c.toLowerCase());\n\n\t\t\tconst propertyDefs = maplibreProperties.get(layer.type + '/' + ruleKey);\n\t\t\tif (!propertyDefs) continue;\n\n\t\t\tpropertyDefs.forEach(propertyDef => {\n\t\t\t\tconst { key } = propertyDef;\n\t\t\t\tlet value: StyleRuleValue = ruleValue;\n\n\t\t\t\tswitch (propertyDef.valueType) {\n\t\t\t\t\tcase 'color': value = processExpression(value, processColor); break;\n\t\t\t\t\tcase 'fonts': value = processExpression(value, processFont); break;\n\t\t\t\t\tcase 'resolvedImage':\n\t\t\t\t\tcase 'formatted':\n\t\t\t\t\tcase 'array':\n\t\t\t\t\tcase 'boolean':\n\t\t\t\t\tcase 'enum':\n\t\t\t\t\tcase 'number': value = processExpression(value); break;\n\t\t\t\t\tdefault: throw new Error(`unknown propertyDef.valueType \"${propertyDef.valueType}\" for key \"${key}\"`);\n\t\t\t\t}\n\n\t\t\t\tswitch (propertyDef.parent) {\n\t\t\t\t\tcase 'layer':\n\t\t\t\t\t\t// @ts-expect-error: too complex to handle\n\t\t\t\t\t\tlayer[key] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'layout':\n\t\t\t\t\t\tif (!layer.layout) layer.layout = {};\n\t\t\t\t\t\t// @ts-expect-error: too complex to handle\n\t\t\t\t\t\tlayer.layout[key] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'paint':\n\t\t\t\t\t\tif (!layer.paint) layer.paint = {};\n\t\t\t\t\t\t// @ts-expect-error: too complex to handle\n\t\t\t\t\t\tlayer.paint[key] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/restrict-template-expressions\n\t\t\t\t\t\tthrow new Error(`unknown parent \"${propertyDef.parent}\" for key \"${key}\"`);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction processColor(value: StyleRuleValue): string {\n\t\t\tif (typeof value === 'string') value = Color(value);\n\t\t\tif (value instanceof Color) {\n\t\t\t\tconst color = recolor.do(value as Color);\n\t\t\t\tconst text = (color.alpha() === 1) ? color.hex() : color.string();\n\t\t\t\treturn text.toLowerCase();\n\t\t\t}\n\t\t\tthrow new Error(`unknown color type \"${typeof value}\"`);\n\t\t}\n\n\t\tfunction processFont(value: StyleRuleValue): string[] {\n\t\t\tif (typeof value === 'string') return [value];\n\t\t\tthrow new Error(`unknown font type \"${typeof value}\"`);\n\t\t}\n\n\t\tfunction processExpression(value: StyleRuleValue, cbValue?: (value: StyleRuleValue) => StyleRuleValue): StyleRuleValue {\n\t\t\tif (typeof value === 'object') {\n\t\t\t\tif (value instanceof Color) return processColor(value);\n\t\t\t\tif (!Array.isArray(value)) {\n\t\t\t\t\treturn processZoomStops(value as Record<string, StyleRuleValue>, cbValue);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn cbValue ? cbValue(value) : value;\n\t\t}\n\n\t\tfunction processZoomStops(obj: Record<string, StyleRuleValue>, cbValue?: (value: StyleRuleValue) => StyleRuleValue): { stops: StyleRuleValue[] } {\n\t\t\treturn {\n\t\t\t\tstops: Object.entries(obj)\n\t\t\t\t\t.map(([z, v]) => [parseInt(z, 10), cbValue ? cbValue(v) : v] as [number, StyleRuleValue])\n\t\t\t\t\t.sort((a, b) => a[0] - b[0]),\n\t\t\t};\n\t\t}\n\t}\n}","import Color from 'color';\n\nexport interface RecolorOptions {\n\n\t/** If true, inverts the colors. */\n\tinvertBrightness?: boolean;\n\n\t/** The degree to rotate the hue of the color (in degrees). */\n\trotate?: number;\n\n\t/** Adjusts the saturation level of the color. Positive values increase saturation, negative values decrease it. */\n\tsaturate?: number;\n\n\t/** Adjusts the gamma of the color. Affects the brightness in a non-linear manner. */\n\tgamma?: number;\n\n\t/** Adjusts the contrast of the color. Higher values produce more contrast. */\n\tcontrast?: number;\n\n\t/** Adjusts the brightness of the color. Positive values make it brighter, negative values make it darker. */\n\tbrightness?: number;\n\n\t/** Specifies the intensity of the tinting effect. Ranges from 0 (no effect) to 1 (full effect). */\n\ttint?: number;\n\n\t/** Specifies the color used for tinting, in a string format (e.g., '#FF0000'). */\n\ttintColor?: string;\n}\n\nexport function getDefaultRecolorFlags(): RecolorOptions {\n\treturn {\n\t\tinvertBrightness: false,\n\t\trotate: 0,\n\t\tsaturate: 0,\n\t\tgamma: 1,\n\t\tcontrast: 1,\n\t\tbrightness: 0,\n\t\ttint: 0,\n\t\ttintColor: '#FF0000',\n\t};\n}\n\nfunction isValidRecolorOptions(opt?: RecolorOptions): opt is RecolorOptions {\n\tif (!opt) return false;\n\tif ((opt.invertBrightness != null) && opt.invertBrightness) return true;\n\tif ((opt.rotate != null) && (opt.rotate !== 0)) return true;\n\tif ((opt.saturate != null) && (opt.saturate !== 0)) return true;\n\tif ((opt.gamma != null) && (opt.gamma !== 1)) return true;\n\tif ((opt.contrast != null) && (opt.contrast !== 1)) return true;\n\tif ((opt.brightness != null) && (opt.brightness !== 0)) return true;\n\tif ((opt.tint != null) && (opt.tint !== 0)) return true;\n\tif ((opt.tintColor != null) && (opt.tintColor !== '#FF0000')) return true;\n\treturn false;\n}\n\nexport function recolorObject(colors: Record<string, Color>, opt?: RecolorOptions): void {\n\tif (!isValidRecolorOptions(opt)) return;\n\n\tfor (const [k, c] of Object.entries(colors)) {\n\t\tcolors[k] = recolor(c, opt);\n\t}\n}\n\nexport class CachedRecolor {\n\tprivate readonly skip: boolean;\n\n\tprivate readonly opt?: RecolorOptions;\n\n\tprivate readonly cache: Map<string, Color>;\n\n\tpublic constructor(opt?: RecolorOptions) {\n\t\tthis.skip = !isValidRecolorOptions(opt);\n\t\tthis.cache = new Map();\n\t\tthis.opt = opt;\n\t}\n\n\tpublic do(color: Color): Color {\n\t\tif (this.skip) return color;\n\n\t\tconst key = color.string();\n\n\t\tconst result = this.cache.get(key);\n\t\tif (result) return result;\n\n\t\tcolor = recolor(color, this.opt);\n\t\tthis.cache.set(key, color);\n\t\treturn color;\n\t}\n}\n\nexport function recolor(color: Color, opt?: RecolorOptions): Color {\n\tif (!isValidRecolorOptions(opt)) return color;\n\n\tif (opt.invertBrightness ?? false) color = invert(color);\n\tif ((opt.rotate !== undefined) && (opt.rotate !== 0)) color = color.rotate(opt.rotate);\n\tif ((opt.saturate !== undefined) && (opt.saturate !== 0)) color = color.saturate(opt.saturate);\n\tif ((opt.gamma !== undefined) && (opt.gamma !== 1)) color = gamma(color, opt.gamma);\n\tif ((opt.contrast !== undefined) && (opt.contrast !== 1)) color = contrast(color, opt.contrast);\n\tif ((opt.brightness !== undefined) && (opt.brightness !== 0)) color = brightness(color, opt.brightness);\n\tif ((opt.tint !== undefined) && (opt.tintColor !== undefined) && (opt.tint !== 0)) color = tint(color, opt.tint, Color(opt.tintColor));\n\n\treturn color;\n\n\tfunction invert(c: Color): Color {\n\t\tc = c.hsl();\n\t\treturn c.lightness(100 - c.lightness()).rgb();\n\t}\n\n\tfunction gamma(c: Color, value: number): Color {\n\t\tif (value < 1e-3) value = 1e-3;\n\t\tif (value > 1e3) value = 1e3;\n\t\tconst rgb: number[] = c.rgb().array();\n\t\treturn Color.rgb(\n\t\t\tMath.pow(rgb[0] / 255, value) * 255,\n\t\t\tMath.pow(rgb[1] / 255, value) * 255,\n\t\t\tMath.pow(rgb[2] / 255, value) * 255,\n\t\t\tc.alpha(),\n\t\t);\n\t}\n\n\tfunction contrast(c: Color, value: number): Color {\n\t\tif (value < 0) value = 0;\n\t\tif (value > 1e6) value = 1e6;\n\t\tconst rgb: number[] = c.rgb().array();\n\t\treturn Color.rgb(\n\t\t\t(rgb[0] - 127.5) * value + 127.5,\n\t\t\t(rgb[1] - 127.5) * value + 127.5,\n\t\t\t(rgb[2] - 127.5) * value + 127.5,\n\t\t\tc.alpha(),\n\t\t);\n\t}\n\n\tfunction brightness(c: Color, value: number): Color {\n\t\tif (value < -1e6) value = -1e6;\n\t\tif (value > 1e6) value = 1e6;\n\t\tconst a = 1 - Math.abs(value);\n\t\tconst b = (value < 0) ? 0 : 255 * value;\n\t\tconst rgb: number[] = c.rgb().array();\n\t\treturn Color.rgb(\n\t\t\trgb[0] * a + b,\n\t\t\trgb[1] * a + b,\n\t\t\trgb[2] * a + b,\n\t\t\tc.alpha(),\n\t\t);\n\t}\n\n\tfunction tint(c: Color, value: number, tintColor: Color): Color {\n\t\tif (value < 0) value = 0;\n\t\tif (value > 1) value = 1;\n\t\tconst rgb0: number[] = c.rgb().array();\n\t\tconst hsv: number[] = c.hsv().array();\n\t\thsv[0] = tintColor.hue();\n\t\tconst rgbNew = Color.hsv(hsv).rgb().array();\n\n\t\treturn Color.rgb(\n\t\t\trgb0[0] * (1 - value) + value * rgbNew[0],\n\t\t\trgb0[1] * (1 - value) + value * rgbNew[1],\n\t\t\trgb0[2] * (1 - value) + value * rgbNew[2],\n\t\t\tc.alpha(),\n\t\t);\n\t}\n}\n","import Color from 'color';\nimport { getShortbreadTemplate, getShortbreadLayers } from '../shortbread/index.js';\nimport { decorate } from './decorator.js';\nimport { CachedRecolor, getDefaultRecolorFlags } from './recolor.js';\nimport { deepClone, resolveUrl } from '../lib/utils.js';\nimport type { MaplibreLayer, MaplibreLayerDefinition, MaplibreStyle } from '../types/maplibre.js';\nimport type { StyleBuilderColorKeys, StyleBuilderColorStrings, StyleBuilderColors, StyleBuilderFontStrings, StyleBuilderOptions } from './types.js';\nimport type { StyleRules, StyleRulesOptions } from './types.js';\n\n\n\n// StyleBuilder class definition\nexport default abstract class StyleBuilder<Subclass extends StyleBuilder<Subclass>> {\n\treadonly #sourceName = 'versatiles-shortbread';\n\n\tpublic abstract readonly name: string;\n\n\tpublic abstract readonly defaultColors: StyleBuilderColorStrings<Subclass>;\n\n\tpublic abstract readonly defaultFonts: StyleBuilderFontStrings<Subclass>;\n\n\tpublic build(options?: StyleBuilderOptions<Subclass>): MaplibreStyle {\n\n\t\toptions ??= {};\n\n\t\t// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n\t\tconst baseUrl = options.baseUrl ?? globalThis?.document?.location?.href ?? 'https://tiles.versatiles.org';\n\t\tconst glyphs = options.glyphs ?? '/assets/fonts/{fontstack}/{range}.pbf';\n\n\t\tconst sprite = options.sprite ?? '/assets/sprites/sprites';\n\t\tconst tiles = options.tiles ?? ['/tiles/osm/{z}/{x}/{y}'];\n\t\tconst hideLabels = options.hideLabels ?? false;\n\t\tconst { languageSuffix } = options;\n\t\tconst recolorOptions = options.recolor ?? getDefaultRecolorFlags();\n\n\t\tconst colors = this.getColors(this.defaultColors);\n\t\tif (options.colors) {\n\t\t\tfor (const key in options.colors) colors[key] = Color(options.colors[key]);\n\t\t}\n\n\t\tconst fonts = deepClone(this.defaultFonts);\n\t\tif (options.fonts) {\n\t\t\tfor (const key in options.fonts) {\n\t\t\t\tconst fontName = options.fonts[key];\n\t\t\t\tif (fontName != null) fonts[key] = fontName;\n\t\t\t}\n\t\t}\n\n\t\t// get empty shortbread style\n\t\tconst style: MaplibreStyle = getShortbreadTemplate();\n\n\t\tconst styleRuleOptions: StyleRulesOptions<typeof this> = {\n\t\t\tcolors,\n\t\t\tfonts,\n\t\t\tlanguageSuffix,\n\t\t};\n\n\t\t// get layer style rules from child class\n\t\tconst layerStyleRules = this.getStyleRules(styleRuleOptions);\n\n\t\t// get shortbread layers\n\t\tconst layerDefinitions: MaplibreLayerDefinition[] = getShortbreadLayers({ languageSuffix });\n\t\tlet layers: MaplibreLayer[] = layerDefinitions.map(layer => {\n\t\t\tswitch (layer.type) {\n\t\t\t\tcase 'background':\n\t\t\t\t\treturn layer;\n\t\t\t\tcase 'fill':\n\t\t\t\tcase 'line':\n\t\t\t\tcase 'symbol':\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...layer,\n\t\t\t\t\t\tsource: this.#sourceName,\n\t\t\t\t\t};\n\t\t\t}\n\t\t\tthrow Error('unknown layer type');\n\t\t});\n\t\t// apply layer rules\n\t\tlayers = decorate(layers, layerStyleRules, new CachedRecolor(recolorOptions));\n\n\t\t// hide labels, if wanted\n\t\tif (hideLabels) layers = layers.filter(l => l.type !== 'symbol');\n\n\t\tstyle.layers = layers;\n\t\tstyle.name = 'versatiles-' + this.name.toLowerCase();\n\t\tstyle.glyphs = resolveUrl(baseUrl, glyphs);\n\t\tstyle.sprite = resolveUrl(baseUrl, sprite);\n\n\t\tconst source = style.sources[this.#sourceName];\n\t\tif ('tiles' in source) source.tiles = tiles.map(url => resolveUrl(baseUrl, url));\n\n\t\treturn style;\n\t}\n\n\tpublic getColors(colors: StyleBuilderColorStrings<Subclass>): StyleBuilderColors<Subclass> {\n\t\tconst entriesString = Object.entries(colors) as [StyleBuilderColorKeys<Subclass>, StyleBuilderColorStrings<Subclass>][];\n\t\tconst entriesColor = entriesString.map(([key, value]) => [key, Color(value)]) as [StyleBuilderColorKeys<Subclass>, StyleBuilderColors<Subclass>][];\n\t\tconst result = Object.fromEntries(entriesColor) as StyleBuilderColors<Subclass>;\n\t\treturn result;\n\t}\n\n\tpublic getDefaultOptions(): StyleBuilderOptions<Subclass> {\n\t\treturn {\n\t\t\tbaseUrl: '',\n\t\t\tglyphs: '',\n\t\t\tsprite: '',\n\t\t\ttiles: [],\n\t\t\thideLabels: false,\n\t\t\tlanguageSuffix: undefined,\n\t\t\tcolors: deepClone(this.defaultColors),\n\t\t\tfonts: deepClone(this.defaultFonts),\n\t\t\trecolor: getDefaultRecolorFlags(),\n\t\t};\n\t}\n\n\tprotected transformDefaultColors(callback: (color: Color) => Color): void {\n\t\tconst colors = this.getColors(this.defaultColors);\n\t\tfor (const key in colors) {\n\t\t\tthis.defaultColors[key] = callback(colors[key]).hexa();\n\t\t}\n\t}\n\n\tprotected abstract getStyleRules(options: StyleRulesOptions<Subclass>): StyleRules;\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\n\nimport type { LegacyFilterSpecification } from '@maplibre/maplibre-gl-style-spec';\nimport type { LanguageSuffix } from '../style_builder/index.js';\nimport type { MaplibreLayerDefinition } from '../types/index.js';\n\nexport function getShortbreadLayers(option: { readonly languageSuffix: LanguageSuffix }): MaplibreLayerDefinition[] {\n\tconst { languageSuffix } = option;\n\tconst nameField = languageSuffix ? '{name_' + languageSuffix + '}' : '{name}';\n\t\n\treturn [\n\n\t\t// background\n\t\t{ id: 'background', type: 'background' },\n\n\t\t// ocean\n\t\t{ id: 'water-ocean', type: 'fill', 'source-layer': 'ocean' },\n\n\t\t// land\n\t\t{\n\t\t\tid: 'land-glacier',\n\t\t\ttype: 'fill', 'source-layer': 'water_polygons',\n\t\t\tfilter: ['all', ['==', 'kind', 'glacier']],\n\t\t},\n\n\t\t...[\n\t\t\t{ id: 'commercial', kinds: ['commercial', 'retail'] },\n\t\t\t{ id: 'industrial', kinds: ['industrial', 'quarry', 'railway'] },\n\t\t\t{ id: 'residential', kinds: ['garages', 'residential'] },\n\t\t\t{ id: 'agriculture', kinds: ['brownfield', 'farmland', 'farmyard', 'greenfield', 'greenhouse_horticulture', 'orchard', 'plant_nursery', 'vineyard'] },\n\t\t\t{ id: 'waste', kinds: ['landfill'] },\n\t\t\t{ id: 'park', kinds: ['park', 'village_green', 'recreation_ground'] },\n\t\t\t{ id: 'garden', kinds: ['allotments', 'garden'] },\n\t\t\t{ id: 'burial', kinds: ['cemetery', 'grave_yard'] },\n\t\t\t{ id: 'leisure', kinds: ['miniature_golf', 'playground', 'golf_course'] },\n\t\t\t{ id: 'rock', kinds: ['bare_rock', 'scree', 'shingle'] },\n\t\t\t{ id: 'forest', kinds: ['forest'] },\n\t\t\t{ id: 'grass', kinds: ['grass', 'grassland', 'meadow', 'wet_meadow'] },\n\t\t\t{ id: 'vegetation', kinds: ['heath', 'scrub'] },\n\t\t\t{ id: 'sand', kinds: ['beach', 'sand'] },\n\t\t\t{ id: 'wetland', kinds: ['bog', 'marsh', 'string_bog', 'swamp'] },\n\t\t].map(({ id, kinds }: { readonly id: string; readonly kinds: readonly string[] }): MaplibreLayerDefinition => ({\n\t\t\tid: 'land-' + id,\n\t\t\ttype: 'fill',\n\t\t\t'source-layer': 'land',\n\t\t\tfilter: ['all',\n\t\t\t\t['in', 'kind', ...kinds],\n\t\t\t],\n\t\t})),\n\n\t\t// water-lines\n\t\t...['river', 'canal', 'stream', 'ditch'].map((t: string): MaplibreLayerDefinition => ({\n\t\t\tid: 'water-' + t,\n\t\t\ttype: 'line',\n\t\t\t'source-layer': 'water_lines',\n\t\t\tfilter: ['all',\n\t\t\t\t['in', 'kind', t],\n\t\t\t\t['!=', 'tunnel', true],\n\t\t\t\t['!=', 'bridge', true],\n\t\t\t],\n\t\t})),\n\n\t\t// water polygons\n\t\t{\n\t\t\tid: 'water-area',\n\t\t\ttype: 'fill', 'source-layer': 'water_polygons',\n\t\t\tfilter: ['==', 'kind', 'water'],\n\t\t},\n\t\t{\n\t\t\tid: 'water-area-river',\n\t\t\ttype: 'fill', 'source-layer': 'water_polygons',\n\t\t\tfilter: ['==', 'kind', 'river'],\n\t\t},\n\t\t{\n\t\t\tid: 'water-area-small',\n\t\t\ttype: 'fill', 'source-layer': 'water_polygons',\n\t\t\tfilter: ['in', 'kind', 'reservoir', 'basin', 'dock'],\n\t\t},\n\n\n\t\t// dam\n\t\t{ id: 'water-dam-area', type: 'fill', 'source-layer': 'dam_polygons', filter: ['==', 'kind', 'dam'] },\n\t\t{ id: 'water-dam', type: 'line', 'source-layer': 'dam_lines', filter: ['==', 'kind', 'dam'] },\n\n\t\t// pier\n\t\t{ id: 'water-pier-area', type: 'fill', 'source-layer': 'pier_polygons', filter: ['in', 'kind', 'pier', 'breakwater', 'groyne'] },\n\t\t{ id: 'water-pier', type: 'line', 'source-layer': 'pier_lines', filter: ['in', 'kind', 'pier', 'breakwater', 'groyne'] },\n\n\t\t// site\n\t\t...['danger_area', 'sports_center', 'university', 'college', 'school', 'hospital', 'prison', 'parking', 'bicycle_parking', 'construction'].map((t): MaplibreLayerDefinition => ({\n\t\t\tid: 'site-' + t.replace(/_/g, ''),\n\t\t\ttype: 'fill',\n\t\t\t'source-layer': 'sites',\n\t\t\tfilter: ['in', 'kind', t],\n\t\t})),\n\n\t\t// airport\n\t\t{\n\t\t\tid: 'airport-area',\n\t\t\ttype: 'fill', 'source-layer': 'street_polygons', filter: ['in', 'kind', 'runway', 'taxiway'],\n\t\t},\n\t\t{\n\t\t\tid: 'airport-taxiway:outline',\n\t\t\ttype: 'line', 'source-layer': 'streets', filter: ['==', 'kind', 'taxiway'],\n\t\t},\n\t\t{\n\t\t\tid: 'airport-runway:outline',\n\t\t\ttype: 'line', 'source-layer': 'streets', filter: ['==', 'kind', 'runway'],\n\t\t},\n\t\t{\n\t\t\tid: 'airport-taxiway',\n\t\t\ttype: 'line', 'source-layer': 'streets', filter: ['==', 'kind', 'taxiway'],\n\t\t},\n\t\t{\n\t\t\tid: 'airport-runway',\n\t\t\ttype: 'line', 'source-layer': 'streets', filter: ['==', 'kind', 'runway'],\n\t\t},\n\n\t\t// building\n\t\t{\n\t\t\tid: 'building:outline',\n\t\t\ttype: 'fill', 'source-layer': 'buildings',\n\t\t},\n\t\t{\n\t\t\tid: 'building',\n\t\t\ttype: 'fill', 'source-layer': 'buildings',\n\t\t},\n\n\t\t// tunnel-, street-, bridges-bridge\n\t\t...['tunnel', 'street', 'bridge'].flatMap((c): MaplibreLayerDefinition[] => {\n\t\t\tlet filter: LegacyFilterSpecification[];\n\t\t\tlet prefix: string;\n\t\t\tconst results: MaplibreLayerDefinition[] = [];\n\t\t\tswitch (c) {\n\t\t\t\tcase 'tunnel':\n\t\t\t\t\tfilter = [['==', 'tunnel', true]];\n\t\t\t\t\tprefix = 'tunnel-';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'street':\n\t\t\t\t\tfilter = [['!=', 'bridge', true], ['!=', 'tunnel', true]];\n\t\t\t\t\tprefix = '';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bridge':\n\t\t\t\t\tfilter = [['==', 'bridge', true]];\n\t\t\t\t\tprefix = 'bridge-';\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// bridges, above street, below bridge\n\t\t\tif (c === 'bridge') results.push({\n\t\t\t\tid: 'bridge',\n\t\t\t\ttype: 'fill',\n\t\t\t\t'source-layer': 'bridges',\n\t\t\t});\n\n\t\t\t[':outline', ''].forEach(suffix => {\n\n\t\t\t\t// pedestrian zone â no outline\n\t\t\t\tif (suffix === ':outline') results.push({\n\t\t\t\t\tid: prefix + 'street-pedestrian-zone',\n\t\t\t\t\ttype: 'fill',\n\t\t\t\t\t'source-layer': 'street_polygons',\n\t\t\t\t\tfilter: ['all',\n\t\t\t\t\t\t...filter,\n\t\t\t\t\t\t['==', 'kind', 'pedestrian'],\n\t\t\t\t\t],\n\t\t\t\t});\n\n\t\t\t\t// non-car streets\n\t\t\t\t['footway', 'steps', 'path', 'cycleway'].forEach(t => {\n\t\t\t\t\tresults.push({\n\t\t\t\t\t\tid: prefix + 'way-' + t.replace(/_/g, '') + suffix,\n\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t'source-layer': 'streets',\n\t\t\t\t\t\tfilter: ['all',\n\t\t\t\t\t\t\t...filter,\n\t\t\t\t\t\t\t['in', 'kind', t],\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// no links\n\t\t\t\tconst noDrivewayExpression: LegacyFilterSpecification = ['!=', 'service', 'driveway'];\n\t\t\t\t['track', 'pedestrian', 'service', 'living_street', 'residential', 'unclassified'].forEach(t => {\n\t\t\t\t\tresults.push({\n\t\t\t\t\t\tid: prefix + 'street-' + t.replace(/_/g, '') + suffix,\n\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t'source-layer': 'streets',\n\t\t\t\t\t\tfilter: ['all',\n\t\t\t\t\t\t\t['==', 'kind', t],\n\t\t\t\t\t\t\t...filter,\n\t\t\t\t\t\t\t...(t === 'service') ? [noDrivewayExpression] : [], // ignore driveways\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// no links, bicycle=designated\n\t\t\t\tif (suffix === '') ['track', 'pedestrian', 'service', 'living_street', 'residential', 'unclassified'].forEach(t => {\n\t\t\t\t\tresults.push({\n\t\t\t\t\t\tid: prefix + 'street-' + t.replace(/_/g, '') + '-bicycle',\n\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t'source-layer': 'streets',\n\t\t\t\t\t\tfilter: ['all',\n\t\t\t\t\t\t\t['==', 'kind', t],\n\t\t\t\t\t\t\t['==', 'bicycle', 'designated'],\n\t\t\t\t\t\t\t...filter,\n\t\t\t\t\t\t\t...(t === 'service') ? [noDrivewayExpression] : [], // ignore driveways\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// links\n\t\t\t\t['tertiary', 'secondary', 'primary', 'trunk', 'motorway'].forEach(t => {\n\t\t\t\t\tresults.push({\n\t\t\t\t\t\tid: prefix + 'street-' + t.replace(/_/g, '') + '-link' + suffix,\n\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t'source-layer': 'streets',\n\t\t\t\t\t\tfilter: ['all',\n\t\t\t\t\t\t\t...filter,\n\t\t\t\t\t\t\t['in', 'kind', t],\n\t\t\t\t\t\t\t['==', 'link', true],\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// main\n\t\t\t\t['tertiary', 'secondary', 'primary', 'trunk', 'motorway'].forEach(t => {\n\t\t\t\t\tresults.push({\n\t\t\t\t\t\tid: prefix + 'street-' + t.replace(/_/g, '') + suffix,\n\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t'source-layer': 'streets',\n\t\t\t\t\t\tfilter: ['all',\n\t\t\t\t\t\t\t...filter,\n\t\t\t\t\t\t\t['in', 'kind', t],\n\t\t\t\t\t\t\t['!=', 'link', true],\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t\t// separate outline for trains\n\t\t\t[':outline', ''].forEach(suffix => {\n\t\t\t\t// transport\n\t\t\t\t['rail', 'light_rail', 'subway', 'narrow_gauge', 'tram', 'funicular', 'monorail', 'bus_guideway', 'busway'].reverse().forEach((t) => {\n\t\t\t\t\tresults.push({\n\t\t\t\t\t\tid: prefix + 'transport-' + t.replace(/_/g, '') + suffix,\n\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t'source-layer': 'streets',\n\t\t\t\t\t\tfilter: ['all',\n\t\t\t\t\t\t\t['in', 'kind', t],\n\t\t\t\t\t\t\t['!has', 'service'],\n\t\t\t\t\t\t\t...filter,\n\t\t\t\t\t\t],\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tif (c === 'street') {\n\t\t\t\t\t// aerialway, no bridges, above street evel\n\t\t\t\t\t['cable_car', 'gondola', 'goods', 'chair_lift', 'drag_lift', 't-bar', 'j-bar', 'platter', 'rope-tow'].reverse().forEach((t) => {\n\t\t\t\t\t\tresults.push({\n\t\t\t\t\t\t\tid: 'aerialway-' + t.replace(/[_-]+/g, '') + suffix,\n\t\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t\t'source-layer': 'aerialways',\n\t\t\t\t\t\t\tfilter: ['all',\n\t\t\t\t\t\t\t\t...filter,\n\t\t\t\t\t\t\t\t['in', 'kind', t],\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t// ferry â only on street level\n\t\t\t\t\tresults.push({\n\t\t\t\t\t\tid: 'transport-ferry' + suffix,\n\t\t\t\t\t\ttype: 'line',\n\t\t\t\t\t\t'source-layer': 'ferries',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn results;\n\t\t}),\n\n\t\t// poi, one layer per type\n\t\t...['amenity', 'leisure', 'tourism', 'shop', 'man_made', 'historic', 'emergency', 'highway', 'office'].map((key): MaplibreLayerDefinition => ({\n\t\t\tid: 'poi-' + key,\n\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'pois',\n\t\t\tfilter: ['to-boolean', ['get', key]],\n\t\t})),\n\n\t\t// boundary\n\t\t...[':outline', ''].flatMap((suffix): MaplibreLayerDefinition[] => [\n\t\t\t{\n\t\t\t\tid: 'boundary-country' + suffix,\n\t\t\t\ttype: 'line',\n\t\t\t\t'source-layer': 'boundaries',\n\t\t\t\tfilter: ['all',\n\t\t\t\t\t['==', 'admin_level', 2],\n\t\t\t\t\t['!=', 'maritime', true],\n\t\t\t\t\t['!=', 'disputed', true],\n\t\t\t\t\t['!=', 'coastline', true],\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'boundary-country-disputed' + suffix,\n\t\t\t\ttype: 'line',\n\t\t\t\t'source-layer': 'boundaries',\n\t\t\t\tfilter: ['all',\n\t\t\t\t\t['==', 'admin_level', 2],\n\t\t\t\t\t['==', 'disputed', true],\n\t\t\t\t\t['!=', 'maritime', true],\n\t\t\t\t\t['!=', 'coastline', true],\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'boundary-country-maritime' + suffix,\n\t\t\t\ttype: 'line',\n\t\t\t\t'source-layer': 'boundaries',\n\t\t\t\tfilter: ['all',\n\t\t\t\t\t['==', 'admin_level', 2],\n\t\t\t\t\t['==', 'maritime', true],\n\t\t\t\t\t['!=', 'disputed', true],\n\t\t\t\t\t['!=', 'coastline', true],\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'boundary-state' + suffix,\n\t\t\t\ttype: 'line',\n\t\t\t\t'source-layer': 'boundaries',\n\t\t\t\tfilter: ['all',\n\t\t\t\t\t['==', 'admin_level', 4],\n\t\t\t\t\t['!=', 'maritime', true],\n\t\t\t\t\t['!=', 'disputed', true],\n\t\t\t\t\t['!=', 'coastline', true],\n\t\t\t\t],\n\t\t\t},\n\t\t]),\n\n\t\t// label-address\n\t\t{\n\t\t\tid: 'label-address-housenumber',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'addresses',\n\t\t\tfilter: ['has', 'housenumber'],\n\t\t\tlayout: { 'text-field': '{housenumber}' },\n\t\t},\n\n\t\t// label-motorway\n\t\t{\n\t\t\tid: 'label-motorway-exit',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'street_labels_points', // docs say `streets_labels_points`, but layer is actually called `street_labels_points`\n\t\t\tfilter: ['==', 'kind', 'motorway_junction'],\n\t\t\tlayout: { 'text-field': '{ref}' },\n\t\t\t// FIXME shield\n\t\t},\n\t\t{\n\t\t\tid: 'label-motorway-shield',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'street_labels',\n\t\t\tfilter: ['==', 'kind', 'motorway'],\n\t\t\tlayout: { 'text-field': '{ref}' },\n\t\t\t// FIXME shield\n\t\t},\n\n\t\t// label-street\n\t\t...['pedestrian', 'living_street', 'residential', 'unclassified', 'tertiary', 'secondary', 'primary', 'trunk'].map((t: string): MaplibreLayerDefinition => ({\n\t\t\tid: 'label-street-' + t.replace(/_/g, ''),\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'street_labels',\n\t\t\tfilter: ['==', 'kind', t],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t})),\n\n\t\t// label-place of small places\n\t\t...[ /*'locality', 'island', 'farm', 'dwelling',*/ 'neighbourhood', 'quarter', 'suburb', 'hamlet', 'village', 'town'].map((id: string): MaplibreLayerDefinition => ({\n\t\t\tid: 'label-place-' + id.replace(/_/g, ''),\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'place_labels',\n\t\t\tfilter: ['==', 'kind', id],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t})),\n\n\t\t// label-boundary\n\t\t{\n\t\t\tid: 'label-boundary-state',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'boundary_labels',\n\t\t\tfilter: ['in', 'admin_level', 4, '4'],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t},\n\n\t\t// label-place-* of large places\n\t\t...['city', 'state_capital', 'capital'].map((id: string): MaplibreLayerDefinition => ({\n\t\t\tid: 'label-place-' + id.replace(/_/g, ''),\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'place_labels',\n\t\t\tfilter: ['==', 'kind', id],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t})),\n\n\t\t{\n\t\t\tid: 'label-boundary-country-small',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'boundary_labels',\n\t\t\tfilter: ['all',\n\t\t\t\t['in', 'admin_level', 2, '2'],\n\t\t\t\t['<=', 'way_area', 10000000],\n\t\t\t],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t},\n\t\t{\n\t\t\tid: 'label-boundary-country-medium',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'boundary_labels',\n\t\t\tfilter: ['all',\n\t\t\t\t['in', 'admin_level', 2, '2'],\n\t\t\t\t['<', 'way_area', 90000000],\n\t\t\t\t['>', 'way_area', 10000000],\n\t\t\t],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t},\n\t\t{\n\t\t\tid: 'label-boundary-country-large',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'boundary_labels',\n\t\t\tfilter: ['all',\n\t\t\t\t['in', 'admin_level', 2, '2'],\n\t\t\t\t['>=', 'way_area', 90000000],\n\t\t\t],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t},\n\n\t\t// marking\n\t\t{\n\t\t\tid: 'marking-oneway', // streets â oneway\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'streets',\n\t\t\tfilter: ['all',\n\t\t\t\t['==', 'oneway', true],\n\t\t\t\t['in', 'kind', 'trunk', 'primary', 'secondary', 'tertiary', 'unclassified', 'residential', 'living_street'],\n\t\t\t],\n\t\t\tlayout: {\n\t\t\t\t'symbol-placement': 'line',\n\t\t\t\t'symbol-spacing': 175,\n\t\t\t\t'icon-rotate': 90,\n\t\t\t\t'icon-rotation-alignment': 'map',\n\t\t\t\t'icon-padding': 5,\n\t\t\t\t'symbol-avoid-edges': true,\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tid: 'marking-oneway-reverse', // oneway_reverse\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'streets',\n\t\t\tfilter: ['all',\n\t\t\t\t['==', 'oneway_reverse', true],\n\t\t\t\t['in', 'kind', 'trunk', 'primary', 'secondary', 'tertiary', 'unclassified', 'residential', 'living_street'],\n\t\t\t],\n\t\t\tlayout: {\n\t\t\t\t'symbol-placement': 'line',\n\t\t\t\t'symbol-spacing': 75,\n\t\t\t\t'icon-rotate': -90,\n\t\t\t\t'icon-rotation-alignment': 'map',\n\t\t\t\t'icon-padding': 5,\n\t\t\t\t'symbol-avoid-edges': true,\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tid: 'marking-bicycle', // bicycle=designated or kind=cycleway\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'streets',\n\t\t\tfilter: ['all',\n\t\t\t\t['==', 'bicycle', 'designated'],\n\t\t\t\t['==', 'kind', 'cycleway'],\n\t\t\t],\n\t\t\tlayout: {\n\t\t\t\t'symbol-placement': 'line',\n\t\t\t\t'symbol-spacing': 50,\n\t\t\t},\n\t\t},\n\n\t\t// symbol\n\t\t{\n\t\t\tid: 'symbol-transit-bus',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'public_transport',\n\t\t\tfilter: ['==', 'kind', 'bus_stop'],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t},\n\t\t{\n\t\t\tid: 'symbol-transit-tram',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'public_transport',\n\t\t\tfilter: ['==', 'kind', 'tram_stop'],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t},\n\t\t{\n\t\t\tid: 'symbol-transit-subway',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'public_transport',\n\t\t\tfilter: ['all',\n\t\t\t\t['in', 'kind', 'station', 'halt'],\n\t\t\t\t['==', 'station', 'subway'],\n\t\t\t],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t},\n\t\t{\n\t\t\tid: 'symbol-transit-lightrail',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'public_transport',\n\t\t\tfilter: ['all',\n\t\t\t\t['in', 'kind', 'station', 'halt'],\n\t\t\t\t['==', 'station', 'light_rail'],\n\t\t\t],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t},\n\t\t{\n\t\t\tid: 'symbol-transit-station',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'public_transport',\n\t\t\tfilter: ['all',\n\t\t\t\t['in', 'kind', 'station', 'halt'],\n\t\t\t\t['!in', 'station', 'light_rail', 'subway'],\n\t\t\t],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t},\n\t\t{\n\t\t\tid: 'symbol-transit-airfield',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'public_transport',\n\t\t\tfilter: ['all',\n\t\t\t\t['==', 'kind', 'aerodrome'],\n\t\t\t\t['!has', 'iata'],\n\t\t\t],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t},\n\t\t{\n\t\t\tid: 'symbol-transit-airport',\n\t\t\ttype: 'symbol',\n\t\t\t'source-layer': 'public_transport',\n\t\t\tfilter: ['all',\n\t\t\t\t['==', 'kind', 'aerodrome'],\n\t\t\t\t['has', 'iata'],\n\t\t\t],\n\t\t\tlayout: { 'text-field': nameField },\n\t\t},\n\t];\n}","/* eslint-disable @typescript-eslint/naming-convention */\n\nimport StyleBuilder from '../style_builder/style_builder.js';\nimport type { StyleRules, StyleRulesOptions } from '../style_builder/types.js';\n\nexport default class Colorful extends StyleBuilder<Colorful> {\n\tpublic readonly name: string = 'Colorful';\n\n\tpublic defaultFonts = {\n\t\tregular: 'noto_sans_regular',\n\t\tbold: 'noto_sans_bold',\n\t};\n\n\tpublic defaultColors = {\n\n\t\t/** Color for land areas on the map. */\n\t\tland: '#F9F4EE',\n\n\t\t/** Color for water bodies like lakes and rivers. */\n\t\twater: '#BEDDF3',\n\n\t\t/** Color for glacier areas, usually shown as white. */\n\t\tglacier: '#FFFFFF',\n\n\t\t/** Color for wooded or forested areas. */\n\t\twood: '#66AA44',\n\n\t\t/** Color for grasslands or open fields. */\n\t\tgrass: '#D8E8C8',\n\n\t\t/** Color for parks and recreational areas. */\n\t\tpark: '#D9D9A5',\n\n\t\t/** Color for streets and roads on the map. */\n\t\tstreet: '#FFFFFF',\n\n\t\t/** Background color for streets. */\n\t\tstreetbg: '#CFCDCA',\n\n\t\t/** Color for major highways or motorways. */\n\t\tmotorway: '#FFCC88',\n\n\t\t/** Background color for motorways. */\n\t\tmotorwaybg: '#E9AC77',\n\n\t\t/** Color for trunk roads. */\n\t\ttrunk: '#FFEEAA',\n\n\t\t/** Background color for trunk roads. */\n\t\ttrunkbg: '#E9AC77',\n\n\t\t/** Background color for buildings. */\n\t\tbuildingbg: '#DFDBD7',\n\n\t\t/** Primary color for buildings. */\n\t\tbuilding: '#F2EAE2',\n\n\t\t/** Color used for boundaries. */\n\t\tboundary: '#A6A6C8',\n\n\t\t/** Color used for disputed boundaries. */\n\t\tdisputed: '#BEBCCF',\n\n\t\t/** Color used for residential areas. */\n\t\tresidential: '#EAE6E133',\n\n\t\t/** Color used for commercial areas. */\n\t\tcommercial: '#F7DEED40',\n\n\t\t/** Color used for industrial areas. */\n\t\tindustrial: '#FFF4C255',\n\n\t\t/** Color used for footpaths and pedestrian areas. */\n\t\tfoot: '#FBEBFF',\n\n\t\t/** Primary color used for labels. */\n\t\tlabel: '#333344',\n\n\t\t/** Color used for label halos. */\n\t\tlabelHalo: '#FFFFFFCC',\n\n\t\t/** Color used for shields on maps. */\n\t\tshield: '#FFFFFF',\n\n\t\t/** Color used for agriculture areas. */\n\t\tagriculture: '#F0E7D1',\n\n\t\t/** Color used for railways. */\n\t\trail: '#B1BBC4',\n\n\t\t/** Color used for subways and underground systems. */\n\t\tsubway: '#A6B8C7',\n\n\t\t/** Color used for cycle paths. */\n\t\tcycle: '#EFF9FF',\n\n\t\t/** Color used for waste areas. */\n\t\twaste: '#DBD6BD',\n\n\t\t/** Color used for burial and cemetery areas. */\n\t\tburial: '#DDDBCA',\n\n\t\t/** Color used for sand areas like beaches. */\n\t\tsand: '#FAFAED',\n\n\t\t/** Color used for rocky terrain. */\n\t\trock: '#E0E4E5',\n\n\t\t/** Color used for leisure areas like parks and gardens. */\n\t\tleisure: '#E7EDDE',\n\n\t\t/** Color used for wetland areas like marshes. */\n\t\twetland: '#D3E6DB',\n\n\t\t/** Color used for various symbols on the map. */\n\t\tsymbol: '#66626A',\n\n\t\t/** Color indicating danger or warning areas. */\n\t\tdanger: '#FF0000',\n\n\t\t/** Color used for prison areas. */\n\t\tprison: '#FDF2FC',\n\n\t\t/** Color used for parking areas. */\n\t\tparking: '#EBE8E6',\n\n\t\t/** Color used for construction sites. */\n\t\tconstruction: '#A9A9A9',\n\n\t\t/** Color used for educational facilities. */\n\t\teducation: '#FFFF80',\n\n\t\t/** Color used for hospitals and medical facilities. */\n\t\thospital: '#FF6666',\n\n\t\t/** Color used for points of interest. */\n\t\tpoi: '#555555',\n\t};\n\n\tprotected getStyleRules(options: StyleRulesOptions<Colorful>): StyleRules {\n\t\tconst { colors, fonts } = options;\n\t\treturn {\n\t\t\t// background\n\t\t\t'background': {\n\t\t\t\tcolor: colors.land,\n\t\t\t},\n\n\t\t\t// boundary\n\t\t\t'boundary-{country,state}:outline': {\n\t\t\t\tcolor: colors.land.lighten(0.1),\n\t\t\t\tlineBlur: 1,\n\t\t\t\tlineCap: 'round',\n\t\t\t\tlineJoin: 'round',\n\t\t\t},\n\t\t\t'boundary-{country,state}': {\n\t\t\t\tcolor: colors.boundary,\n\t\t\t\tlineCap: 'round',\n\t\t\t\tlineJoin: 'round',\n\t\t\t},\n\t\t\t'boundary-country{-disputed,}:outline': {\n\t\t\t\tsize: { 2: 0, 3: 2, 10: 8 },\n\t\t\t\topacity: 0.75,\n\t\t\t\tcolor: colors.land.lighten(0.05),\n\t\t\t},\n\t\t\t'boundary-country{-disputed,}': {\n\t\t\t\tsize: { 2: 0, 3: 1, 10: 4 },\n\t\t\t},\n\t\t\t'boundary-country-disputed': {\n\t\t\t\tcolor: colors.disputed,\n\t\t\t\tlineDasharray: [2, 1],\n\t\t\t\tlineCap: 'square',\n\t\t\t},\n\t\t\t'boundary-state:outline': {\n\t\t\t\tsize: { 7: 0, 8: 2, 10: 4 },\n\t\t\t\topacity: 0.75,\n\t\t\t},\n\t\t\t'boundary-state': {\n\t\t\t\tsize: { 7: 0, 8: 1, 10: 2 },\n\t\t\t},\n\n\t\t\t// water\n\n\t\t\t'water-*': {\n\t\t\t\tcolor: colors.water,\n\t\t\t\tlineCap: 'round',\n\t\t\t\tlineJoin: 'round',\n\t\t\t},\n\t\t\t'water-area': {\n\t\t\t\topacity: { 4: 0, 6: 1 },\n\t\t\t},\n\t\t\t'water-area-*': {\n\t\t\t\topacity: { 4: 0, 6: 1 },\n\t\t\t},\n\t\t\t'water-{pier,dam}-area': {\n\t\t\t\tcolor: colors.land,\n\t\t\t\topacity: { 12: 0, 13: 1 },\n\t\t\t},\n\t\t\t'water-river': {\n\t\t\t\tlineWidth: { 9: 0, 10: 3, 15: 5, 17: 9, 18: 20, 20: 60 },\n\t\t\t},\n\t\t\t'water-canal': {\n\t\t\t\tlineWidth: { 9: 0, 10: 2, 15: 4, 17: 8, 18: 17, 20: 50 },\n\t\t\t},\n\t\t\t'water-stream': {\n\t\t\t\tlineWidth: { 13: 0, 14: 1, 15: 2, 17: 6, 18: 12, 20: 30 },\n\t\t\t},\n\t\t\t'water-ditch': {\n\t\t\t\tlineWidth: { 14: 0, 15: 1, 17: 4, 18: 8, 20: 20 },\n\t\t\t},\n\n\t\t\t// land\n\n\t\t\t'land-*': {\n\t\t\t\tcolor: colors.land,\n\t\t\t},\n\t\t\t'land-glacier': {\n\t\t\t\tcolor: colors.glacier,\n\t\t\t},\n\t\t\t'land-forest': {\n\t\t\t\tcolor: colors.wood,\n\t\t\t\topacity: { 7: 0, 8: 0.1 },\n\t\t\t},\n\t\t\t'land-grass': {\n\t\t\t\tcolor: colors.grass,\n\t\t\t\topacity: { 11: 0, 12: 1 },\n\t\t\t},\n\t\t\t'land-{park,garden,vegetation}': {\n\t\t\t\tcolor: colors.park,\n\t\t\t\topacity: { 11: 0, 12: 1 },\n\t\t\t},\n\t\t\t'land-agriculture': {\n\t\t\t\tcolor: colors.agriculture,\n\t\t\t\topacity: { 10: 0, 11: 1 },\n\t\t\t},\n\t\t\t'land-residential': {\n\t\t\t\tcolor: colors.residential,\n\t\t\t\topacity: { 10: 0, 11: 1 },\n\t\t\t},\n\t\t\t'land-commercial': {\n\t\t\t\tcolor: colors.commercial,\n\t\t\t\topacity: { 10: 0, 11: 1 },\n\t\t\t},\n\t\t\t'land-industrial': {\n\t\t\t\tcolor: colors.industrial,\n\t\t\t\topacity: { 10: 0, 11: 1 },\n\t\t\t},\n\t\t\t'land-waste': {\n\t\t\t\tcolor: colors.waste,\n\t\t\t\topacity: { 10: 0, 11: 1 },\n\t\t\t},\n\t\t\t'land-burial': {\n\t\t\t\tcolor: colors.burial,\n\t\t\t\topacity: { 13: 0, 14: 1 },\n\t\t\t},\n\t\t\t'land-leisure': {\n\t\t\t\tcolor: colors.leisure,\n\t\t\t},\n\t\t\t'land-rock': {\n\t\t\t\tcolor: colors.rock,\n\t\t\t},\n\t\t\t'land-sand': {\n\t\t\t\tcolor: colors.sand,\n\t\t\t},\n\t\t\t'land-wetland': {\n\t\t\t\tcolor: colors.wetland,\n\t\t\t},\n\n\t\t\t// site\n\n\t\t\t'site-dangerarea': {\n\t\t\t\tcolor: colors.danger,\n\t\t\t\tfillOutlineColor: colors.danger,\n\t\t\t\topacity: 0.3,\n\t\t\t\timage: 'pattern-warning',\n\t\t\t},\n\t\t\t'site-hospital': {\n\t\t\t\tcolor: colors.hospital,\n\t\t\t\topacity: 0.1,\n\t\t\t},\n\t\t\t'site-prison': {\n\t\t\t\tcolor: colors.prison,\n\t\t\t\timage: 'pattern-striped',\n\t\t\t\topacity: 0.1,\n\t\t\t},\n\t\t\t'site-construction': {\n\t\t\t\tcolor: colors.construction,\n\t\t\t\timage: 'pattern-hatched_thin',\n\t\t\t\topacity: 0.1,\n\t\t\t},\n\t\t\t'site-{university,college,school}': {\n\t\t\t\tcolor: colors.education,\n\t\t\t\topacity: 0.1,\n\t\t\t},\n\t\t\t'site-{bicycleparking,parking}': {\n\t\t\t\tcolor: colors.parking,\n\t\t\t},\n\n\t\t\t// building\n\n\t\t\t'building:outline': {\n\t\t\t\tcolor: colors.buildingbg,\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t},\n\t\t\t'building': { // fake 2.5d with translate\n\t\t\t\tcolor: colors.building,\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t\tfillTranslate: [-2, -2],\n\t\t\t},\n\n\t\t\t// airport\n\t\t\t'airport-area': {\n\t\t\t\tcolor: colors.street,\n\t\t\t\topacity: 0.5,\n\t\t\t},\n\t\t\t'airport-{runway,taxiway}:outline': {\n\t\t\t\tcolor: colors.streetbg,\n\t\t\t\tlineJoin: 'round',\n\t\t\t},\n\t\t\t'airport-{runway,taxiway}': {\n\t\t\t\tcolor: colors.street,\n\t\t\t\tlineJoin: 'round',\n\t\t\t},\n\t\t\t'airport-runway:outline': {\n\t\t\t\tsize: { 11: 0, 12: 6, 13: 9, 14: 16, 15: 24, 16: 40, 17: 100, 18: 160, 20: 300 },\n\t\t\t},\n\t\t\t'airport-runway': {\n\t\t\t\tsize: { 11: 0, 12: 5, 13: 8, 14: 14, 15: 22, 16: 38, 17: 98, 18: 158, 20: 298 },\n\t\t\t\topacity: { 11: 0, 12: 1 },\n\t\t\t},\n\t\t\t'airport-taxiway:outline': {\n\t\t\t\tsize: { 13: 0, 14: 2, 15: 10, 16: 14, 18: 20, 20: 40 },\n\t\t\t},\n\t\t\t'airport-taxiway': {\n\t\t\t\tsize: { 13: 0, 14: 1, 15: 8, 16: 12, 18: 18, 20: 36 },\n\t\t\t\topacity: { 13: 0, 14: 1 },\n\t\t\t},\n\n\t\t\t// bridge\n\n\t\t\t'bridge': {\n\t\t\t\tcolor: colors.land.darken(0.02),\n\t\t\t\tfillAntialias: true,\n\t\t\t\topacity: 0.8,\n\t\t\t},\n\n\t\t\t// street\n\n\t\t\t// colors and joins\n\t\t\t'{tunnel-,bridge-,}street-*:outline': {\n\t\t\t\tcolor: colors.streetbg,\n\t\t\t\tlineJoin: 'round',\n\t\t\t},\n\t\t\t'{tunnel-,bridge-,}street-*': {\n\t\t\t\tcolor: colors.street,\n\t\t\t\tlineJoin: 'round',\n\t\t\t},\n\t\t\t'tunnel-street-*:outline': {\n\t\t\t\tcolor: colors.street.darken(0.13),\n\t\t\t},\n\t\t\t'tunnel-street-*': {\n\t\t\t\tcolor: colors.street.darken(0.03),\n\t\t\t},\n\t\t\t'bridge-street-*:outline': {\n\t\t\t\tcolor: colors.street.darken(0.15),\n\t\t\t},\n\n\t\t\t// streets and ways, line caps\n\t\t\t'{tunnel-,}{street,way}-*': {\n\t\t\t\tlineCap: 'round',\n\t\t\t},\n\t\t\t'{tunnel-,}{street,way}-*:outline': {\n\t\t\t\tlineCap: 'round',\n\t\t\t},\n\t\t\t'bridge-{street,way}-*': {\n\t\t\t\tlineCap: 'butt',\n\t\t\t},\n\t\t\t'bridge-{street,way}-*:outline': {\n\t\t\t\tlineCap: 'butt',\n\t\t\t},\n\n\t\t\t// special color: motorway\n\t\t\t'{bridge-,}street-motorway{-link,}:outline': {\n\t\t\t\tcolor: colors.motorwaybg,\n\t\t\t},\n\t\t\t'{bridge-,}street-motorway{-link,}': {\n\t\t\t\tcolor: colors.motorway,\n\t\t\t},\n\t\t\t'{bridge-,}street-{trunk,primary,secondary}{-link,}:outline': {\n\t\t\t\tcolor: colors.trunkbg,\n\t\t\t},\n\t\t\t'{bridge-,}street-{trunk,primary,secondary}{-link,}': {\n\t\t\t\tcolor: colors.trunk,\n\t\t\t},\n\t\t\t'tunnel-street-motorway{-link,}:outline': {\n\t\t\t\tcolor: colors.motorwaybg.lighten(0.05),\n\t\t\t\tlineDasharray: [1, 0.3],\n\t\t\t},\n\t\t\t'tunnel-street-motorway{-link,}': {\n\t\t\t\tcolor: colors.motorway.lighten(0.1),\n\t\t\t\tlineCap: 'butt',\n\t\t\t},\n\t\t\t'tunnel-street-{trunk,primary,secondary}{-link,}:outline': {\n\t\t\t\tcolor: colors.trunkbg.lighten(0.05),\n\t\t\t\tlineDasharray: [1, 0.3],\n\t\t\t},\n\t\t\t'tunnel-street-{trunk,primary,secondary}{-link,}': {\n\t\t\t\tcolor: colors.trunk.lighten(0.1),\n\t\t\t\tlineCap: 'butt',\n\t\t\t},\n\n\t\t\t// motorway\n\t\t\t'{bridge-,tunnel-,}street-motorway:outline': {\n\t\t\t\tsize: { 5: 0, 6: 2, 10: 5, 14: 5, 16: 14, 18: 38, 19: 84, 20: 168 },\n\t\t\t},\n\t\t\t'{bridge-,tunnel-,}street-motorway': {\n\t\t\t\tsize: { 5: 0, 6: 1, 10: 4, 14: 4, 16: 12, 18: 36, 19: 80, 20: 160 },\n\t\t\t\topacity: { 5: 0, 6: 1 },\n\t\t\t},\n\n\t\t\t// trunk\n\t\t\t'{bridge-,tunnel-,}street-trunk:outline': {\n\t\t\t\tsize: { 7: 0, 8: 2, 10: 4, 14: 6, 16: 12, 18: 36, 19: 74, 20: 144 },\n\t\t\t},\n\t\t\t'{bridge-,tunnel-,}street-trunk': {\n\t\t\t\tsize: { 7: 0, 8: 1, 10: 3, 14: 5, 16: 10, 18: 34, 19: 70, 20: 140 },\n\t\t\t\topacity: { 7: 0, 8: 1 },\n\t\t\t},\n\n\t\t\t// primary\n\t\t\t'{bridge-,tunnel-,}street-primary:outline': {\n\t\t\t\tsize: { 8: 0, 9: 1, 10: 4, 14: 6, 16: 12, 18: 36, 19: 74, 20: 144 },\n\t\t\t},\n\t\t\t'{bridge-,tunnel-,}street-primary': {\n\t\t\t\tsize: { 8: 0, 9: 2, 10: 3, 14: 5, 16: 10, 18: 34, 19: 70, 20: 140 },\n\t\t\t\topacity: { 8: 0, 9: 1 },\n\t\t\t},\n\n\t\t\t// secondary\n\t\t\t'{bridge-,tunnel-,}street-secondary:outline': {\n\t\t\t\tsize: { 11: 2, 14: 5, 16: 8, 18: 30, 19: 68, 20: 138 },\n\t\t\t\topacity: { 11: 0, 12: 1 },\n\t\t\t},\n\t\t\t'{bridge-,tunnel-,}street-secondary': {\n\t\t\t\tsize: { 11: 1, 14: 4, 16: 6, 18: 28, 19: 64, 20: 130 },\n\t\t\t\topacity: { 11: 0, 12: 1 },\n\t\t\t},\n\n\t\t\t// links\n\t\t\t'{bridge-,tunnel-,}street-motorway-link:outline': {\n\t\t\t\tminzoom: 12,\n\t\t\t\tsize: { 12: 2, 14: 3, 16: 7, 18: 14, 20: 40 },\n\t\t\t\t//\t\topacity: { 12: 0, 13: 1 }, // no fade-in because those are merged in lower zooms\n\t\t\t},\n\t\t\t'{bridge-,tunnel-,}street-motorway-link': {\n\t\t\t\tminzoom: 12,\n\t\t\t\tsize: { 12: 1, 14: 2, 16: 5, 18: 12, 20: 38 },\n\t\t\t\t//\t\topacity: { 12: 0, 13: 1 }, // no fade-in because those are merged in lower zooms\n\t\t\t},\n\t\t\t'{bridge-,tunnel-,}street-{trunk,primary,secondary}-link:outline': {\n\t\t\t\tminzoom: 13,\n\t\t\t\tsize: { 12: 2, 14: 3, 16: 7, 18: 14, 20: 40 },\n\t\t\t\t//\t\topacity: { 13: 0, 14: 1 }, // no fade-in because those are merged in lower zooms\n\t\t\t},\n\t\t\t'{bridge-,tunnel-,}street-{trunk,primary,secondary}-link': {\n\t\t\t\tminzoom: 13,\n\t\t\t\tsize: { 12: 1, 14: 2, 16: 5, 18: 12, 20: 38 },\n\t\t\t\t//\t\topacity: { 13: 0, 14: 1 }, // no fade-in because those are merged in lower zooms\n\t\t\t},\n\n\t\t\t// minor streets\n\t\t\t'{bridge-,tunnel-,}street-{tertiary,tertiary-link,unclassified,residential,livingstreet,pedestrian}*:outline': {\n\t\t\t\tsize: { 12: 2, 14: 3, 16: 6, 18: 26, 19: 64, 20: 128 },\n\t\t\t\topacity: { 12: 0, 13: 1 },\n\t\t\t},\n\t\t\t'{bridge-,tunnel-,}street-{tertiary,tertiary-link,unclassified,residential,livingstreet,pedestrian}*': {\n\t\t\t\tsize: { 12: 1, 14: 2, 16: 5, 18: 24, 19: 60, 20: 120 },\n\t\t\t\topacity: { 12: 0, 13: 1 },\n\t\t\t},\n\n\t\t\t// service and tracks\n\t\t\t'{bridge-,tunnel-,}street-{service,track}:outline': {\n\t\t\t\tsize: { 14: 2, 16: 4, 18: 18, 19: 48, 20: 96 },\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t},\n\t\t\t'{bridge-,tunnel-,}street-{service,track}': {\n\t\t\t\tsize: { 14: 1, 16: 3, 18: 16, 19: 44, 20: 88 },\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t},\n\n\t\t\t// ways\n\t\t\t'{bridge-,tunnel-,}way-*:outline': {\n\t\t\t\tsize: { 15: 0, 16: 5, 18: 7, 19: 12, 20: 22 },\n\t\t\t\tminzoom: 15,\n\t\t\t},\n\t\t\t'{bridge-,tunnel-,}way-*': {\n\t\t\t\tsize: { 15: 0, 16: 4, 18: 6, 19: 10, 20: 20 },\n\t\t\t\tminzoom: 15,\n\t\t\t},\n\n\t\t\t// foot\n\t\t\t'{bridge-,}way-{footway,path,steps}:outline': {\n\t\t\t\tcolor: colors.foot.darken(0.1),\n\t\t\t},\n\t\t\t'{bridge-,}way-{footway,path,steps}': {\n\t\t\t\tcolor: colors.foot.lighten(0.02),\n\t\t\t},\n\t\t\t'tunnel-way-{footway,path,steps}:outline': {\n\t\t\t\tcolor: colors.foot.darken(0.1).desaturate(0.5),\n\t\t\t},\n\t\t\t'tunnel-way-{footway,path,steps}': {\n\t\t\t\tcolor: colors.foot.darken(0.02).desaturate(0.5),\n\t\t\t\tlineDasharray: [1, 0.2],\n\t\t\t},\n\n\t\t\t// cycleway\n\t\t\t'{bridge-,}way-cycleway:outline': {\n\t\t\t\tcolor: colors.cycle.darken(0.1),\n\t\t\t},\n\t\t\t'{bridge-,}way-cycleway': {\n\t\t\t\tcolor: colors.cycle,\n\t\t\t},\n\t\t\t'tunnel-way-cycleway:outline': {\n\t\t\t\tcolor: colors.cycle.darken(0.1).desaturate(0.5),\n\t\t\t},\n\t\t\t'tunnel-way-cycleway': {\n\t\t\t\tcolor: colors.cycle.darken(0.02).desaturate(0.5),\n\t\t\t\tlineDasharray: [1, 0.2],\n\t\t\t},\n\n\t\t\t// cycle streets overlay\n\t\t\t'{bridge-,tunnel-,}street-{tertiary,tertiary-link,unclassified,residential,livingstreet,pedestrian}-bicycle': {\n\t\t\t\tlineCap: 'butt',\n\t\t\t\tcolor: colors.cycle,\n\t\t\t},\n\n\t\t\t// pedestrian\n\t\t\t'street-pedestrian': {\n\t\t\t\tsize: { 12: 1, 14: 2, 16: 5, 18: 24, 19: 60, 20: 120 },\n\t\t\t\topacity: { 13: 0, 14: 1 },\n\t\t\t\tcolor: colors.foot,\n\t\t\t},\n\t\t\t'street-pedestrian-zone': {\n\t\t\t\tcolor: colors.foot.lighten(0.02).fade(0.75),\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t},\n\n\t\t\t// rail, lightrail\n\t\t\t'{tunnel-,bridge-,}transport-{rail,lightrail}:outline': {\n\t\t\t\tcolor: colors.rail,\n\t\t\t\tsize: { 8: 1, 13: 1, 15: 3, 16: 4, 18: 8, 19: 11, 20: 14 },\n\t\t\t},\n\t\t\t'{tunnel-,bridge-,}transport-{rail,lightrail}': {\n\t\t\t\tcolor: colors.rail.lighten(0.25),\n\t\t\t\tsize: { 8: 1, 13: 1, 15: 2, 16: 3, 18: 6, 19: 8, 20: 10 },\n\t\t\t\tlineDasharray: [2, 2],\n\t\t\t},\n\t\t\t// subway\n\t\t\t'{tunnel-,bridge-,}transport-subway:outline': {\n\t\t\t\tcolor: colors.subway,\n\t\t\t\tsize: { 11: 0, 12: 1, 15: 3, 16: 3, 18: 6, 19: 8, 20: 10 },\n\t\t\t},\n\t\t\t'{tunnel-,bridge-,}transport-subway': {\n\t\t\t\tcolor: colors.subway.lighten(0.25),\n\t\t\t\tsize: { 11: 0, 12: 1, 15: 2, 16: 2, 18: 5, 19: 6, 20: 8 },\n\t\t\t\tlineDasharray: [2, 2],\n\t\t\t},\n\t\t\t// monorail\n\t\t\t'{tunnel-,bridge-,}transport-{tram,narrowgauge,funicular,monorail}:outline': {\n\t\t\t\tminzoom: 15,\n\t\t\t\tcolor: colors.rail,\n\t\t\t\tsize: { 15: 0, 16: 5, 18: 7, 20: 20 },\n\t\t\t\tlineDasharray: [0.1, 0.5],\n\t\t\t},\n\t\t\t'{tunnel-,bridge-,}transport-{tram,narrowgauge,funicular,monorail}': {\n\t\t\t\tminzoom: 13,\n\t\t\t\tsize: { 13: 0, 16: 1, 17: 2, 18: 3, 20: 5 },\n\t\t\t\tcolor: colors.rail,\n\t\t\t},\n\n\t\t\t// bridge\n\t\t\t'{bridge-,}transport-rail:outline': {\n\t\t\t\topacity: { 8: 0, 9: 1 },\n\t\t\t},\n\t\t\t'{bridge-,}transport-rail': {\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t},\n\t\t\t'{bridge-,}transport-{lightrail,subway}:outline': {\n\t\t\t\topacity: { 11: 0, 12: 1 },\n\t\t\t},\n\t\t\t'{bridge-,}transport-{lightrail,subway}': {\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t},\n\n\t\t\t// tunnel\n\t\t\t'tunnel-transport-rail:outline': {\n\t\t\t\topacity: { 8: 0, 9: 0.3 },\n\t\t\t},\n\t\t\t'tunnel-transport-rail': {\n\t\t\t\topacity: { 14: 0, 15: 0.3 },\n\t\t\t},\n\t\t\t'tunnel-transport-{lightrail,subway}:outline': {\n\t\t\t\topacity: { 11: 0, 12: 0.5 },\n\t\t\t},\n\t\t\t'tunnel-transport-{lightrail,subway}': {\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t},\n\n\t\t\t// ferry\n\t\t\t'transport-ferry': {\n\t\t\t\tminzoom: 10,\n\t\t\t\tcolor: colors.water.darken(0.1),\n\t\t\t\tsize: { 10: 1, 13: 2, 14: 3, 16: 4, 17: 6 },\n\t\t\t\topacity: { 10: 0, 11: 1 },\n\t\t\t\tlineDasharray: [1, 1],\n\t\t\t},\n\n\t\t\t// labels\n\t\t\t'label-boundary-*': {\n\t\t\t\tcolor: colors.label,\n\t\t\t\tfont: fonts.regular,\n\t\t\t\ttextTransform: 'uppercase',\n\t\t\t\ttextHaloColor: colors.labelHalo,\n\t\t\t\ttextHaloWidth: 2,\n\t\t\t\ttextHaloBlur: 1,\n\t\t\t\ttextAnchor: 'top',\n\t\t\t\ttextOffset: [0, 0.2],\n\t\t\t\ttextPadding: 0,\n\t\t\t\ttextOptional: true,\n\t\t\t},\n\t\t\t'label-boundary-country-large': {\n\t\t\t\tminzoom: 2,\n\t\t\t\tsize: { 2: 8, 5: 13 },\n\t\t\t},\n\t\t\t'label-boundary-country-medium': {\n\t\t\t\tminzoom: 3,\n\t\t\t\tsize: { 3: 8, 5: 12 },\n\t\t\t},\n\t\t\t'label-boundary-country-small': {\n\t\t\t\tminzoom: 4,\n\t\t\t\tsize: { 4: 8, 5: 11 },\n\t\t\t},\n\t\t\t'label-boundary-state': {\n\t\t\t\tminzoom: 5,\n\t\t\t\tcolor: colors.label.lighten(0.05),\n\t\t\t\tsize: { 5: 8, 8: 12 },\n\t\t\t},\n\t\t\t'label-place-*': {\n\t\t\t\tcolor: colors.label.rotate(-15).saturate(1).darken(0.05),\n\t\t\t\tfont: fonts.regular,\n\t\t\t\ttextHaloColor: colors.labelHalo,\n\t\t\t\ttextHaloWidth: 2,\n\t\t\t\ttextHaloBlur: 1,\n\t\t\t},\n\t\t\t'label-place-capital': {\n\t\t\t\tminzoom: 5,\n\t\t\t\tsize: { 5: 12, 10: 16 },\n\t\t\t},\n\t\t\t'label-place-statecapital': {\n\t\t\t\tminzoom: 6,\n\t\t\t\tsize: { 6: 11, 10: 15 },\n\t\t\t},\n\t\t\t'label-place-city': {\n\t\t\t\tminzoom: 7,\n\t\t\t\tsize: { 7: 11, 10: 14 },\n\t\t\t},\n\t\t\t'label-place-town': {\n\t\t\t\tminzoom: 9,\n\t\t\t\tsize: { 8: 11, 12: 14 },\n\t\t\t},\n\t\t\t'label-place-village': {\n\t\t\t\tminzoom: 11,\n\t\t\t\tsize: { 9: 11, 12: 14 },\n\t\t\t},\n\t\t\t'label-place-hamlet': {\n\t\t\t\tminzoom: 13,\n\t\t\t\tsize: { 10: 11, 12: 14 },\n\t\t\t},\n\t\t\t// all the city things\n\t\t\t'label-place-suburb': {\n\t\t\t\tminzoom: 11,\n\t\t\t\tsize: { 11: 11, 13: 14 },\n\t\t\t\ttextTransform: 'uppercase',\n\t\t\t\tcolor: colors.label.rotate(-30).saturate(1).darken(0.05),\n\t\t\t},\n\t\t\t'label-place-quarter': {\n\t\t\t\tminzoom: 13,\n\t\t\t\tsize: { 13: 13 },\n\t\t\t\ttextTransform: 'uppercase',\n\t\t\t\tcolor: colors.label.rotate(-40).saturate(1).darken(0.05),\n\t\t\t},\n\t\t\t'label-place-neighbourhood': {\n\t\t\t\tminzoom: 14,\n\t\t\t\tsize: { 14: 12 },\n\t\t\t\ttextTransform: 'uppercase',\n\t\t\t\tcolor: colors.label.rotate(-50).saturate(1).darken(0.05),\n\t\t\t},\n\t\t\t'label-motorway-shield': {\n\t\t\t\tcolor: colors.shield,\n\t\t\t\tfont: fonts.bold,\n\t\t\t\ttextHaloColor: colors.motorway,\n\t\t\t\ttextHaloWidth: 0.1,\n\t\t\t\ttextHaloBlur: 1,\n\t\t\t\tsymbolPlacement: 'line',\n\t\t\t\ttextAnchor: 'center',\n\t\t\t\tminzoom: 14,\n\t\t\t\tsize: { 14: 10, 18: 12, 20: 16 },\n\t\t\t},\n\t\t\t'label-street-*': {\n\t\t\t\tcolor: colors.label,\n\t\t\t\tfont: fonts.regular,\n\t\t\t\ttextHaloColor: colors.labelHalo,\n\t\t\t\ttextHaloWidth: 2,\n\t\t\t\ttextHaloBlur: 1,\n\t\t\t\tsymbolPlacement: 'line',\n\t\t\t\ttextAnchor: 'center',\n\t\t\t\tminzoom: 12,\n\t\t\t\tsize: { 12: 10, 15: 13 },\n\t\t\t},\n\t\t\t'label-address-housenumber': {\n\t\t\t\tfont: fonts.regular,\n\t\t\t\ttextHaloColor: colors.building.lighten(0.05),\n\t\t\t\ttextHaloWidth: 2,\n\t\t\t\ttextHaloBlur: 1,\n\t\t\t\tsymbolPlacement: 'point',\n\t\t\t\ttextAnchor: 'center',\n\t\t\t\tminzoom: 17,\n\t\t\t\tsize: { 17: 8, 19: 10 },\n\t\t\t\tcolor: colors.building.darken(0.3),\n\t\t\t},\n\n\t\t\t// markings\n\t\t\t'marking-oneway{-reverse,}': {\n\t\t\t\tminzoom: 16,\n\t\t\t\timage: 'marking-arrow',\n\t\t\t\topacity: { 16: 0, 17: 0.7 },\n\t\t\t\tfont: fonts.regular,\n\t\t\t},\n\n\t\t\t// TODO: bicycle and pedestrian\n\n\t\t\t// transit\n\t\t\t'symbol-*': {\n\t\t\t\ticonSize: 1,\n\t\t\t\tsymbolPlacement: 'point',\n\t\t\t\ticonOpacity: 0.7,\n\t\t\t\ticonKeepUpright: true,\n\t\t\t\tfont: fonts.regular,\n\t\t\t\tsize: 10,\n\t\t\t\tcolor: colors.symbol,\n\t\t\t\ticonAnchor: 'bottom',\n\t\t\t\ttextAnchor: 'top',\n\t\t\t\ttextHaloColor: colors.labelHalo,\n\t\t\t\ttextHaloWidth: 2,\n\t\t\t\ttextHaloBlur: 1,\n\t\t\t},\n\t\t\t'symbol-transit-airport': {\n\t\t\t\tminzoom: 12,\n\t\t\t\timage: 'icon-airport',\n\t\t\t\ticonSize: { 12: 0.5, 14: 1 },\n\t\t\t},\n\t\t\t'symbol-transit-airfield': {\n\t\t\t\tminzoom: 13,\n\t\t\t\timage: 'icon-airfield',\n\t\t\t\ticonSize: { 13: 0.5, 15: 1 },\n\t\t\t},\n\t\t\t'symbol-transit-station': {\n\t\t\t\tminzoom: 13,\n\t\t\t\timage: 'icon-rail',\n\t\t\t\ticonSize: { 13: 0.5, 15: 1 },\n\t\t\t},\n\t\t\t'symbol-transit-lightrail': {\n\t\t\t\tminzoom: 14,\n\t\t\t\timage: 'icon-rail_light',\n\t\t\t\ticonSize: { 14: 0.5, 16: 1 },\n\t\t\t},\n\t\t\t'symbol-transit-subway': {\n\t\t\t\tminzoom: 14,\n\t\t\t\timage: 'icon-rail_metro',\n\t\t\t\ticonSize: { 14: 0.5, 16: 1 },\n\t\t\t},\n\t\t\t'symbol-transit-tram': {\n\t\t\t\tminzoom: 15,\n\t\t\t\timage: 'transport-tram',\n\t\t\t\ticonSize: { 15: 0.5, 17: 1 },\n\t\t\t},\n\t\t\t'symbol-transit-bus': {\n\t\t\t\tminzoom: 16,\n\t\t\t\timage: 'icon-bus',\n\t\t\t\ticonSize: { 16: 0.5, 18: 1 },\n\t\t\t},\n\t\t\t// TODO: localized symbols? depends on shortbread\n\n\t\t\t// pois\n\t\t\t'poi-*': {\n\t\t\t\tminzoom: 16,\n\t\t\t\ticonSize: { 16: 0.5, 19: 0.5, 20: 1 },\n\t\t\t\topacity: { 16: 0, 17: 0.4 },\n\t\t\t\tsymbolPlacement: 'point',\n\t\t\t\ticonOptional: true,\n\t\t\t\tfont: fonts.regular,\n\t\t\t\tcolor: colors.poi,\n\t\t\t},\n\t\t\t'poi-amenity': {\n\t\t\t\timage: ['match',\n\t\t\t\t\t['get', 'amenity'],\n\t\t\t\t\t'arts_centre', 'icon-art_gallery',\n\t\t\t\t\t'atm', 'icon-atm',\n\t\t\t\t\t'bank', 'icon-bank',\n\t\t\t\t\t'bar', 'icon-bar',\n\t\t\t\t\t'bench', 'icon-bench',\n\t\t\t\t\t'bicycle_rental', 'icon-bicycle_share',\n\t\t\t\t\t'biergarten', 'icon-beergarden',\n\t\t\t\t\t'cafe', 'icon-cafe',\n\t\t\t\t\t'car_rental', 'icon-car_rental',\n\t\t\t\t\t'car_sharing', 'icon-car_rental',\n\t\t\t\t\t'car_wash', 'icon-car_wash',\n\t\t\t\t\t'cinema', 'icon-cinema',\n\t\t\t\t\t//'clinic', 'icon-clinic',\n\t\t\t\t\t'college', 'icon-college',\n\t\t\t\t\t'community_centre', 'icon-community',\n\t\t\t\t\t//'courthouse', 'icon-courthouse',\n\t\t\t\t\t'dentist', 'icon-dentist',\n\t\t\t\t\t'doctors', 'icon-doctor',\n\t\t\t\t\t'dog_park', 'icon-dog_park',\n\t\t\t\t\t'drinking_water', 'icon-drinking_water',\n\t\t\t\t\t'embassy', 'icon-embassy',\n\t\t\t\t\t'fast_food', 'icon-fast_food',\n\t\t\t\t\t'fire_station', 'icon-fire_station',\n\t\t\t\t\t//'food_court', 'icon-food_court',\n\t\t\t\t\t'fountain', 'icon-fountain',\n\t\t\t\t\t'grave_yard', 'icon-cemetery',\n\t\t\t\t\t'hospital', 'icon-hospital',\n\t\t\t\t\t'hunting_stand', 'icon-huntingstand',\n\t\t\t\t\t'library', 'icon-library',\n\t\t\t\t\t'marketplace', 'icon-marketplace',\n\t\t\t\t\t'nightclub', 'icon-nightclub',\n\t\t\t\t\t'nursing_home', 'icon-nursinghome',\n\t\t\t\t\t'pharmacy', 'icon-pharmacy',\n\t\t\t\t\t'place_of_worship', 'icon-place_of_worship',\n\t\t\t\t\t'playground', 'icon-playground',\n\t\t\t\t\t'police', 'icon-police',\n\t\t\t\t\t'post_box', 'icon-postbox',\n\t\t\t\t\t'post_office', 'icon-post',\n\t\t\t\t\t'prison', 'icon-prison',\n\t\t\t\t\t'pub', 'icon-beer',\n\t\t\t\t\t//'public_building', 'icon-public_building',\n\t\t\t\t\t'recycling', 'icon-recycling',\n\t\t\t\t\t'restaurant', 'icon-restaurant',\n\t\t\t\t\t'school', 'icon-school',\n\t\t\t\t\t'shelter', 'icon-shelter',\n\t\t\t\t\t'telephone', 'icon-telephone',\n\t\t\t\t\t'theatre', 'icon-theatre',\n\t\t\t\t\t'toilets', 'icon-toilet',\n\t\t\t\t\t'townhall', 'icon-town_hall',\n\t\t\t\t\t//'university', 'icon-university',\n\t\t\t\t\t'vending_machine', 'icon-vendingmachine',\n\t\t\t\t\t'veterinary', 'icon-veterinary',\n\t\t\t\t\t'waste_basket', 'icon-waste_basket',\n\t\t\t\t\t'unknown',\n\t\t\t\t],\n\t\t\t},\n\t\t\t'poi-leisure': {\n\t\t\t\timage: ['match',\n\t\t\t\t\t['get', 'leisure'],\n\t\t\t\t\t'golf_course', 'icon-golf',\n\t\t\t\t\t'ice_rink', 'icon-icerink',\n\t\t\t\t\t'pitch', 'icon-pitch',\n\t\t\t\t\t//'sports_centre', 'icon-sports_centre',\n\t\t\t\t\t'stadium', 'icon-stadium',\n\t\t\t\t\t'swimming_pool', 'icon-swimming',\n\t\t\t\t\t'water_park', 'icon-waterpark',\n\t\t\t\t\t'icon-sports',\n\t\t\t\t],\n\t\t\t},\n\t\t\t'poi-tourism': {\n\t\t\t\timage: ['match',\n\t\t\t\t\t['get', 'tourism'],\n\t\t\t\t\t//'alpine_hut', 'icon-alpine_hut',\n\t\t\t\t\t//'bed_and_breakfast', 'icon-bed_and_breakfast',\n\t\t\t\t\t//'camp_site', 'icon-camp_site',\n\t\t\t\t\t//'caravan_site', 'icon-caravan_site',\n\t\t\t\t\t'chalet', 'icon-chalet',\n\t\t\t\t\t//'guest_house', 'icon-guest_house',\n\t\t\t\t\t//'hostel', 'icon-hostel',\n\t\t\t\t\t//'hotel', 'icon-hotel',\n\t\t\t\t\t'information', 'transport-information',\n\t\t\t\t\t//'motel', 'icon-motel',\n\t\t\t\t\t'picnic_site', 'icon-picnic_site',\n\t\t\t\t\t//'theme_park', 'icon-theme_park',\n\t\t\t\t\t'viewpoint', 'icon-viewpoint',\n\t\t\t\t\t'zoo', 'icon-zoo',\n\t\t\t\t\t'unknown',\n\t\t\t\t],\n\t\t\t},\n\t\t\t'poi-shop': {\n\t\t\t\timage: ['match',\n\t\t\t\t\t['get', 'shop'],\n\t\t\t\t\t'alcohol', 'icon-alcohol_shop',\n\t\t\t\t\t'bakery', 'icon-bakery',\n\t\t\t\t\t'beauty', 'icon-beauty',\n\t\t\t\t\t'beverages', 'icon-beverages',\n\t\t\t\t\t//'bicycle', 'icon-bicycle',\n\t\t\t\t\t'books', 'icon-books',\n\t\t\t\t\t'butcher', 'icon-butcher',\n\t\t\t\t\t//'car', 'icon-car',\n\t\t\t\t\t'chemist', 'icon-chemist',\n\t\t\t\t\t'clothes', 'icon-clothes',\n\t\t\t\t\t//'computer', 'icon-computer',\n\t\t\t\t\t//'convinience', 'icon-convinience',\n\t\t\t\t\t//'department_store', 'icon-department_store',\n\t\t\t\t\t'doityourself', 'icon-doityourself',\n\t\t\t\t\t'dry_cleaning', 'icon-drycleaning',\n\t\t\t\t\t'florist', 'icon-florist',\n\t\t\t\t\t'furniture', 'icon-furniture',\n\t\t\t\t\t'garden_centre', 'icon-garden_centre',\n\t\t\t\t\t'general', 'icon-shop',\n\t\t\t\t\t'gift', 'icon-gift',\n\t\t\t\t\t'greengrocer', 'icon-greengrocer',\n\t\t\t\t\t'hairdresser', 'icon-hairdresser',\n\t\t\t\t\t'hardware', 'icon-hardware',\n\t\t\t\t\t'jewelry', 'icon-jewelry_store',\n\t\t\t\t\t'kiosk', 'icon-kiosk',\n\t\t\t\t\t'laundry', 'icon-laundry',\n\t\t\t\t\t//'mall', 'icon-mall',\n\t\t\t\t\t//'mobile_phone', 'icon-mobile_phone',\n\t\t\t\t\t'newsagent', 'icon-newsagent',\n\t\t\t\t\t'optican', 'icon-optician',\n\t\t\t\t\t'outdoor', 'icon-outdoor',\n\t\t\t\t\t'shoes', 'icon-shoes',\n\t\t\t\t\t'sports', 'icon-sports',\n\t\t\t\t\t'stationery', 'icon-stationery',\n\t\t\t\t\t//'supermarket', 'icon-supermarket',\n\t\t\t\t\t'toys', 'icon-toys',\n\t\t\t\t\t'travel_agency', 'icon-travel_agent',\n\t\t\t\t\t'video', 'icon-video',\n\t\t\t\t\t'icon-shop',\n\t\t\t\t],\n\t\t\t},\n\t\t\t'poi-man_made': {\n\t\t\t\timage: ['match',\n\t\t\t\t\t['get', 'man_made'],\n\t\t\t\t\t'lighthouse', 'icon-lighthouse',\n\t\t\t\t\t'surveillance', 'icon-surveillance',\n\t\t\t\t\t'tower', 'icon-observation_tower',\n\t\t\t\t\t//'wastewater_plant', 'icon-wastewater_plant',\n\t\t\t\t\t//'water_well', 'icon-water_well',\n\t\t\t\t\t//'water_works', 'icon-water_works',\n\t\t\t\t\t'watermill', 'icon-watermill',\n\t\t\t\t\t'windmill', 'icon-windmill',\n\t\t\t\t\t'unknown',\n\t\t\t\t],\n\t\t\t},\n\t\t\t'poi-historic': {\n\t\t\t\timage: ['match',\n\t\t\t\t\t['get', 'historic'],\n\t\t\t\t\t//'archaelogical_site', 'icon-archaelogical_site',\n\t\t\t\t\t'artwork', 'icon-artwork',\n\t\t\t\t\t//'battlefield', 'icon-battlefield',\n\t\t\t\t\t'castle', 'icon-castle',\n\t\t\t\t\t//'fort', 'icon-fort',\n\t\t\t\t\t//'memorial', 'icon-memorial',\n\t\t\t\t\t'monument', 'icon-monument',\n\t\t\t\t\t//'ruins', 'icon-ruins',\n\t\t\t\t\t//'wayside_cross', 'icon-wayside_cross',\n\t\t\t\t\t'wayside_shrine', 'icon-shrine',\n\t\t\t\t\t'icon-historic',\n\t\t\t\t],\n\t\t\t},\n\t\t\t'poi-emergency': {\n\t\t\t\timage: ['match',\n\t\t\t\t\t['get', 'emergency'],\n\t\t\t\t\t'defibrillator', 'icon-defibrillator',\n\t\t\t\t\t'fire_hydrant', 'icon-hydrant',\n\t\t\t\t\t'phone', 'icon-emergency_phone',\n\t\t\t\t\t'unknown',\n\t\t\t\t],\n\t\t\t},\n\n\t\t\t/*\n\t\t\t'poi-highway': {\n\t\t\t\timage: ['match',\n\t\t\t\t\t['get', 'highway'],\n\t\t\t\t\t//'emergency_access_point', 'icon-emergency_access_point',\n\t\t\t\t\t'unknown'\n\t\t\t\t]\n\t\t\t},\n\t\t\t'poi-office': {\n\t\t\t\timage: ['match',\n\t\t\t\t\t['get', 'office'],\n\t\t\t\t\t//'diplomatic', 'icon-diplomatic',\n\t\t\t\t\t'unknown'\n\t\t\t\t]\n\t\t\t},\n\t\t\t*/\n\t\t};\n\t}\n}\n","import type StyleBuilder from '../style_builder/style_builder.js';\nimport type { StyleBuilderOptions } from '../style_builder/types.js';\nimport type { MaplibreStyle } from '../types/maplibre.js';\nimport type { RecolorOptions } from '../style_builder/recolor.js';\n\nexport type { MaplibreStyle, RecolorOptions };\n\n\n// import styles\nimport Colorful from './colorful.js';\nimport Eclipse from './eclipse.js';\nimport Graybeard from './graybeard.js';\nimport Neutrino from './neutrino.js';\n\n\n// generate style option types\nexport type ColorfulOptions = StyleBuilderOptions<Colorful>;\nexport type EclipseOptions = StyleBuilderOptions<Eclipse>;\nexport type GraybeardOptions = StyleBuilderOptions<Graybeard>;\nexport type NeutrinoOptions = StyleBuilderOptions<Neutrino>;\n\nexport type SomeOptions = ColorfulOptions | EclipseOptions | GraybeardOptions | NeutrinoOptions;\n\n\n// generate style builder types\ntype MakeStyle<T extends StyleBuilder<T>, O extends StyleBuilderOptions<T>> =\n\t((options?: O) => MaplibreStyle) &\n\t{\n\t\tgetOptions: () => O;\n\t};\n\nexport type ColorfulBuilder = MakeStyle<Colorful, ColorfulOptions>;\nexport type EclipseBuilder = MakeStyle<Eclipse, EclipseOptions>;\nexport type GraybeardBuilder = MakeStyle<Graybeard, GraybeardOptions>;\nexport type NeutrinoBuilder = MakeStyle<Neutrino, NeutrinoOptions>;\n\nexport type SomeBuilder = ColorfulBuilder | GraybeardBuilder | NeutrinoBuilder;\n\n\n\nfunction getStyleBuilder<T extends StyleBuilder<T>>(styleBuilder: new () => T): MakeStyle<T, StyleBuilderOptions<T>> {\n\tconst fn = function (options?: StyleBuilderOptions<T>): MaplibreStyle {\n\t\treturn new styleBuilder().build(options);\n\t};\n\tfn.getOptions = (): StyleBuilderOptions<T> => new styleBuilder().getDefaultOptions();\n\treturn fn;\n}\n\n\n// generate style builders\nexport const colorful: ColorfulBuilder = getStyleBuilder<Colorful>(Colorful);\nexport const eclipse: EclipseBuilder = getStyleBuilder<Eclipse>(Eclipse);\nexport const graybeard: GraybeardBuilder = getStyleBuilder<Graybeard>(Graybeard);\nexport const neutrino: NeutrinoBuilder = getStyleBuilder<Neutrino>(Neutrino);\n","import Colorful from './colorful.js';\n\nexport default class Eclipse extends Colorful {\n\tpublic readonly name: string = 'Eclipse';\n\n\tpublic constructor() {\n\t\tsuper();\n\n\t\tthis.transformDefaultColors(color => {\n\t\t\tcolor = color.hsl();\n\t\t\treturn color.lightness(100 - color.lightness()).rgb();\n\t\t});\n\t}\n}\n","import Colorful from './colorful.js';\n\nexport default class Graybeard extends Colorful {\n\tpublic readonly name: string = 'Graybeard';\n\n\tpublic constructor() {\n\t\tsuper();\n\n\t\tthis.transformDefaultColors(color => color.desaturate(1));\n\t}\n}","/* eslint-disable @typescript-eslint/naming-convention */\n\nimport StyleBuilder from '../style_builder/style_builder.js';\nimport type { StyleRules, StyleRulesOptions } from '../style_builder/types.js';\n\nexport default class Neutrino extends StyleBuilder<Neutrino> {\n\tpublic readonly name: string = 'Neutrino';\n\n\tpublic defaultFonts = {\n\t\tregular: 'noto_sans_regular',\n\t\tbold: 'noto_sans_bold',\n\t};\n\n\tpublic defaultColors = {\n\n\t\t/** Color representing land areas. */\n\t\tland: '#f6f0f6',\n\n\t\t/** Color representing bodies of water such as lakes and rivers. */\n\t\twater: '#cbd2df',\n\n\t\t/** Color for grassy areas and fields. */\n\t\tgrass: '#e7e9e5',\n\n\t\t/** Color for wooded or forested areas. */\n\t\twood: '#d9e3d9',\n\n\t\t/** Color used for agricultural land. */\n\t\tagriculture: '#f8eeee',\n\n\t\t/** Color for site areas such as parks or recreational facilities. */\n\t\tsite: '#ebe8e6',\n\n\t\t/** Primary color for buildings. */\n\t\tbuilding: '#e0d1d9',\n\n\t\t/** Color for streets and roads. */\n\t\tstreet: '#ffffff',\n\n\t\t/** Color used for boundaries, such as national or state lines. */\n\t\tboundary: '#e6ccd8',\n\n\t\t/** Color for footpaths and pedestrian areas. */\n\t\tfoot: '#fef8ff',\n\n\t\t/** Color used for railways. */\n\t\trail: '#e8d5e0',\n\n\t\t/** Primary color used for text labels. */\n\t\tlabel: '#cbb7b7',\n\t};\n\n\n\tprotected getStyleRules(options: StyleRulesOptions<Neutrino>): StyleRules {\n\t\tconst { colors, fonts } = options;\n\t\treturn {\n\t\t\t'background': {\n\t\t\t\tcolor: colors.land,\n\t\t\t},\n\t\t\t'boundary-{country,state}': {\n\t\t\t\tcolor: colors.boundary,\n\t\t\t},\n\t\t\t'boundary-country:outline': {\n\t\t\t\tsize: { 2: 2, 10: 6 },\n\t\t\t\topacity: { 2: 0, 4: 0.3 },\n\t\t\t\tcolor: colors.land.lighten(0.05),\n\t\t\t\tlineBlur: 1,\n\t\t\t},\n\t\t\t'boundary-country': {\n\t\t\t\tsize: { 2: 1, 10: 4 },\n\t\t\t\topacity: { 2: 0, 4: 1 },\n\t\t\t},\n\t\t\t'boundary-state:outline': {\n\t\t\t\tsize: { 7: 3, 10: 5 },\n\t\t\t\topacity: { 7: 0, 8: 0.3 },\n\t\t\t\tcolor: colors.land.lighten(0.05),\n\t\t\t\tlineBlur: 1,\n\t\t\t},\n\t\t\t'boundary-state': {\n\t\t\t\tsize: { 7: 2, 10: 3 },\n\t\t\t\topacity: { 7: 0, 8: 1 },\n\t\t\t\tlineDasharray: [0, 1.5, 1, 1.5],\n\t\t\t\tlineCap: 'round',\n\t\t\t\tlineJoin: 'round',\n\t\t\t},\n\t\t\t'water-*': {\n\t\t\t\tcolor: colors.water,\n\t\t\t},\n\t\t\t'water-area': {\n\t\t\t\topacity: { 4: 0, 6: 1 },\n\t\t\t},\n\t\t\t'water-area-*': {\n\t\t\t\topacity: { 4: 0, 6: 1 },\n\t\t\t},\n\t\t\t'water-{pier,dam}-area': {\n\t\t\t\tcolor: colors.land,\n\t\t\t\topacity: { 12: 0, 13: 1 },\n\t\t\t},\n\t\t\t'land-*': {\n\t\t\t\tcolor: colors.land,\n\t\t\t},\n\t\t\t'land-forest': {\n\t\t\t\tcolor: colors.wood,\n\t\t\t\topacity: { 7: 0, 8: 1 },\n\t\t\t},\n\t\t\t'land-grass': {\n\t\t\t\tcolor: colors.grass,\n\t\t\t\topacity: { 11: 0, 12: 1 },\n\t\t\t},\n\t\t\t'land-{park,garden,vegetation}': {\n\t\t\t\tcolor: colors.grass.darken(0.05).saturate(0.05),\n\t\t\t\topacity: { 11: 0, 12: 1 },\n\t\t\t},\n\t\t\t'land-agriculture': {\n\t\t\t\tcolor: colors.agriculture,\n\t\t\t\topacity: { 10: 0, 11: 1 },\n\t\t\t},\n\t\t\t'land-{commercial,industrial,residential}': {\n\t\t\t\tcolor: colors.land.darken(0.03),\n\t\t\t\topacity: { 10: 0, 11: 1 },\n\t\t\t},\n\t\t\t'site-{bicycleparking,parking}': {\n\t\t\t\tcolor: colors.site,\n\t\t\t},\n\t\t\t'building': {\n\t\t\t\tcolor: colors.building,\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t},\n\t\t\t'bridge': {\n\t\t\t\tcolor: colors.land.darken(0.01),\n\t\t\t},\n\t\t\t'{tunnel-,bridge-,}street-*': {\n\t\t\t\tcolor: colors.street,\n\t\t\t\tsize: 1,\n\t\t\t\tlineJoin: 'round',\n\t\t\t\tlineCap: 'round',\n\t\t\t},\n\t\t\t'{tunnel-,}street-*:outline': {\n\t\t\t\tcolor: colors.street.darken(0.1),\n\t\t\t\tlineJoin: 'round',\n\t\t\t\tlineCap: 'round',\n\t\t\t},\n\t\t\t'tunnel-street-*': {\n\t\t\t\tcolor: colors.street.darken(0.03),\n\t\t\t},\n\t\t\t'tunnel-street-*:outline': {\n\t\t\t\tcolor: colors.street.darken(0.13),\n\t\t\t\tlineDasharray: [1, 2],\n\t\t\t},\n\t\t\t'bridge-street-*:outline': {\n\t\t\t\tcolor: colors.street.darken(0.15),\n\t\t\t},\n\t\t\t// motorway\n\t\t\t'{bridge-street,tunnel-street,street}-motorway:outline': {\n\t\t\t\tsize: { 5: 2, 10: 5, 14: 5, 16: 14, 18: 38, 19: 84, 20: 168 },\n\t\t\t\topacity: { 5: 0, 6: 1 },\n\t\t\t},\n\t\t\t'{bridge-street,tunnel-street,street}-motorway': {\n\t\t\t\tsize: { 5: 1, 10: 4, 14: 4, 16: 12, 18: 36, 19: 80, 20: 160 },\n\t\t\t\topacity: { 5: 0, 6: 1 },\n\t\t\t},\n\n\t\t\t// trunk\n\t\t\t'{bridge-street,tunnel-street,street}-trunk:outline': {\n\t\t\t\tsize: { 7: 2, 10: 4, 14: 6, 16: 12, 18: 36, 19: 74, 20: 144 },\n\t\t\t\topacity: { 7: 0, 8: 1 },\n\t\t\t},\n\t\t\t'{bridge-street,tunnel-street,street}-trunk': {\n\t\t\t\tsize: { 7: 1, 10: 3, 14: 5, 16: 10, 18: 34, 19: 70, 20: 140 },\n\t\t\t\topacity: { 7: 0, 8: 1 },\n\t\t\t},\n\n\t\t\t// primary\n\t\t\t'{bridge-street,tunnel-street,street}-primary:outline': {\n\t\t\t\tsize: { 7: 2, 10: 4, 14: 6, 16: 12, 18: 36, 19: 74, 20: 144 },\n\t\t\t\topacity: { 7: 0, 8: 1 },\n\t\t\t},\n\t\t\t'{bridge-street,tunnel-street,street}-primary': {\n\t\t\t\tsize: { 7: 1, 10: 3, 14: 5, 16: 10, 18: 34, 19: 70, 20: 140 },\n\t\t\t\topacity: { 7: 0, 8: 1 },\n\t\t\t},\n\n\t\t\t// secondary\n\t\t\t'{bridge-street,tunnel-street,street}-secondary:outline': {\n\t\t\t\tsize: { 11: 2, 14: 5, 16: 8, 18: 30, 19: 68, 20: 138 },\n\t\t\t\topacity: { 11: 0, 12: 1 },\n\t\t\t},\n\t\t\t'{bridge-street,tunnel-street,street}-secondary': {\n\t\t\t\tsize: { 11: 1, 14: 4, 16: 6, 18: 28, 19: 64, 20: 130 },\n\t\t\t\topacity: { 11: 0, 12: 1 },\n\t\t\t},\n\n\t\t\t// links\n\t\t\t'{bridge-street,tunnel-street,street}-motorway-link:outline': {\n\t\t\t\tminzoom: 12,\n\t\t\t\tsize: { 12: 2, 14: 3, 16: 7, 18: 14, 20: 40 },\n\t\t\t\topacity: { 12: 0, 13: 1 },\n\t\t\t},\n\t\t\t'{bridge-street,tunnel-street,street}-motorway-link': {\n\t\t\t\tminzoom: 12,\n\t\t\t\tsize: { 12: 1, 14: 2, 16: 5, 18: 12, 20: 38 },\n\t\t\t\topacity: { 12: 0, 13: 1 },\n\t\t\t},\n\n\t\t\t'{bridge-street,tunnel-street,street}-{trunk,primary,secondary}-link:outline': {\n\t\t\t\tminzoom: 13,\n\t\t\t\tsize: { 12: 2, 14: 3, 16: 7, 18: 14, 20: 40 },\n\t\t\t\topacity: { 13: 0, 14: 1 },\n\t\t\t},\n\t\t\t'{bridge-street,tunnel-street,street}-{trunk,primary,secondary}-link': {\n\t\t\t\tminzoom: 13,\n\t\t\t\tsize: { 12: 1, 14: 2, 16: 5, 18: 12, 20: 38 },\n\t\t\t\topacity: { 13: 0, 14: 1 },\n\t\t\t},\n\n\t\t\t// minor streets\n\t\t\t'{bridge-street,tunnel-street,street}-{tertiary,tertiary-link,unclassified,residential,living_street,pedestrian}:outline': {\n\t\t\t\tsize: { 12: 2, 14: 3, 16: 6, 18: 26, 19: 64, 20: 128 },\n\t\t\t\topacity: { 12: 0, 13: 1 },\n\t\t\t},\n\t\t\t'{bridge-street,tunnel-street,street}-{tertiary,tertiary-link,unclassified,residential,living_street,pedestrian}': {\n\t\t\t\tsize: { 12: 1, 14: 2, 16: 5, 18: 24, 19: 60, 20: 120 },\n\t\t\t\topacity: { 12: 0, 13: 1 },\n\t\t\t},\n\t\t\t// service and tracks\n\t\t\t'{bridge-street,tunnel-street,street}-{service,track}:outline': {\n\t\t\t\tsize: { 14: 2, 16: 4, 18: 18, 19: 48, 20: 96 },\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t},\n\t\t\t'{bridge-street,tunnel-street,street}-{service,track}': {\n\t\t\t\tsize: { 14: 1, 16: 3, 18: 16, 19: 44, 20: 88 },\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t},\n\t\t\t// ways, surface only\n\t\t\t'way-{footway,path,steps}:outline': {\n\t\t\t\tsize: { 17: 0, 18: 3 },\n\t\t\t\topacity: { 17: 0, 18: 1 },\n\t\t\t\tminzoom: 17,\n\t\t\t\tcolor: colors.foot.darken(0.05),\n\t\t\t},\n\t\t\t'way-{footway,path,steps}': {\n\t\t\t\tsize: { 17: 0, 18: 2 },\n\t\t\t\topacity: { 17: 0, 18: 1 },\n\t\t\t\tminzoom: 17,\n\t\t\t\tcolor: colors.foot,\n\t\t\t},\n\t\t\t'street-pedestrian': {\n\t\t\t\tsize: { 13: 1, 15: 3 },\n\t\t\t\topacity: { 13: 0, 14: 1 },\n\t\t\t\tcolor: colors.foot,\n\t\t\t},\n\t\t\t'street-pedestrian-zone': {\n\t\t\t\tcolor: colors.foot,\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t},\n\t\t\t// rail\n\t\t\t'{tunnel-,bridge-,}transport-{rail,lightrail}:outline': {\n\t\t\t\tcolor: colors.rail,\n\t\t\t\tsize: { 8: 1, 12: 1, 15: 3 },\n\t\t\t},\n\t\t\t'{tunnel-,bridge-,}transport-{rail,lightrail}': {\n\t\t\t\tcolor: colors.rail.lighten(0.1),\n\t\t\t\tsize: { 8: 1, 12: 1, 15: 2 },\n\t\t\t\tlineDasharray: [2, 2],\n\t\t\t},\n\t\t\t// bridge\n\t\t\t'{bridge-,}transport-rail:outline': {\n\t\t\t\topacity: { 8: 0, 9: 1 },\n\t\t\t},\n\t\t\t'{bridge-,}transport-rail': {\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t},\n\t\t\t'{bridge-,}transport-lightrail:outline': {\n\t\t\t\topacity: { 11: 0, 12: 1 },\n\t\t\t},\n\t\t\t'{bridge-,}transport-lightrail': {\n\t\t\t\topacity: { 14: 0, 15: 1 },\n\t\t\t},\n\t\t\t// tunnel\n\t\t\t'tunnel-transport-rail:outline': {\n\t\t\t\topacity: { 8: 0, 9: 0.3 },\n\t\t\t},\n\t\t\t'tunnel-transport-rail': {\n\t\t\t\topacity: { 14: 0, 15: 0.3 },\n\t\t\t},\n\t\t\t'tunnel-transport-lightrail:outline': {\n\t\t\t\topacity: { 11: 0, 12: 0.3 },\n\t\t\t},\n\t\t\t'tunnel-transport-lightrail': {\n\t\t\t\topacity: { 14: 0, 15: 0.3 },\n\t\t\t},\n\t\t\t// labels\n\t\t\t'label-boundary-*': {\n\t\t\t\tcolor: colors.label,\n\t\t\t\tfont: fonts.bold,\n\t\t\t\ttextTransform: 'uppercase',\n\t\t\t\ttextHaloColor: colors.label.lighten(0.5),\n\t\t\t\ttextHaloWidth: 0.1,\n\t\t\t\ttextHaloBlur: 1,\n\t\t\t},\n\t\t\t'label-boundary-country-large': {\n\t\t\t\tminzoom: 2,\n\t\t\t\tsize: { 2: 11, 5: 16 },\n\t\t\t},\n\t\t\t'label-boundary-country-medium': {\n\t\t\t\tminzoom: 3,\n\t\t\t\tsize: { 3: 11, 5: 15 },\n\t\t\t},\n\t\t\t'label-boundary-country-small': {\n\t\t\t\tminzoom: 4,\n\t\t\t\tsize: { 4: 11, 5: 14 },\n\t\t\t},\n\t\t\t'label-boundary-state': {\n\t\t\t\tminzoom: 5,\n\t\t\t\tcolor: colors.label.lighten(0.05),\n\t\t\t\tsize: { 5: 8, 8: 12 },\n\t\t\t},\n\t\t\t'label-place-*': {\n\t\t\t\tcolor: colors.label.rotate(-15).saturate(1).darken(0.05),\n\t\t\t\tfont: fonts.regular,\n\t\t\t\ttextHaloColor: colors.label.lighten(0.5),\n\t\t\t\ttextHaloWidth: 0.1,\n\t\t\t\ttextHaloBlur: 1,\n\t\t\t\tsize: 1,\n\t\t\t},\n\t\t\t'label-place-capital': {\n\t\t\t\tminzoom: 5,\n\t\t\t\tsize: { 5: 12, 10: 16 },\n\t\t\t},\n\t\t\t'label-place-statecapital': {\n\t\t\t\tminzoom: 6,\n\t\t\t\tsize: { 6: 11, 10: 15 },\n\t\t\t},\n\t\t\t'label-place-city': {\n\t\t\t\tminzoom: 7,\n\t\t\t\tsize: { 7: 11, 10: 14 },\n\t\t\t},\n\t\t\t'label-place-town': {\n\t\t\t\tminzoom: 8,\n\t\t\t\tsize: { 8: 11, 12: 14 },\n\t\t\t},\n\t\t\t'label-place-village': {\n\t\t\t\tminzoom: 9,\n\t\t\t\tsize: { 9: 11, 12: 14 },\n\t\t\t},\n\t\t\t'label-place-hamlet': {\n\t\t\t\tminzoom: 10,\n\t\t\t\tsize: { 10: 11, 12: 14 },\n\t\t\t},\n\t\t\t// all the city things\n\t\t\t'label-place-suburb': {\n\t\t\t\tminzoom: 11,\n\t\t\t\tsize: { 11: 11, 13: 14 },\n\t\t\t\ttextTransform: 'uppercase',\n\t\t\t\tcolor: colors.label.rotate(-30).saturate(1).darken(0.05),\n\t\t\t},\n\t\t\t'label-place-quarter': {\n\t\t\t\tminzoom: 13,\n\t\t\t\tsize: { 13: 13 },\n\t\t\t\ttextTransform: 'uppercase',\n\t\t\t\tcolor: colors.label.rotate(-40).saturate(1).darken(0.05),\n\t\t\t},\n\t\t\t'label-place-neighbourhood': {\n\t\t\t\tminzoom: 14,\n\t\t\t\tsize: { 14: 12 },\n\t\t\t\ttextTransform: 'uppercase',\n\t\t\t\tcolor: colors.label.rotate(-50).saturate(1).darken(0.05),\n\t\t\t},\n\n\t\t\t'label-motorway-shield': {\n\t\t\t\tcolor: colors.label,\n\t\t\t\tfont: fonts.regular,\n\t\t\t\ttextHaloColor: colors.label.desaturate(0.5).lighten(0.1),\n\t\t\t\ttextHaloWidth: 0.1,\n\t\t\t\ttextHaloBlur: 1,\n\t\t\t\tsymbolPlacement: 'line',\n\t\t\t\ttextAnchor: 'center',\n\t\t\t\tminzoom: 14,\n\t\t\t\tsize: { 14: 8, 18: 10, 20: 16 },\n\t\t\t},\n\n\n\t\t\t'label-street-*': {\n\t\t\t\tcolor: colors.label,\n\t\t\t\tfont: fonts.regular,\n\t\t\t\ttextHaloColor: colors.label.desaturate(0.5).lighten(0.1),\n\t\t\t\ttextHaloWidth: 0.1,\n\t\t\t\ttextHaloBlur: 1,\n\t\t\t\tsymbolPlacement: 'line',\n\t\t\t\ttextAnchor: 'center',\n\t\t\t\tminzoom: 12,\n\t\t\t\tsize: { 12: 10, 15: 13 },\n\t\t\t},\n\n\t\t};\n\t}\n}","/** Represents the structure of a vector layer in a TileJSON specification. */\nexport interface VectorLayer {\n\tid: string;\n\tfields: Record<string, 'Boolean' | 'Number' | 'String'>;\n\tdescription?: string;\n\tminzoom?: number;\n\tmaxzoom?: number;\n}\n\n/** \n* Verifies if an object conforms to the VectorLayer structure. \n* Throws errors for any deviations from the expected structure or types.\n*/\nexport function isVectorLayer(layer: unknown): layer is VectorLayer {\n\tif (typeof layer !== 'object' || layer === null) {\n\t\tthrow new Error('Layer must be a non-null object');\n\t}\n\n\tconst obj = layer as Record<string, unknown>;\n\n\tif (typeof obj.id !== 'string') {\n\t\tthrow new Error('Layer.id must be a string');\n\t}\n\n\tif (typeof obj.fields !== 'object' || obj.fields === null) {\n\t\tthrow new Error('Layer.fields must be a non-null object');\n\t}\n\tif (Object.values(obj.fields).some(type => !['Boolean', 'Number', 'String'].includes(type as string))) {\n\t\tthrow new Error('Layer.fields values must be one of \\'Boolean\\', \\'Number\\', or \\'String\\'');\n\t}\n\n\tif ('description' in obj && typeof obj.description !== 'string') {\n\t\tthrow new Error('Layer.description must be a string if present');\n\t}\n\n\tif ('minzoom' in obj && (typeof obj.minzoom !== 'number' || obj.minzoom < 0)) {\n\t\tthrow new Error('Layer.minzoom must be a non-negative number if present');\n\t}\n\n\tif ('maxzoom' in obj && (typeof obj.maxzoom !== 'number' || obj.maxzoom < 0)) {\n\t\tthrow new Error('Layer.maxzoom must be a non-negative number if present');\n\t}\n\n\treturn true;\n}\n\nexport function isVectorLayers(layers: unknown): layers is VectorLayer[] {\n\tif (!Array.isArray(layers)) {\n\t\tthrow new Error('Expected an array of layers');\n\t}\n\n\tif (layers.length === 0) {\n\t\tthrow new Error('Array of layers cannot be empty');\n\t}\n\n\tlayers.forEach((layer, index) => {\n\t\ttry {\n\t\t\tif (!isVectorLayer(layer)) {\n\t\t\t\tthrow new Error(`Layer[${index}] is invalid`);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\t// Assuming `isVectorLayer` throws an error with a meaningful message, you can rethrow it\n\t\t\t// Alternatively, customize the error message or handle the error as needed\n\t\t\tthrow new Error(`Layer[${index}] at invalid: ${String((error instanceof Error) ? error.message : error)}`);\n\t\t}\n\t});\n\n\treturn true;\n}\n","export interface RandomColorOptions {\n\tseed?: string;\n\thue?: number | string;\n\topacity?: number;\n\tluminosity?: number | string;\n\tsaturation?: number | string;\n}\n\ninterface ColorInfo {\n\thueRange: [number, number] | null;\n\tlowerBounds: [number, number][];\n\tsaturationRange: [number, number];\n\tbrightnessRange: [number, number];\n}\n\nexport type RandomColorFunction = (options?: RandomColorOptions) => string;\n\nexport default function randomColorGenerator(startSeed?: number | string): RandomColorFunction {\n\tlet seed: number = inputToSeed(startSeed);\n\tconst colorDictionary = initColorDictionary();\n\treturn randomColor;\n\n\tfunction randomColor(options?: RandomColorOptions): string {\n\t\toptions ??= {};\n\n\t\tif (options.seed != null) {\n\t\t\tseed = inputToSeed(options.seed);\n\t\t}\n\n\t\toptions.opacity ??= 1;\n\n\t\tconst H = pickHue(options);\n\t\tconst S = pickSaturation(H, options);\n\t\tconst V = pickBrightness(H, S, options);\n\t\tconst hsl = HSVtoHSL([H, S, V]).map(v => v.toFixed(0));\n\n\t\tif (options.opacity === 1) {\n\t\t\treturn `hsl(${hsl[0]},${hsl[1]}%,${hsl[2]}%)`;\n\t\t} else {\n\t\t\treturn `hsla(${hsl[0]},${hsl[1]}%,${hsl[2]}%,${options.opacity})`;\n\t\t}\n\t}\n\n\tfunction pickHue(options: RandomColorOptions): number {\n\t\tlet hue = randomWithin(getHueRange(options.hue));\n\t\tif (hue < 0) hue = 360 + hue;\n\t\treturn hue;\n\t}\n\n\tfunction pickSaturation(hue: number, options: RandomColorOptions): number {\n\t\tif (options.hue === 'monochrome') return 0;\n\t\tif (options.luminosity === 'random') return randomWithin([0, 100]);\n\n\t\tconst { saturationRange } = getColorInfo(hue);\n\t\tlet [sMin, sMax] = saturationRange;\n\n\t\tif (options.saturation === 'strong') return sMax;\n\n\t\tswitch (options.luminosity) {\n\t\t\tcase 'bright': sMin = 55; break;\n\t\t\tcase 'dark': sMin = sMax - 10; break;\n\t\t\tcase 'light': sMax = 55; break;\n\t\t\tdefault:\n\t\t}\n\n\t\treturn randomWithin([sMin, sMax]);\n\t}\n\n\tfunction pickBrightness(h: number, s: number, options: RandomColorOptions): number {\n\t\tlet bMin = getMinimumBrightness(h, s), bMax = 100;\n\n\t\tswitch (options.luminosity) {\n\t\t\tcase 'dark': bMax = Math.min(100, bMin + 20); break;\n\t\t\tcase 'light': bMin = (bMax + bMin) / 2; break;\n\t\t\tcase 'random': bMin = 0; bMax = 100; break;\n\t\t\tdefault:\n\t\t}\n\n\t\treturn randomWithin([bMin, bMax]);\n\t}\n\n\tfunction getMinimumBrightness(h: number, s: number): number {\n\t\tconst { lowerBounds } = getColorInfo(h);\n\n\t\tfor (let i = 0; i < lowerBounds.length - 1; i++) {\n\t\t\tconst [s1, v1] = lowerBounds[i];\n\t\t\tconst [s2, v2] = lowerBounds[i + 1];\n\t\t\tif (s >= s1 && s <= s2) {\n\t\t\t\tconst m = (v2 - v1) / (s2 - s1), b = v1 - m * s1;\n\t\t\t\treturn m * s + b;\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tfunction getHueRange(hue?: number | string): [number, number] {\n\t\tif (typeof hue === 'number') {\n\t\t\tif (hue < 360 && hue > 0) return [hue, hue];\n\t\t}\n\n\t\tif (typeof hue === 'string') {\n\t\t\tconst color = colorDictionary[hue];\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n\t\t\tif (color?.hueRange) return color.hueRange;\n\t\t}\n\n\t\treturn [0, 360];\n\t}\n\n\tfunction getColorInfo(hue: number): ColorInfo {\n\t\t// Maps red colors to make picking hue easier\n\t\tif (hue >= 334 && hue <= 360) hue -= 360;\n\n\t\tfor (const colorName in colorDictionary) {\n\t\t\tconst color = colorDictionary[colorName];\n\t\t\tif (color.hueRange && hue >= color.hueRange[0] && hue <= color.hueRange[1]) {\n\t\t\t\treturn colorDictionary[colorName];\n\t\t\t}\n\t\t}\n\t\tthrow Error('Color not found');\n\t}\n\n\tfunction randomWithin(range: [number, number]): number {\n\t\t//Seeded random algorithm from http://indiegamr.com/generate-repeatable-random-numbers-in-js/\n\t\tconst max = range[1] || 1;\n\t\tconst min = range[0] || 0;\n\t\tseed = (seed * 9301 + 49297) % 233280;\n\t\tconst rnd = seed / 233280.0;\n\t\treturn Math.floor(min + rnd * (max - min));\n\t}\n\n\tfunction initColorDictionary(): Record<string, ColorInfo> {\n\t\tconst dic: Record<string, ColorInfo> = {};\n\n\t\tconst defineColor = (name: string, hueRange: [number, number] | null, lowerBounds: [number, number][]): void => {\n\t\t\tconst [greyest] = lowerBounds;\n\t\t\tconst colorful = lowerBounds[lowerBounds.length - 1];\n\n\t\t\tdic[name] = {\n\t\t\t\thueRange,\n\t\t\t\tlowerBounds,\n\t\t\t\tsaturationRange: [greyest[0], colorful[0]],\n\t\t\t\tbrightnessRange: [colorful[1], greyest[1]],\n\t\t\t};\n\t\t};\n\n\t\tdefineColor('monochrome', null, [[0, 0], [100, 0]]);\n\t\tdefineColor('red', [- 26, 18], [[20, 100], [30, 92], [40, 89], [50, 85], [60, 78], [70, 70], [80, 60], [90, 55], [100, 50]]);\n\t\tdefineColor('orange', [18, 46], [[20, 100], [30, 93], [40, 88], [50, 86], [60, 85], [70, 70], [100, 70]]);\n\t\tdefineColor('yellow', [46, 62], [[25, 100], [40, 94], [50, 89], [60, 86], [70, 84], [80, 82], [90, 80], [100, 75]]);\n\t\tdefineColor('green', [62, 178], [[30, 100], [40, 90], [50, 85], [60, 81], [70, 74], [80, 64], [90, 50], [100, 40]]);\n\t\tdefineColor('blue', [178, 257], [[20, 100], [30, 86], [40, 80], [50, 74], [60, 60], [70, 52], [80, 44], [90, 39], [100, 35]]);\n\t\tdefineColor('purple', [257, 282], [[20, 100], [30, 87], [40, 79], [50, 70], [60, 65], [70, 59], [80, 52], [90, 45], [100, 42]]);\n\t\tdefineColor('pink', [282, 334], [[20, 100], [30, 90], [40, 86], [60, 84], [80, 80], [90, 75], [100, 73]]);\n\n\t\treturn dic;\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tfunction HSVtoHSL(hsv: [number, number, number]): [number, number, number] {\n\t\tconst s = hsv[1] / 100, v = hsv[2] / 100, k = (2 - s) * v;\n\t\treturn [hsv[0], 100 * s * v / (k < 1 ? k : 2 - k), 100 * k / 2];\n\t}\n\n\tfunction inputToSeed(input: number | string | null | undefined): number {\n\t\tif (input == null) return 0;\n\t\tif (typeof input === 'number') return input;\n\n\t\tlet i = 0;\n\t\tfor (let p = 0; p < input.length; p++) i = (i * 0x101 + input.charCodeAt(p)) % 0x100000000;\n\t\treturn i;\n\t}\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\n\nimport type { TileJSONSpecification, TileJSONSpecificationBasic, MaplibreStyle, TileJSONSpecificationRaster, TileJSONSpecificationVector, VectorLayer } from '../types/index.js';\nimport { isTileJSONSpecification, isVectorLayers } from '../types/index.js';\nimport { resolveUrl } from '../lib/utils.js';\nimport type { BackgroundLayerSpecification, CircleLayerSpecification, FillLayerSpecification, LineLayerSpecification } from '@maplibre/maplibre-gl-style-spec';\nimport type { Container } from '@versatiles/container';\nimport randomColorGenerator from './random_color.js';\nimport { colorful } from '../styles/index.js';\nimport type { GuessContainerOptions, GuessStyleOptions } from './types.js';\n\nexport function guessStyle(opt: GuessStyleOptions): MaplibreStyle {\n\tconst { format } = opt;\n\tconst tilejsonBasic: TileJSONSpecificationBasic = {\n\t\ttilejson: '3.0.0',\n\t\tattribution: opt.attribution,\n\t\ttiles: opt.tiles,\n\t\tscheme: opt.scheme,\n\t\tbounds: opt.bounds,\n\t\tcenter: opt.center,\n\t\tdescription: opt.description,\n\t\tfillzoom: opt.fillzoom,\n\t\tgrids: opt.grids,\n\t\tlegend: opt.legend,\n\t\tminzoom: opt.minzoom,\n\t\tmaxzoom: opt.maxzoom,\n\t\tname: opt.name,\n\t\ttemplate: opt.template,\n\t};\n\n\tconst { baseUrl } = opt;\n\tif (typeof baseUrl === 'string') {\n\t\ttilejsonBasic.tiles = tilejsonBasic.tiles.map(url => resolveUrl(baseUrl, url));\n\t}\n\n\tlet k: keyof typeof tilejsonBasic;\n\tfor (k in tilejsonBasic) {\n\t\t// eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n\t\tif (tilejsonBasic[k] === undefined) delete tilejsonBasic[k];\n\t}\n\n\tlet tilejson: TileJSONSpecification;\n\tswitch (format) {\n\t\tcase 'avif':\n\t\tcase 'jpg':\n\t\tcase 'png':\n\t\tcase 'webp':\n\t\t\ttilejson = { ...tilejsonBasic, type: 'raster', format };\n\t\t\tbreak;\n\t\tcase 'pbf':\n\t\t\tconst { vectorLayers } = opt;\n\t\t\tif (!isVectorLayers(vectorLayers)) throw Error('property vector_layers is invalid');\n\t\t\ttilejson = { ...tilejsonBasic, type: 'vector', format, vector_layers: vectorLayers };\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow Error(`format \"${String(format)}\" is not supported`);\n\t}\n\n\tif (!isTileJSONSpecification(tilejson)) throw Error();\n\n\tlet style: MaplibreStyle;\n\tswitch (tilejson.type) {\n\t\tcase 'raster':\n\t\t\tstyle = getImageStyle(tilejson);\n\t\t\tbreak;\n\t\tcase 'vector':\n\t\t\tif (isShortbread(tilejson)) {\n\t\t\t\tstyle = getShortbreadStyle(tilejson, opt);\n\t\t\t} else {\n\t\t\t\tstyle = getInspectorStyle(tilejson);\n\t\t\t}\n\t}\n\n\tif (opt.minzoom ?? 0) style.zoom ??= opt.minzoom;\n\tif (opt.bounds) style.center ??= [\n\t\t(opt.bounds[0] + opt.bounds[2]) / 2,\n\t\t(opt.bounds[1] + opt.bounds[3]) / 2,\n\t];\n\tif (opt.center) style.center = opt.center;\n\n\treturn style;\n}\n\nexport async function guessStyleFromContainer(container: Container, options: GuessContainerOptions): Promise<MaplibreStyle> {\n\tconst header = await container.getHeader();\n\tconst metadata = await container.getMetadata();\n\n\tconst format = header.tileFormat;\n\n\tswitch (format) {\n\t\tcase 'avif':\n\t\tcase 'jpg':\n\t\tcase 'pbf':\n\t\tcase 'png':\n\t\tcase 'webp':\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow Error(`format \"${String(format)}\" is not supported`);\n\t}\n\n\tlet vectorLayers;\n\tif (typeof metadata === 'string') {\n\t\tconst t = JSON.parse(metadata) as object;\n\t\tif (('vector_layers' in t) && Array.isArray(t.vector_layers)) vectorLayers = t.vector_layers;\n\t}\n\n\tconst guessStyleOptions: GuessStyleOptions = {\n\t\t...options,\n\t\tformat,\n\t\tbounds: header.bbox,\n\t\tminzoom: header.zoomMin,\n\t\tmaxzoom: header.zoomMax,\n\t\tvectorLayers,\n\t};\n\n\treturn guessStyle(guessStyleOptions);\n}\n\nfunction isShortbread(spec: TileJSONSpecificationVector): boolean {\n\tif (typeof spec !== 'object') return false;\n\tif (!('vector_layers' in spec)) return false;\n\tif (!Array.isArray(spec.vector_layers)) return false;\n\n\n\tconst layerIds = new Set(spec.vector_layers.map(l => String(l.id)));\n\tconst shortbreadIds = ['place_labels', 'boundaries', 'boundary_labels', 'addresses', 'water_lines', 'water_lines_labels', 'dam_lines', 'dam_polygons', 'pier_lines', 'pier_polygons', 'bridges', 'street_polygons', 'streets_polygons_labels', 'ferries', 'streets', 'street_labels', 'street_labels_points', 'aerialways', 'public_transport', 'buildings', 'water_polygons', 'ocean', 'water_polygons_labels', 'land', 'sites', 'pois'];\n\treturn shortbreadIds.every(id => layerIds.has(id));\n}\n\nfunction getShortbreadStyle(spec: TileJSONSpecificationVector, builderOption: { baseUrl?: string; glyphs?: string; sprite?: string }): MaplibreStyle {\n\treturn colorful({\n\t\thideLabels: true,\n\t\ttiles: spec.tiles,\n\t\tbaseUrl: builderOption.baseUrl,\n\t\tglyphs: builderOption.glyphs,\n\t\tsprite: builderOption.sprite,\n\t});\n}\n\nfunction getInspectorStyle(spec: TileJSONSpecificationVector): MaplibreStyle {\n\tconst sourceName = 'vectorSource';\n\n\tconst layers: {\n\t\tbackground: BackgroundLayerSpecification[];\n\t\tcircle: CircleLayerSpecification[];\n\t\tline: LineLayerSpecification[];\n\t\tfill: FillLayerSpecification[];\n\t} = { background: [], circle: [], line: [], fill: [] };\n\n\tlayers.background.push({ 'id': 'background', 'type': 'background', 'paint': { 'background-color': '#fff' } });\n\n\tconst randomColor = randomColorGenerator();\n\n\tspec.vector_layers.forEach((vector_layer: VectorLayer) => {\n\t\tlet luminosity = 'bright', saturation, hue;\n\n\t\tif (/water|ocean|lake|sea|river/.test(vector_layer.id)) hue = 'blue';\n\t\tif (/state|country|place/.test(vector_layer.id)) hue = 'pink';\n\t\tif (/road|highway|transport|streets/.test(vector_layer.id)) hue = 'orange';\n\t\tif (/contour|building/.test(vector_layer.id)) hue = 'monochrome';\n\t\tif (vector_layer.id.includes('building')) luminosity = 'dark';\n\t\tif (/contour|landuse/.test(vector_layer.id)) hue = 'yellow';\n\t\tif (/wood|forest|park|landcover|land/.test(vector_layer.id)) hue = 'green';\n\n\t\tif (vector_layer.id.includes('point')) {\n\t\t\tsaturation = 'strong';\n\t\t\tluminosity = 'light';\n\t\t}\n\n\t\tconst color = randomColor({\n\t\t\thue,\n\t\t\tluminosity,\n\t\t\tsaturation,\n\t\t\tseed: vector_layer.id,\n\t\t\topacity: 0.6,\n\t\t});\n\n\t\tlayers.circle.push({\n\t\t\tid: `${sourceName}-${vector_layer.id}-circle`,\n\t\t\t'source-layer': vector_layer.id,\n\t\t\tsource: sourceName,\n\t\t\ttype: 'circle',\n\t\t\tfilter: ['==', '$type', 'Point'],\n\t\t\tpaint: { 'circle-color': color, 'circle-radius': 2 },\n\t\t});\n\n\t\tlayers.line.push({\n\t\t\tid: `${sourceName}-${vector_layer.id}-line`,\n\t\t\t'source-layer': vector_layer.id,\n\t\t\tsource: sourceName,\n\t\t\ttype: 'line',\n\t\t\tfilter: ['==', '$type', 'LineString'],\n\t\t\tlayout: { 'line-join': 'round', 'line-cap': 'round' },\n\t\t\tpaint: { 'line-color': color },\n\t\t});\n\n\t\tlayers.fill.push({\n\t\t\tid: `${sourceName}-${vector_layer.id}-fill`,\n\t\t\t'source-layer': vector_layer.id,\n\t\t\tsource: sourceName,\n\t\t\ttype: 'fill',\n\t\t\tfilter: ['==', '$type', 'Polygon'],\n\t\t\tpaint: { 'fill-color': color, 'fill-opacity': 0.3, 'fill-antialias': true, 'fill-outline-color': color },\n\t\t});\n\t});\n\n\treturn {\n\t\tversion: 8,\n\t\tsources: {\n\t\t\t[sourceName]: spec,\n\t\t},\n\t\tlayers: [\n\t\t\t...layers.background,\n\t\t\t...layers.fill,\n\t\t\t...layers.line,\n\t\t\t...layers.circle,\n\t\t],\n\t};\n}\n\nfunction getImageStyle(spec: TileJSONSpecificationRaster): MaplibreStyle {\n\tconst sourceName = 'rasterSource';\n\treturn {\n\t\tversion: 8,\n\t\tsources: { [sourceName]: spec },\n\t\tlayers: [{\n\t\t\tid: 'raster',\n\t\t\ttype: 'raster',\n\t\t\tsource: sourceName,\n\t\t}],\n\t};\n}","import type { VectorLayer } from './vector_layer.js';\nimport { isVectorLayers } from './vector_layer.js';\n\n/** Basic structure for TileJSON specification, applicable to both raster and vector types. */\nexport interface TileJSONSpecificationBasic {\n\ttilejson: '3.0.0';\n\ttiles: string[];\n\tattribution?: string;\n\tbounds?: [number, number, number, number];\n\tcenter?: [number, number];\n\tdata?: string[];\n\tdescription?: string;\n\tfillzoom?: number;\n\tgrids?: string[];\n\tlegend?: string;\n\tmaxzoom?: number;\n\tminzoom?: number;\n\tname?: string;\n\tscheme?: 'tms' | 'xyz';\n\ttemplate?: string;\n}\n\n/** Structure for TileJSON specification of raster type, specifying raster-specific properties. */\nexport interface TileJSONSpecificationRaster extends TileJSONSpecificationBasic {\n\ttype: 'raster';\n\tformat: 'avif' | 'jpg' | 'png' | 'webp';\n}\n\n/** Structure for TileJSON specification of vector type, specifying vector-specific properties. */\nexport interface TileJSONSpecificationVector extends TileJSONSpecificationBasic {\n\ttype: 'vector';\n\tformat: 'pbf';\n\t// eslint-disable-next-line @typescript-eslint/naming-convention\n\tvector_layers: VectorLayer[];\n}\n\n/** Represents a TileJSON specification, which can be either raster or vector. */\nexport type TileJSONSpecification = TileJSONSpecificationRaster | TileJSONSpecificationVector;\n\n/** \n* Checks if an object adheres to the TileJSON specification. \n* Throws errors if the object does not conform to the expected structure or types.\n*/\nexport function isTileJSONSpecification(spec: unknown): spec is TileJSONSpecification {\n\tif (typeof spec !== 'object' || spec === null) {\n\t\tthrow Error('spec must be an object');\n\t}\n\n\tconst obj = spec as Record<string, unknown>;\n\n\t// Common property validation\n\tif (obj.tilejson !== '3.0.0') {\n\t\tthrow Error('spec.tilejson must be \"3.0.0\"');\n\t}\n\n\tif (obj.attribution !== undefined && typeof obj.attribution !== 'string') {\n\t\tthrow Error('spec.attribution must be a string if present');\n\t}\n\n\tif (obj.bounds !== undefined) {\n\t\tif (!Array.isArray(obj.bounds) || obj.bounds.length !== 4 || obj.bounds.some(num => typeof num !== 'number')) {\n\t\t\tthrow Error('spec.bounds must be an array of four numbers if present');\n\t\t}\n\t\tconst a = obj.bounds as [number, number, number, number];\n\t\tif (a[0] < -180 || a[0] > 180) throw Error('spec.bounds[0] must be between -180 and 180');\n\t\tif (a[1] < -90 || a[1] > 90) throw Error('spec.bounds[1] must be between -90 and 90');\n\t\tif (a[2] < -180 || a[2] > 180) throw Error('spec.bounds[2] must be between -180 and 180');\n\t\tif (a[3] < -90 || a[3] > 90) throw Error('spec.bounds[3] must be between -90 and 90');\n\t\tif (a[0] > a[2]) throw Error('spec.bounds[0] must be smaller than spec.bounds[2]');\n\t\tif (a[1] > a[3]) throw Error('spec.bounds[1] must be smaller than spec.bounds[3]');\n\t}\n\n\tif (obj.center !== undefined) {\n\t\tif (!Array.isArray(obj.center) || obj.center.length !== 2 || obj.center.some(num => typeof num !== 'number')) {\n\t\t\tthrow Error('spec.center must be an array of two numbers if present');\n\t\t}\n\t\tconst a = obj.center as [number, number];\n\t\tif (a[0] < -180 || a[0] > 180) throw Error('spec.center[0] must be between -180 and 180');\n\t\tif (a[1] < -90 || a[1] > 90) throw Error('spec.center[1] must be between -90 and 90');\n\t}\n\n\tif (obj.data !== undefined && (!Array.isArray(obj.data) || obj.data.some(url => typeof url !== 'string'))) {\n\t\tthrow Error('spec.data must be an array of strings if present');\n\t}\n\n\tif (obj.description !== undefined && typeof obj.description !== 'string') {\n\t\tthrow Error('spec.description must be a string if present');\n\t}\n\n\tif (obj.fillzoom !== undefined && (typeof obj.fillzoom !== 'number' || (obj.fillzoom < 0))) {\n\t\tthrow Error('spec.fillzoom must be a positive integer if present');\n\t}\n\n\tif (obj.grids !== undefined && (!Array.isArray(obj.grids) || obj.grids.some(url => typeof url !== 'string'))) {\n\t\tthrow Error('spec.grids must be an array of strings if present');\n\t}\n\n\tif (obj.legend !== undefined && typeof obj.legend !== 'string') {\n\t\tthrow Error('spec.legend must be a string if present');\n\t}\n\n\tif (obj.minzoom !== undefined && (typeof obj.minzoom !== 'number' || (obj.minzoom < 0))) {\n\t\tthrow Error('spec.minzoom must be a positive integer if present');\n\t}\n\n\tif (obj.maxzoom !== undefined && (typeof obj.maxzoom !== 'number' || (obj.maxzoom < 0))) {\n\t\tthrow Error('spec.maxzoom must be a positive integer if present');\n\t}\n\n\tif (obj.name !== undefined && typeof obj.name !== 'string') {\n\t\tthrow Error('spec.name must be a string if present');\n\t}\n\n\tif (obj.scheme !== undefined && obj.scheme !== 'xyz' && obj.scheme !== 'tms') {\n\t\tthrow Error('spec.scheme must be \"tms\" or \"xyz\" if present');\n\t}\n\n\tif (obj.template !== undefined && typeof obj.template !== 'string') {\n\t\tthrow Error('spec.template must be a string if present');\n\t}\n\n\tif (!Array.isArray(obj.tiles) || obj.tiles.length === 0 || obj.tiles.some(url => typeof url !== 'string')) {\n\t\tthrow Error('spec.tiles must be an array of strings');\n\t}\n\n\tif (typeof obj.format !== 'string') {\n\t\tthrow Error('spec.format must be a string');\n\t}\n\n\tif (obj.type === 'raster') {\n\t\tif (!['avif', 'jpg', 'png', 'webp'].includes(obj.format)) {\n\t\t\tthrow Error('spec.format must be \"avif\", \"jpg\", \"png\", or \"webp\" for raster sources');\n\t\t}\n\t} else if (obj.type === 'vector') {\n\t\tif (obj.format !== 'pbf') {\n\t\t\tthrow Error('spec.format must be \"pbf\" for vector sources');\n\t\t}\n\t\ttry {\n\t\t\tif (!isVectorLayers(obj.vector_layers)) throw Error('spec.vector_layers is invalid');\n\t\t} catch (error) {\n\t\t\tthrow Error('spec.vector_layers is invalid: ' + String((error instanceof Error) ? error.message : error));\n\t\t}\n\t} else {\n\t\tthrow Error('spec.type must be \"raster\" or \"vector\"');\n\t}\n\n\treturn true;\n}\n"],"names":["colorName","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","isArrayish","obj","Array","isArray","length","splice","Function","Object","getOwnPropertyDescriptor","constructor","name","concat","prototype","slice","swizzle","simpleSwizzleModule","exports","args","results","i","len","arg","call","push","wrap","fn","arguments","colorNames","require$$0","require$$1","hasOwnProperty","reverseNames","create","cs","colorStringModule","to","get","clamp","num","min","max","Math","hexDouble","str","round","toString","toUpperCase","string","val","model","substring","toLowerCase","hsl","hwb","rgb","value","match","hexAlpha","i2","parseInt","parseFloat","alpha","isNaN","hex","rgba","percent","r","g","b","hsla","hwba","a","keyword","cssKeywords","reverseKeywords","key","keys","convert","channels","labels","hsv","cmyk","xyz","lab","lch","ansi16","ansi256","hcg","apple","conversions","Error","defineProperty","delta","h","s","l","rdif","gdif","bdif","v","diff","diffc","c","w","k","reversed","currentClosestKeyword","currentClosestDistance","Infinity","distance","y","x","z","t2","t3","t1","smin","lmin","hi","floor","f","p","q","t","vmin","sl","wh","bl","ratio","n","m","y2","x2","z2","atan2","PI","sqrt","hr","cos","sin","convert$2","saturation","ansi","color","mult","rem","colorString","split","map","char","join","integer","chroma","grayscale","hue","pure","mg","deriveBFS","fromModel","graph","models","parent","buildGraph","queue","current","pop","adjacents","adjacent","node","unshift","link","from","wrapConversion","toModel","path","cur","conversion","route","forEach","routes","wrappedFn","arg0","result","wrapRounded","raw","wrapRaw","skippedModels","hashedModelKeys","sort","limiters","Color","object","this","valpha","newArray","zeroArray","indexOf","hashedKeys","JSON","stringify","limit","freeze","toJSON","places","self","percentString","array","unitArray","unitObject","roundToPlace","undefined","getset","maxfn","saturationl","lightness","saturationv","wblack","hexa","rgbArray","alphaHex","rgbNumber","luminosity","lum","element","entries","chan","contrast","color2","lum1","lum2","level","contrastRatio","isDark","isLight","negate","lighten","darken","saturate","desaturate","whiten","blacken","fade","opaquer","rotate","degrees","mix","mixinColor","weight","color1","w1","w2","includes","number","Number","toFixed","roundTo","channel","modifier","maxzoom","balanced","RegExp","maybeMatch","begs","beg","left","right","ai","bi","range","start","end","pre","body","post","reg","escSlash","random","escOpen","escClose","escComma","escPeriod","escSlashPattern","escOpenPattern","escClosePattern","escCommaPattern","escPeriodPattern","slashPattern","openPattern","closePattern","commaPattern","periodPattern","numeric","charCodeAt","unescapeBraces","replace","parseCommaParts","parts","postParts","shift","apply","expandTop","expand","escapeBraces","embrace","isPadded","el","test","lte","gte","isTop","expansions","expansion","isNumericSequence","isAlphaSequence","isSequence","isOptions","N","width","incr","abs","pad","some","String","fromCharCode","need","j","propertyLookup","Map","deepClone","type","isSimpleObject","fromEntries","e","console","log","getPrototypeOf","item","isBasicType","deepMerge","source0","sources","target","source","hasOwn","sourceValue","resolveUrl","base","url","Boolean","URL","href","decorate","layers","rules","recolor","layerIds","id","layerIdSet","Set","layerStyles","idDef","layerStyle","expandBraces","flatMap","regExpString","regExp","filter","layerId","has","set","layer","styleRule","ruleKeyCamelCase","ruleValue","ruleKey","propertyDefs","maplibreProperties","propertyDef","valueType","processExpression","processColor","processFont","layout","paint","do","cbValue","processZoomStops","stops","processStyling","isValidRecolorOptions","opt","invertBrightness","gamma","brightness","tint","tintColor","types","short","add","propertyKey","property","propertyList","CachedRecolor","skip","cache","invert","pow","rgb0","rgbNew","StyleBuilder","sourceName","build","options","baseUrl","globalThis","document","location","glyphs","sprite","tiles","hideLabels","languageSuffix","recolorOptions","colors","getColors","defaultColors","fonts","defaultFonts","fontName","style","version","metadata","license","tilejson","attribution","scheme","format","bounds","minzoom","vector_layers","fields","kind","name_de","name_en","population","admin_level","coastline","disputed","maritime","land_area","name_single","way_area","housename","housenumber","bridge","tunnel","rail","service","surface","bicycle","horse","oneway","oneway_reverse","tracktype","ref","ref_cols","ref_rows","iata","station","amenity","dummy","atm","cuisine","denomination","emergency","highway","historic","information","leisure","man_made","religion","shop","sport","tourism","vending","styleRuleOptions","layerStyleRules","getStyleRules","layerDefinitions","option","nameField","kinds","prefix","suffix","noDrivewayExpression","reverse","getShortbreadLayers","entriesColor","getDefaultOptions","transformDefaultColors","callback","Colorful","regular","bold","land","water","glacier","wood","grass","park","street","streetbg","motorway","motorwaybg","trunk","trunkbg","buildingbg","building","boundary","residential","commercial","industrial","foot","label","labelHalo","shield","agriculture","subway","cycle","waste","burial","sand","rock","wetland","symbol","danger","prison","parking","construction","education","hospital","poi","background","lineBlur","lineCap","lineJoin","size","opacity","lineDasharray","lineWidth","fillOutlineColor","image","fillTranslate","fillAntialias","font","textTransform","textHaloColor","textHaloWidth","textHaloBlur","textAnchor","textOffset","textPadding","textOptional","symbolPlacement","iconSize","iconOpacity","iconKeepUpright","iconAnchor","iconOptional","getStyleBuilder","styleBuilder","getOptions","colorful","eclipse","super","graybeard","neutrino","site","isVectorLayers","index","values","description","isVectorLayer","error","message","randomColorGenerator","startSeed","seed","inputToSeed","colorDictionary","dic","defineColor","hueRange","lowerBounds","greyest","saturationRange","brightnessRange","initColorDictionary","H","randomWithin","getHueRange","pickHue","S","getColorInfo","sMin","sMax","pickSaturation","V","bMin","s1","v1","s2","v2","getMinimumBrightness","bMax","pickBrightness","HSVtoHSL","rnd","input","tilejsonBasic","center","fillzoom","grids","legend","template","vectorLayers","spec","data","isTileJSONSpecification","getImageStyle","every","isShortbread","circle","line","fill","randomColor","vector_layer","getInspectorStyle","builderOption","zoom"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,9,10]}